{"ast":null,"code":"import _objectSpread from\"/Users/kitkamon/Cursor/evep-my-firstcare-com/admin-panel/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/Users/kitkamon/Cursor/evep-my-firstcare-com/admin-panel/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"children\",\"value\",\"index\"];import React,{useState}from'react';import{Box,Typography,Card,CardContent,Button,Dialog,DialogTitle,DialogContent,DialogActions,TextField,FormControl,InputLabel,Select,MenuItem,Switch,FormControlLabel,Grid,Alert,CircularProgress,Snackbar,Accordion,AccordionSummary,AccordionDetails,List,ListItem,ListItemIcon,ListItemText,Chip,Tabs,Tab,IconButton,Paper,Stack,FormHelperText,InputAdornment}from'@mui/material';import{PersonAdd,Add,ExpandMore,CheckCircle,Warning,Delete,ContentCopy,Save,Preview,Settings,Message,Person,Gavel,PlayArrow,ViewModule as Template}from'@mui/icons-material';import{getFollowFlows,createFollowFlow,updateFollowFlow,deleteFollowFlow,handleFollowEvent,getLegalDocuments}from'../../api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function TabPanel(props){const{children,value,index}=props,other=_objectWithoutProperties(props,_excluded);return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({role:\"tabpanel\",hidden:value!==index,id:\"flow-tabpanel-\".concat(index),\"aria-labelledby\":\"flow-tab-\".concat(index)},other),{},{children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{p:3},children:children})}));}const FollowEventManager=()=>{// Add template functionality\nconst[templateDialogOpen,setTemplateDialogOpen]=useState(false);const[flows,setFlows]=useState([]);const[loading,setLoading]=useState(false);const[dialogOpen,setDialogOpen]=useState(false);const[editingFlow,setEditingFlow]=useState(null);const[tabValue,setTabValue]=useState(0);const[previewMode,setPreviewMode]=useState(false);const[validationErrors,setValidationErrors]=useState({});const[legalDocuments,setLegalDocuments]=useState([]);// Load flows and legal documents on component mount\nReact.useEffect(()=>{loadFlows();loadLegalDocuments();},[]);const loadFlows=async()=>{try{setLoading(true);const response=await getFollowFlows();setFlows(response.data||[]);}catch(error){var _error$response,_error$response$data;console.error('Error loading flows:',error);const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||error.message||'Failed to load follow flows';setError(errorMessage);}finally{setLoading(false);}};const loadLegalDocuments=async()=>{try{const response=await getLegalDocuments();setLegalDocuments(response.data.documents||[]);}catch(error){console.error('Error loading legal documents:',error);// Don't set error state for legal documents as it's not critical\n}};const[formData,setFormData]=useState({name:'',is_active:true,welcome_message:{text:'Welcome to DiaCare Buddy! ðŸ‘‹\\n\\nI\\'m here to help you manage your diabetes care. Let\\'s get started with a few quick questions.',include_quick_replies:true,quick_replies:['Start Setup','Learn More','Skip Setup']},onboarding_steps:[{step:1,type:'text',content:{text:'What language would you prefer to use?'},delay_seconds:0},{step:2,type:'text',content:{text:'Would you like to receive notifications about your health?'},delay_seconds:2}],user_preferences:{collect_language:true,collect_timezone:true,collect_notifications:true,collect_medical_info:false},consent_management:{require_consent:true,consent_text:'By using this service, you agree to our privacy policy and terms of service.',privacy_policy_url:'/privacy',required_documents:['privacy_policy','digital_consent'],optional_documents:['terms_of_use'],consent_flow_type:'step_by_step'},profile_setup:{auto_create_profile:true,required_fields:['name','age'],optional_fields:['medical_history','preferences']}});const[error,setError]=useState(null);const[success,setSuccess]=useState(null);const handleOpenDialog=flow=>{if(flow){setEditingFlow(flow);setFormData(flow);}else{setEditingFlow(null);setFormData({name:'',is_active:true,welcome_message:{text:'Welcome to DiaCare Buddy! ðŸ‘‹\\n\\nI\\'m here to help you manage your diabetes care. Let\\'s get started with a few quick questions.',include_quick_replies:true,quick_replies:['Start Setup','Learn More','Skip Setup']},onboarding_steps:[{step:1,type:'text',content:{text:'What language would you prefer to use?'},delay_seconds:0},{step:2,type:'text',content:{text:'Would you like to receive notifications about your health?'},delay_seconds:2}],user_preferences:{collect_language:true,collect_timezone:true,collect_notifications:true,collect_medical_info:false},consent_management:{require_consent:true,consent_text:'By using this service, you agree to our privacy policy and terms of service.',privacy_policy_url:'/privacy',required_documents:['privacy_policy','digital_consent'],optional_documents:['terms_of_use'],consent_flow_type:'step_by_step'},profile_setup:{auto_create_profile:true,required_fields:['name','age'],optional_fields:['medical_history','preferences']}});}setTabValue(0);setPreviewMode(false);setValidationErrors({});setDialogOpen(true);};const handleCloseDialog=()=>{setDialogOpen(false);setEditingFlow(null);setPreviewMode(false);setValidationErrors({});};const handleTemplateSelect=templateName=>{loadTemplate(templateName);setTemplateDialogOpen(false);setDialogOpen(true);};const validateForm=()=>{const errors={};if(!formData.name.trim()){errors.name='Flow name is required';}if(!formData.welcome_message.text.trim()){errors.welcomeMessage='Welcome message is required';}if(formData.welcome_message.include_quick_replies&&formData.welcome_message.quick_replies.length===0){errors.quickReplies='At least one quick reply is required when quick replies are enabled';}if(formData.onboarding_steps.length===0){errors.onboardingSteps='At least one onboarding step is required';}formData.onboarding_steps.forEach((step,index)=>{var _step$content,_step$content$text;if(!((_step$content=step.content)!==null&&_step$content!==void 0&&(_step$content$text=_step$content.text)!==null&&_step$content$text!==void 0&&_step$content$text.trim())){errors[\"step\".concat(index,\"Content\")]=\"Step \".concat(index+1,\" content is required\");}});setValidationErrors(errors);return Object.keys(errors).length===0;};const handleSave=async()=>{if(!validateForm()){return;}try{setLoading(true);setError(null);if(editingFlow){// Update existing flow\nawait updateFollowFlow(editingFlow.id,formData);setSuccess('Follow event flow updated successfully!');}else{// Create new flow\nconst response=await createFollowFlow(formData);setFlows(prev=>[response.data,...prev]);setSuccess('Follow event flow created successfully!');}handleCloseDialog();}catch(err){var _err$response,_err$response$data;console.error('Save flow error:',err);const errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||err.message||'Failed to save follow event flow';setError(errorMessage);}finally{setLoading(false);}};const handleTestFlow=async flow=>{try{setLoading(true);setError(null);const testData={user_id:'test_user_123',flow_id:flow.id};console.log('Sending test data:',testData);// Test the flow with a dummy user ID\nawait handleFollowEvent(testData);setSuccess('Follow event flow tested successfully!');}catch(err){var _err$response2,_err$response3,_err$response3$data;console.error('Test flow error:',err);console.error('Error response:',err.response);console.error('Error data:',(_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.data);const errorMessage=((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.detail)||err.message||'Failed to test follow event flow';setError(errorMessage);}finally{setLoading(false);}};const handleDeleteFlow=async flow=>{if(!window.confirm(\"Are you sure you want to delete the flow \\\"\".concat(flow.name,\"\\\"?\"))){return;}try{setLoading(true);setError(null);await deleteFollowFlow(flow.id);setFlows(prev=>prev.filter(f=>f.id!==flow.id));setSuccess('Follow event flow deleted successfully!');}catch(err){var _err$response4,_err$response4$data;console.error('Delete flow error:',err);const errorMessage=((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.detail)||err.message||'Failed to delete follow event flow';setError(errorMessage);}finally{setLoading(false);}};const addOnboardingStep=()=>{const newStep={step:formData.onboarding_steps.length+1,type:'text',content:{text:''},delay_seconds:0};setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{onboarding_steps:[...prev.onboarding_steps,newStep]}));};const removeOnboardingStep=index=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{onboarding_steps:prev.onboarding_steps.filter((_,i)=>i!==index)}));};const updateOnboardingStep=(index,field,value)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{onboarding_steps:prev.onboarding_steps.map((step,i)=>i===index?_objectSpread(_objectSpread({},step),{},{[field]:value}):step)}));};const addQuickReply=()=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{welcome_message:_objectSpread(_objectSpread({},prev.welcome_message),{},{quick_replies:[...prev.welcome_message.quick_replies,'']})}));};const updateQuickReply=(index,value)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{welcome_message:_objectSpread(_objectSpread({},prev.welcome_message),{},{quick_replies:prev.welcome_message.quick_replies.map((reply,i)=>i===index?value:reply)})}));};const removeQuickReply=index=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{welcome_message:_objectSpread(_objectSpread({},prev.welcome_message),{},{quick_replies:prev.welcome_message.quick_replies.filter((_,i)=>i!==index)})}));};const loadTemplate=templateName=>{const templates={'basic':{name:'Basic Onboarding',is_active:true,welcome_message:{text:'Welcome! Let\\'s get you started with a few quick questions.',include_quick_replies:true,quick_replies:['Start','Help','Skip']},onboarding_steps:[{step:1,type:'text',content:{text:'What\\'s your name?'},delay_seconds:0},{step:2,type:'text',content:{text:'How can we help you today?'},delay_seconds:1}],user_preferences:{collect_language:true,collect_timezone:true,collect_notifications:false,collect_medical_info:false},consent_management:{require_consent:true,consent_text:'By continuing, you agree to our terms of service.',privacy_policy_url:'/privacy',required_documents:['privacy_policy','digital_consent'],optional_documents:['terms_of_use'],consent_flow_type:'step_by_step'},profile_setup:{auto_create_profile:true,required_fields:['name'],optional_fields:['preferences']}},'medical':{name:'Medical Onboarding',is_active:true,welcome_message:{text:'Welcome to our health service! We\\'ll help you set up your health profile.',include_quick_replies:true,quick_replies:['Start Health Setup','Learn More','Contact Support']},onboarding_steps:[{step:1,type:'text',content:{text:'What\\'s your primary health concern?'},delay_seconds:0},{step:2,type:'text',content:{text:'Do you have any existing medical conditions?'},delay_seconds:2},{step:3,type:'text',content:{text:'What medications are you currently taking?'},delay_seconds:2}],user_preferences:{collect_language:true,collect_timezone:true,collect_notifications:true,collect_medical_info:true},consent_management:{require_consent:true,consent_text:'By using this health service, you consent to sharing your health information for medical purposes.',privacy_policy_url:'/health-privacy',required_documents:['privacy_policy','digital_consent'],optional_documents:['terms_of_use'],consent_flow_type:'step_by_step'},profile_setup:{auto_create_profile:true,required_fields:['name','age','medical_history'],optional_fields:['emergency_contact','preferences']}}};if(templates[templateName]){setFormData(templates[templateName]);setSuccess(\"Loaded \".concat(templateName,\" template\"));}};const handleTabChange=(_event,newValue)=>{setTabValue(newValue);};return/*#__PURE__*/_jsxs(Box,{sx:{p:{xs:2,md:4},minHeight:'100vh',background:'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)'},children:[/*#__PURE__*/_jsxs(Box,{sx:{mb:4,display:'flex',alignItems:'center',gap:3,background:'white',p:3,borderRadius:3,boxShadow:'0 4px 12px rgba(0,0,0,0.08)',border:'1px solid rgba(0,0,0,0.05)'},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:2,flex:1},children:[/*#__PURE__*/_jsx(Box,{sx:{bgcolor:'primary.main',width:56,height:56,borderRadius:2,display:'flex',alignItems:'center',justifyContent:'center',boxShadow:'0 4px 16px rgba(25, 118, 210, 0.3)'},children:/*#__PURE__*/_jsx(PersonAdd,{sx:{fontSize:28,color:'white'}})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{fontWeight:700,mb:1,background:'linear-gradient(135deg, #1e293b 0%, #334155 100%)',backgroundClip:'text',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent'},children:\"Visual Follow Event Manager\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",sx:{fontSize:'1.1rem'},children:\"Template-based onboarding flow management\"})]})]}),/*#__PURE__*/_jsx(Chip,{label:\"Template-Based\",color:\"primary\",variant:\"outlined\"})]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:3},children:typeof error==='string'?error:'An error occurred'}),success&&/*#__PURE__*/_jsx(Alert,{severity:\"success\",sx:{mb:3},children:typeof success==='string'?success:'Operation completed successfully'}),/*#__PURE__*/_jsxs(Box,{sx:{mb:3,display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\"Onboarding Flows (\",flows.length,\")\"]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:2},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(Template,{}),onClick:()=>setTemplateDialogOpen(true),disabled:loading,children:\"Choose Template\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Add,{}),onClick:()=>handleOpenDialog(),disabled:loading,children:\"Create Custom Flow\"})]})]}),loading&&/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',my:3},children:/*#__PURE__*/_jsx(CircularProgress,{})}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:(flows||[]).map((flow,index)=>{var _flow$onboarding_step,_flow$welcome_message,_flow$welcome_message2,_flow$welcome_message3,_flow$welcome_message4,_flow$user_preference,_flow$user_preference2,_flow$user_preference3;return/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Card,{sx:{background:'white',borderRadius:3,boxShadow:'0 4px 12px rgba(0,0,0,0.08)',border:'1px solid rgba(0,0,0,0.05)',transition:'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)','&:hover':{boxShadow:'0 8px 24px rgba(0,0,0,0.12)',transform:'translateY(-2px)'}},children:/*#__PURE__*/_jsxs(CardContent,{sx:{p:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',mb:2},children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:flow.name||'Unnamed Flow'}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[((_flow$onboarding_step=flow.onboarding_steps)===null||_flow$onboarding_step===void 0?void 0:_flow$onboarding_step.length)||0,\" onboarding steps\"]})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1},children:[/*#__PURE__*/_jsx(Chip,{label:flow.is_active?'Active':'Inactive',color:flow.is_active?'success':'default',size:\"small\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outlined\",onClick:()=>handleTestFlow(flow),children:\"Test Flow\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outlined\",onClick:()=>handleOpenDialog(flow),children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outlined\",color:\"error\",onClick:()=>handleDeleteFlow(flow),children:\"Delete\"})]})]}),/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMore,{}),children:/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",children:\"Flow Details\"})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",gutterBottom:true,children:\"Welcome Message\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:2},children:((_flow$welcome_message=flow.welcome_message)===null||_flow$welcome_message===void 0?void 0:_flow$welcome_message.text)||'No welcome message configured'}),((_flow$welcome_message2=flow.welcome_message)===null||_flow$welcome_message2===void 0?void 0:_flow$welcome_message2.include_quick_replies)&&((_flow$welcome_message3=flow.welcome_message)===null||_flow$welcome_message3===void 0?void 0:_flow$welcome_message3.quick_replies)&&/*#__PURE__*/_jsx(Box,{sx:{display:'flex',gap:1,flexWrap:'wrap'},children:(((_flow$welcome_message4=flow.welcome_message)===null||_flow$welcome_message4===void 0?void 0:_flow$welcome_message4.quick_replies)||[]).map((reply,i)=>/*#__PURE__*/_jsx(Chip,{label:reply,size:\"small\"},i))})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",gutterBottom:true,children:\"User Preferences Collection\"}),/*#__PURE__*/_jsxs(List,{dense:true,children:[/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:(_flow$user_preference=flow.user_preferences)!==null&&_flow$user_preference!==void 0&&_flow$user_preference.collect_language?/*#__PURE__*/_jsx(CheckCircle,{color:\"success\"}):/*#__PURE__*/_jsx(Warning,{color:\"disabled\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Language Preference\"})]}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:(_flow$user_preference2=flow.user_preferences)!==null&&_flow$user_preference2!==void 0&&_flow$user_preference2.collect_timezone?/*#__PURE__*/_jsx(CheckCircle,{color:\"success\"}):/*#__PURE__*/_jsx(Warning,{color:\"disabled\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Timezone\"})]}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:(_flow$user_preference3=flow.user_preferences)!==null&&_flow$user_preference3!==void 0&&_flow$user_preference3.collect_notifications?/*#__PURE__*/_jsx(CheckCircle,{color:\"success\"}):/*#__PURE__*/_jsx(Warning,{color:\"disabled\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Notification Settings\"})]})]})]})]})})]})]})})},(flow===null||flow===void 0?void 0:flow.id)||\"flow-\".concat(index));})}),/*#__PURE__*/_jsxs(Dialog,{open:templateDialogOpen,onClose:()=>setTemplateDialogOpen(false),maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:2},children:[/*#__PURE__*/_jsx(Template,{}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Choose a Template\"})]})}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:3},children:\"Select a pre-built template to get started quickly, or create a custom flow from scratch.\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{sx:{cursor:'pointer',transition:'all 0.2s','&:hover':{transform:'translateY(-2px)',boxShadow:3}},onClick:()=>handleTemplateSelect('basic'),children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:2,mb:2},children:[/*#__PURE__*/_jsx(PersonAdd,{color:\"primary\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Basic Welcome Flow\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:2},children:\"Simple welcome message with basic onboarding\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(Chip,{label:\"Template\",size:\"small\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Chip,{label:\"Ready to Use\",size:\"small\",color:\"success\"})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{sx:{cursor:'pointer',transition:'all 0.2s','&:hover':{transform:'translateY(-2px)',boxShadow:3}},onClick:()=>handleTemplateSelect('medical'),children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:2,mb:2},children:[/*#__PURE__*/_jsx(PersonAdd,{color:\"error\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Medical Onboarding\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:2},children:\"Comprehensive health profile setup\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(Chip,{label:\"Template\",size:\"small\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Chip,{label:\"Health Focused\",size:\"small\",color:\"error\"})]})]})})})]})]}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:()=>setTemplateDialogOpen(false),children:\"Cancel\"})})]}),/*#__PURE__*/_jsxs(Dialog,{open:dialogOpen,onClose:handleCloseDialog,maxWidth:\"xl\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:editingFlow?'Edit Onboarding Flow':'Create New Onboarding Flow'}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1},children:[/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(Preview,{}),onClick:()=>setPreviewMode(!previewMode),children:previewMode?'Edit Mode':'Preview'}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(ContentCopy,{}),onClick:()=>loadTemplate('basic'),children:\"Load Template\"})]})]})}),/*#__PURE__*/_jsx(DialogContent,{sx:{p:0},children:previewMode?/*#__PURE__*/_jsxs(Box,{sx:{p:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Flow Preview\"}),/*#__PURE__*/_jsxs(Paper,{sx:{p:2,mb:2,bgcolor:'grey.50'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"primary\",gutterBottom:true,children:\"Welcome Message:\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:2},children:formData.welcome_message.text}),formData.welcome_message.include_quick_replies&&/*#__PURE__*/_jsx(Box,{sx:{display:'flex',gap:1,flexWrap:'wrap'},children:formData.welcome_message.quick_replies.map((reply,i)=>/*#__PURE__*/_jsx(Chip,{label:reply,size:\"small\",variant:\"outlined\"},i))})]}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"primary\",gutterBottom:true,children:\"Onboarding Steps:\"}),formData.onboarding_steps.map((step,index)=>{var _step$content2;return/*#__PURE__*/_jsxs(Paper,{sx:{p:2,mb:1,bgcolor:'grey.50'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",fontWeight:\"bold\",children:[\"Step \",step.step,\" (\",step.type,\")\"]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:(_step$content2=step.content)===null||_step$content2===void 0?void 0:_step$content2.text}),step.delay_seconds>0&&/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"text.secondary\",children:[\"Delay: \",step.delay_seconds,\"s\"]})]},index);})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Box,{sx:{borderBottom:1,borderColor:'divider'},children:/*#__PURE__*/_jsxs(Tabs,{value:tabValue,onChange:handleTabChange,\"aria-label\":\"flow configuration tabs\",children:[/*#__PURE__*/_jsx(Tab,{icon:/*#__PURE__*/_jsx(Message,{}),label:\"Welcome\"}),/*#__PURE__*/_jsx(Tab,{icon:/*#__PURE__*/_jsx(PlayArrow,{}),label:\"Onboarding\"}),/*#__PURE__*/_jsx(Tab,{icon:/*#__PURE__*/_jsx(Person,{}),label:\"Preferences\"}),/*#__PURE__*/_jsx(Tab,{icon:/*#__PURE__*/_jsx(Gavel,{}),label:\"Consent\"}),/*#__PURE__*/_jsx(Tab,{icon:/*#__PURE__*/_jsx(Settings,{}),label:\"Profile\"})]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:0,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Flow Name\",value:formData.name,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value})),helperText:\"Enter a descriptive name for this onboarding flow\",error:!!validationErrors.name,FormHelperTextProps:{error:!!validationErrors.name}}),validationErrors.name&&/*#__PURE__*/_jsx(FormHelperText,{error:true,children:validationErrors.name})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Welcome Message\",multiline:true,rows:4,value:formData.welcome_message.text,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{welcome_message:_objectSpread(_objectSpread({},prev.welcome_message),{},{text:e.target.value})})),helperText:\"Message sent to new users when they follow the bot\",error:!!validationErrors.welcomeMessage,FormHelperTextProps:{error:!!validationErrors.welcomeMessage}}),validationErrors.welcomeMessage&&/*#__PURE__*/_jsx(FormHelperText,{error:true,children:validationErrors.welcomeMessage})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:formData.welcome_message.include_quick_replies,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{welcome_message:_objectSpread(_objectSpread({},prev.welcome_message),{},{include_quick_replies:e.target.checked})}))}),label:\"Include Quick Reply Buttons\"})}),formData.welcome_message.include_quick_replies&&/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"Quick Reply Buttons\"}),/*#__PURE__*/_jsxs(Stack,{spacing:2,children:[formData.welcome_message.quick_replies.map((reply,index)=>/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1,alignItems:'center'},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,size:\"small\",label:\"Quick Reply \".concat(index+1),value:reply,onChange:e=>updateQuickReply(index,e.target.value),placeholder:\"Enter quick reply text\"}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"error\",onClick:()=>removeQuickReply(index),children:/*#__PURE__*/_jsx(Delete,{})})]},index)),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(Add,{}),onClick:addQuickReply,size:\"small\",children:\"Add Quick Reply\"})]}),validationErrors.quickReplies&&/*#__PURE__*/_jsx(FormHelperText,{error:true,children:validationErrors.quickReplies})]})]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:1,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Onboarding Steps\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(Add,{}),onClick:addOnboardingStep,children:\"Add Step\"})]})}),(formData.onboarding_steps||[]).map((step,index)=>{var _step$content3;return/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[\"Step \",step.step]}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"error\",onClick:()=>removeOnboardingStep(index),children:/*#__PURE__*/_jsx(Delete,{})})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Message Type\"}),/*#__PURE__*/_jsxs(Select,{value:step.type,onChange:e=>updateOnboardingStep(index,'type',e.target.value),label:\"Message Type\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"text\",children:\"Text Message\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"flex\",children:\"Flex Message\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"image\",children:\"Image\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"video\",children:\"Video\"})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Delay (seconds)\",type:\"number\",value:step.delay_seconds,onChange:e=>updateOnboardingStep(index,'delay_seconds',parseInt(e.target.value)||0),inputProps:{min:0},InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:\"sec\"})}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Message Content\",multiline:true,rows:3,value:typeof step.content==='object'&&(_step$content3=step.content)!==null&&_step$content3!==void 0&&_step$content3.text?step.content.text:'',onChange:e=>updateOnboardingStep(index,'content',{text:e.target.value}),error:!!validationErrors[\"step\".concat(index,\"Content\")],helperText:validationErrors[\"step\".concat(index,\"Content\")]||\"Enter the message content for this step\"})})]})]})})},\"step-\".concat(index));}),validationErrors.onboardingSteps&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(FormHelperText,{error:true,children:validationErrors.onboardingSteps})})]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:2,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"User Preferences Collection\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:formData.user_preferences.collect_language,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{user_preferences:_objectSpread(_objectSpread({},prev.user_preferences),{},{collect_language:e.target.checked})}))}),label:\"Collect Language Preference\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:formData.user_preferences.collect_timezone,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{user_preferences:_objectSpread(_objectSpread({},prev.user_preferences),{},{collect_timezone:e.target.checked})}))}),label:\"Collect Timezone\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:formData.user_preferences.collect_notifications,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{user_preferences:_objectSpread(_objectSpread({},prev.user_preferences),{},{collect_notifications:e.target.checked})}))}),label:\"Collect Notification Settings\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:formData.user_preferences.collect_medical_info,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{user_preferences:_objectSpread(_objectSpread({},prev.user_preferences),{},{collect_medical_info:e.target.checked})}))}),label:\"Collect Medical Information\"})})]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:3,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Consent Management\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:2},children:\"Configure consent collection using Legal Document Manager\"})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:formData.consent_management.require_consent,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{consent_management:_objectSpread(_objectSpread({},prev.consent_management),{},{require_consent:e.target.checked})}))}),label:\"Require User Consent\"})}),formData.consent_management.require_consent&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Consent Flow Type\"}),/*#__PURE__*/_jsxs(Select,{value:formData.consent_management.consent_flow_type,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{consent_management:_objectSpread(_objectSpread({},prev.consent_management),{},{consent_flow_type:e.target.value})})),label:\"Consent Flow Type\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"simple\",children:\"Simple (Single Consent)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"detailed\",children:\"Detailed (All Documents)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"step_by_step\",children:\"Step by Step (Progressive)\"})]}),/*#__PURE__*/_jsx(FormHelperText,{children:\"How consent documents will be presented to users\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Required Documents\"}),/*#__PURE__*/_jsx(Select,{multiple:true,value:formData.consent_management.required_documents,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{consent_management:_objectSpread(_objectSpread({},prev.consent_management),{},{required_documents:e.target.value})})),label:\"Required Documents\",renderValue:selected=>/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:0.5},children:selected.map(value=>/*#__PURE__*/_jsx(Chip,{label:value,size:\"small\"},value))}),children:legalDocuments.filter(doc=>doc.is_active).map(doc=>/*#__PURE__*/_jsx(MenuItem,{value:doc.document_type,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:doc.title}),/*#__PURE__*/_jsx(Chip,{label:\"v\".concat(doc.version),size:\"small\",variant:\"outlined\"})]})},doc.document_type))}),/*#__PURE__*/_jsx(FormHelperText,{children:\"Documents that users must consent to (from Legal Document Manager)\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Optional Documents\"}),/*#__PURE__*/_jsx(Select,{multiple:true,value:formData.consent_management.optional_documents,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{consent_management:_objectSpread(_objectSpread({},prev.consent_management),{},{optional_documents:e.target.value})})),label:\"Optional Documents\",renderValue:selected=>/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:0.5},children:selected.map(value=>/*#__PURE__*/_jsx(Chip,{label:value,size:\"small\"},value))}),children:legalDocuments.filter(doc=>doc.is_active).map(doc=>/*#__PURE__*/_jsx(MenuItem,{value:doc.document_type,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:doc.title}),/*#__PURE__*/_jsx(Chip,{label:\"v\".concat(doc.version),size:\"small\",variant:\"outlined\"})]})},doc.document_type))}),/*#__PURE__*/_jsx(FormHelperText,{children:\"Documents that users can optionally consent to\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Consent Text\",multiline:true,rows:3,value:formData.consent_management.consent_text,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{consent_management:_objectSpread(_objectSpread({},prev.consent_management),{},{consent_text:e.target.value})})),helperText:\"Additional consent text shown to users (optional)\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Alert,{severity:\"info\",sx:{mt:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Legal Document Integration:\"}),\" This flow will use documents from the Legal Document Manager. Make sure you have created the required documents in the Legal Documents section.\"]}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outlined\",sx:{mt:1},onClick:()=>window.open('/admin/legal-documents','_blank'),children:\"Open Legal Document Manager\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Consent Flow Preview\"}),/*#__PURE__*/_jsx(Box,{sx:{mb:2},children:/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle2\",color:\"primary\",children:[\"Flow Type: \",formData.consent_management.consent_flow_type.replace('_',' ').toUpperCase()]})}),formData.consent_management.required_documents.length>0&&/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle2\",color:\"error\",gutterBottom:true,children:[\"Required Documents (\",formData.consent_management.required_documents.length,\"):\"]}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:1},children:formData.consent_management.required_documents.map(docType=>{const doc=legalDocuments.find(d=>d.document_type===docType);return/*#__PURE__*/_jsx(Chip,{label:doc?doc.title:docType,color:\"error\",variant:\"outlined\",size:\"small\"},docType);})})]}),formData.consent_management.optional_documents.length>0&&/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle2\",color:\"warning.main\",gutterBottom:true,children:[\"Optional Documents (\",formData.consent_management.optional_documents.length,\"):\"]}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:1},children:formData.consent_management.optional_documents.map(docType=>{const doc=legalDocuments.find(d=>d.document_type===docType);return/*#__PURE__*/_jsx(Chip,{label:doc?doc.title:docType,color:\"warning\",variant:\"outlined\",size:\"small\"},docType);})})]}),formData.consent_management.required_documents.length===0&&formData.consent_management.optional_documents.length===0&&/*#__PURE__*/_jsx(Alert,{severity:\"warning\",children:\"No documents selected. Please select at least one document from the Legal Document Manager.\"})]})})})]})]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:4,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Profile Setup\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:formData.profile_setup.auto_create_profile,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{profile_setup:_objectSpread(_objectSpread({},prev.profile_setup),{},{auto_create_profile:e.target.checked})}))}),label:\"Auto-create User Profile\"})}),formData.profile_setup.auto_create_profile&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"Required Fields\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Required Fields (comma-separated)\",value:formData.profile_setup.required_fields.join(', '),onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{profile_setup:_objectSpread(_objectSpread({},prev.profile_setup),{},{required_fields:e.target.value.split(',').map(f=>f.trim()).filter(f=>f)})})),helperText:\"Fields that must be filled (e.g., name, age, email)\"})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"Optional Fields\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Optional Fields (comma-separated)\",value:formData.profile_setup.optional_fields.join(', '),onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{profile_setup:_objectSpread(_objectSpread({},prev.profile_setup),{},{optional_fields:e.target.value.split(',').map(f=>f.trim()).filter(f=>f)})})),helperText:\"Fields that can be filled later (e.g., preferences, notes)\"})]})]})]})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseDialog,disabled:loading,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSave,variant:\"contained\",disabled:loading||!formData.name,startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):/*#__PURE__*/_jsx(Save,{}),children:loading?'Saving...':'Save Flow'})]})]}),/*#__PURE__*/_jsx(Snackbar,{open:!!success,autoHideDuration:6000,onClose:()=>setSuccess(null),children:/*#__PURE__*/_jsx(Alert,{severity:\"success\",onClose:()=>setSuccess(null),children:typeof success==='string'?success:'Operation completed successfully'})})]});};export default FollowEventManager;","map":{"version":3,"names":["React","useState","Box","Typography","Card","CardContent","Button","Dialog","DialogTitle","DialogContent","DialogActions","TextField","FormControl","InputLabel","Select","MenuItem","Switch","FormControlLabel","Grid","Alert","CircularProgress","Snackbar","Accordion","AccordionSummary","AccordionDetails","List","ListItem","ListItemIcon","ListItemText","Chip","Tabs","Tab","IconButton","Paper","Stack","FormHelperText","InputAdornment","PersonAdd","Add","ExpandMore","CheckCircle","Warning","Delete","ContentCopy","Save","Preview","Settings","Message","Person","Gavel","PlayArrow","ViewModule","Template","getFollowFlows","createFollowFlow","updateFollowFlow","deleteFollowFlow","handleFollowEvent","getLegalDocuments","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TabPanel","props","children","value","index","other","_objectWithoutProperties","_excluded","_objectSpread","role","hidden","id","concat","sx","p","FollowEventManager","templateDialogOpen","setTemplateDialogOpen","flows","setFlows","loading","setLoading","dialogOpen","setDialogOpen","editingFlow","setEditingFlow","tabValue","setTabValue","previewMode","setPreviewMode","validationErrors","setValidationErrors","legalDocuments","setLegalDocuments","useEffect","loadFlows","loadLegalDocuments","response","data","error","_error$response","_error$response$data","console","errorMessage","detail","message","setError","documents","formData","setFormData","name","is_active","welcome_message","text","include_quick_replies","quick_replies","onboarding_steps","step","type","content","delay_seconds","user_preferences","collect_language","collect_timezone","collect_notifications","collect_medical_info","consent_management","require_consent","consent_text","privacy_policy_url","required_documents","optional_documents","consent_flow_type","profile_setup","auto_create_profile","required_fields","optional_fields","success","setSuccess","handleOpenDialog","flow","handleCloseDialog","handleTemplateSelect","templateName","loadTemplate","validateForm","errors","trim","welcomeMessage","length","quickReplies","onboardingSteps","forEach","_step$content","_step$content$text","Object","keys","handleSave","prev","err","_err$response","_err$response$data","handleTestFlow","testData","user_id","flow_id","log","_err$response2","_err$response3","_err$response3$data","handleDeleteFlow","window","confirm","filter","f","_err$response4","_err$response4$data","addOnboardingStep","newStep","removeOnboardingStep","_","i","updateOnboardingStep","field","map","addQuickReply","updateQuickReply","reply","removeQuickReply","templates","handleTabChange","_event","newValue","xs","md","minHeight","background","mb","display","alignItems","gap","borderRadius","boxShadow","border","flex","bgcolor","width","height","justifyContent","fontSize","color","variant","fontWeight","backgroundClip","WebkitBackgroundClip","WebkitTextFillColor","label","severity","startIcon","onClick","disabled","my","container","spacing","_flow$onboarding_step","_flow$welcome_message","_flow$welcome_message2","_flow$welcome_message3","_flow$welcome_message4","_flow$user_preference","_flow$user_preference2","_flow$user_preference3","item","transition","transform","size","expandIcon","gutterBottom","flexWrap","dense","primary","open","onClose","maxWidth","fullWidth","cursor","_step$content2","borderBottom","borderColor","onChange","icon","e","target","helperText","FormHelperTextProps","multiline","rows","control","checked","placeholder","_step$content3","parseInt","inputProps","min","InputProps","endAdornment","position","multiple","renderValue","selected","doc","document_type","title","version","mt","replace","toUpperCase","docType","find","d","join","split","autoHideDuration"],"sources":["/Users/kitkamon/Cursor/evep-my-firstcare-com/admin-panel/src/components/line-bot/FollowEventManager.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Box,\n  Typography,\n  Card,\n  CardContent,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Switch,\n  FormControlLabel,\n  Grid,\n  Alert,\n  CircularProgress,\n  Snackbar,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Chip,\n  Tabs,\n  Tab,\n  IconButton,\n\n  Paper,\n  Stack,\n  FormHelperText,\n  InputAdornment\n} from '@mui/material';\nimport {\n  PersonAdd,\n  Add,\n  ExpandMore,\n  CheckCircle,\n  Warning,\n  Delete,\n  ContentCopy,\n  Save,\n  Preview,\n  Settings,\n  Message,\n  Person,\n  Gavel,\n  PlayArrow,\n  ViewModule as Template\n} from '@mui/icons-material';\nimport { \n  getFollowFlows, \n  createFollowFlow, \n  updateFollowFlow, \n  deleteFollowFlow,\n  handleFollowEvent,\n  getLegalDocuments \n} from '../../api';\n\ninterface LegalDocument {\n  id?: string;\n  document_type: 'privacy_policy' | 'terms_of_use' | 'digital_consent';\n  title: string;\n  content: string;\n  version: string;\n  is_active: boolean;\n  effective_date?: string;\n  created_at?: string;\n  updated_at?: string;\n}\n\ninterface FollowEventFlow {\n  id?: string;\n  name: string;\n  is_active: boolean;\n  welcome_message: {\n    text: string;\n    include_quick_replies: boolean;\n    quick_replies: string[];\n  };\n  onboarding_steps: Array<{\n    step: number;\n    type: 'text' | 'flex' | 'image' | 'video';\n    content: any;\n    delay_seconds: number;\n    conditions?: any;\n  }>;\n  user_preferences: {\n    collect_language: boolean;\n    collect_timezone: boolean;\n    collect_notifications: boolean;\n    collect_medical_info: boolean;\n  };\n  consent_management: {\n    require_consent: boolean;\n    consent_text: string;\n    privacy_policy_url: string;\n    required_documents: string[];\n    optional_documents: string[];\n    consent_flow_type: 'simple' | 'detailed' | 'step_by_step';\n  };\n  profile_setup: {\n    auto_create_profile: boolean;\n    required_fields: string[];\n    optional_fields: string[];\n  };\n}\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`flow-tabpanel-${index}`}\n      aria-labelledby={`flow-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box sx={{ p: 3 }}>\n          {children}\n        </Box>\n      )}\n    </div>\n  );\n}\n\nconst FollowEventManager: React.FC = () => {\n  // Add template functionality\n  const [templateDialogOpen, setTemplateDialogOpen] = useState(false);\n  const [flows, setFlows] = useState<FollowEventFlow[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [editingFlow, setEditingFlow] = useState<FollowEventFlow | null>(null);\n  const [tabValue, setTabValue] = useState(0);\n  const [previewMode, setPreviewMode] = useState(false);\n  const [validationErrors, setValidationErrors] = useState<{[key: string]: string}>({});\n  const [legalDocuments, setLegalDocuments] = useState<LegalDocument[]>([]);\n  \n  // Load flows and legal documents on component mount\n  React.useEffect(() => {\n    loadFlows();\n    loadLegalDocuments();\n  }, []);\n\n  const loadFlows = async () => {\n    try {\n      setLoading(true);\n      const response = await getFollowFlows();\n      setFlows(response.data || []);\n    } catch (error: any) {\n      console.error('Error loading flows:', error);\n      const errorMessage = error.response?.data?.detail || error.message || 'Failed to load follow flows';\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadLegalDocuments = async () => {\n    try {\n      const response = await getLegalDocuments();\n      setLegalDocuments(response.data.documents || []);\n    } catch (error: any) {\n      console.error('Error loading legal documents:', error);\n      // Don't set error state for legal documents as it's not critical\n    }\n  };\n\n  const [formData, setFormData] = useState<FollowEventFlow>({\n    name: '',\n    is_active: true,\n    welcome_message: {\n      text: 'Welcome to DiaCare Buddy! ðŸ‘‹\\n\\nI\\'m here to help you manage your diabetes care. Let\\'s get started with a few quick questions.',\n      include_quick_replies: true,\n      quick_replies: ['Start Setup', 'Learn More', 'Skip Setup']\n    },\n    onboarding_steps: [\n      {\n        step: 1,\n        type: 'text',\n        content: { text: 'What language would you prefer to use?' },\n        delay_seconds: 0\n      },\n      {\n        step: 2,\n        type: 'text',\n        content: { text: 'Would you like to receive notifications about your health?' },\n        delay_seconds: 2\n      }\n    ],\n    user_preferences: {\n      collect_language: true,\n      collect_timezone: true,\n      collect_notifications: true,\n      collect_medical_info: false\n    },\n    consent_management: {\n      require_consent: true,\n      consent_text: 'By using this service, you agree to our privacy policy and terms of service.',\n      privacy_policy_url: '/privacy',\n      required_documents: ['privacy_policy', 'digital_consent'],\n      optional_documents: ['terms_of_use'],\n      consent_flow_type: 'step_by_step'\n    },\n    profile_setup: {\n      auto_create_profile: true,\n      required_fields: ['name', 'age'],\n      optional_fields: ['medical_history', 'preferences']\n    }\n  });\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n\n  const handleOpenDialog = (flow?: FollowEventFlow) => {\n    if (flow) {\n      setEditingFlow(flow);\n      setFormData(flow);\n    } else {\n      setEditingFlow(null);\n      setFormData({\n        name: '',\n        is_active: true,\n        welcome_message: {\n          text: 'Welcome to DiaCare Buddy! ðŸ‘‹\\n\\nI\\'m here to help you manage your diabetes care. Let\\'s get started with a few quick questions.',\n          include_quick_replies: true,\n          quick_replies: ['Start Setup', 'Learn More', 'Skip Setup']\n        },\n        onboarding_steps: [\n          {\n            step: 1,\n            type: 'text',\n            content: { text: 'What language would you prefer to use?' },\n            delay_seconds: 0\n          },\n          {\n            step: 2,\n            type: 'text',\n            content: { text: 'Would you like to receive notifications about your health?' },\n            delay_seconds: 2\n          }\n        ],\n        user_preferences: {\n          collect_language: true,\n          collect_timezone: true,\n          collect_notifications: true,\n          collect_medical_info: false\n        },\n        consent_management: {\n          require_consent: true,\n          consent_text: 'By using this service, you agree to our privacy policy and terms of service.',\n          privacy_policy_url: '/privacy',\n          required_documents: ['privacy_policy', 'digital_consent'],\n          optional_documents: ['terms_of_use'],\n          consent_flow_type: 'step_by_step'\n        },\n        profile_setup: {\n          auto_create_profile: true,\n          required_fields: ['name', 'age'],\n          optional_fields: ['medical_history', 'preferences']\n        }\n      });\n    }\n    setTabValue(0);\n    setPreviewMode(false);\n    setValidationErrors({});\n    setDialogOpen(true);\n  };\n\n  const handleCloseDialog = () => {\n    setDialogOpen(false);\n    setEditingFlow(null);\n    setPreviewMode(false);\n    setValidationErrors({});\n  };\n\n  const handleTemplateSelect = (templateName: string) => {\n    loadTemplate(templateName);\n    setTemplateDialogOpen(false);\n    setDialogOpen(true);\n  };\n\n  const validateForm = (): boolean => {\n    const errors: {[key: string]: string} = {};\n    \n    if (!formData.name.trim()) {\n      errors.name = 'Flow name is required';\n    }\n    \n    if (!formData.welcome_message.text.trim()) {\n      errors.welcomeMessage = 'Welcome message is required';\n    }\n    \n    if (formData.welcome_message.include_quick_replies && formData.welcome_message.quick_replies.length === 0) {\n      errors.quickReplies = 'At least one quick reply is required when quick replies are enabled';\n    }\n    \n    if (formData.onboarding_steps.length === 0) {\n      errors.onboardingSteps = 'At least one onboarding step is required';\n    }\n    \n    formData.onboarding_steps.forEach((step, index) => {\n      if (!step.content?.text?.trim()) {\n        errors[`step${index}Content`] = `Step ${index + 1} content is required`;\n      }\n    });\n    \n    setValidationErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleSave = async () => {\n    if (!validateForm()) {\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      setError(null);\n      \n      if (editingFlow) {\n        // Update existing flow\n        await updateFollowFlow(editingFlow.id!, formData);\n        setSuccess('Follow event flow updated successfully!');\n      } else {\n        // Create new flow\n        const response = await createFollowFlow(formData);\n        setFlows(prev => [response.data, ...prev]);\n        setSuccess('Follow event flow created successfully!');\n      }\n      \n      handleCloseDialog();\n    } catch (err: any) {\n      console.error('Save flow error:', err);\n      const errorMessage = err.response?.data?.detail || err.message || 'Failed to save follow event flow';\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleTestFlow = async (flow: FollowEventFlow) => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const testData = { user_id: 'test_user_123', flow_id: flow.id };\n      console.log('Sending test data:', testData);\n      \n      // Test the flow with a dummy user ID\n      await handleFollowEvent(testData);\n      setSuccess('Follow event flow tested successfully!');\n    } catch (err: any) {\n      console.error('Test flow error:', err);\n      console.error('Error response:', err.response);\n      console.error('Error data:', err.response?.data);\n      const errorMessage = err.response?.data?.detail || err.message || 'Failed to test follow event flow';\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteFlow = async (flow: FollowEventFlow) => {\n    if (!window.confirm(`Are you sure you want to delete the flow \"${flow.name}\"?`)) {\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      setError(null);\n      \n      await deleteFollowFlow(flow.id!);\n      setFlows(prev => prev.filter(f => f.id !== flow.id));\n      setSuccess('Follow event flow deleted successfully!');\n    } catch (err: any) {\n      console.error('Delete flow error:', err);\n      const errorMessage = err.response?.data?.detail || err.message || 'Failed to delete follow event flow';\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const addOnboardingStep = () => {\n    const newStep = {\n      step: formData.onboarding_steps.length + 1,\n      type: 'text' as const,\n      content: { text: '' },\n      delay_seconds: 0\n    };\n    setFormData(prev => ({\n      ...prev,\n      onboarding_steps: [...prev.onboarding_steps, newStep]\n    }));\n  };\n\n  const removeOnboardingStep = (index: number) => {\n    setFormData(prev => ({\n      ...prev,\n      onboarding_steps: prev.onboarding_steps.filter((_, i) => i !== index)\n    }));\n  };\n\n  const updateOnboardingStep = (index: number, field: string, value: any) => {\n    setFormData(prev => ({\n      ...prev,\n      onboarding_steps: prev.onboarding_steps.map((step, i) => \n        i === index ? { ...step, [field]: value } : step\n      )\n    }));\n  };\n\n  const addQuickReply = () => {\n    setFormData(prev => ({\n      ...prev,\n      welcome_message: {\n        ...prev.welcome_message,\n        quick_replies: [...prev.welcome_message.quick_replies, '']\n      }\n    }));\n  };\n\n  const updateQuickReply = (index: number, value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      welcome_message: {\n        ...prev.welcome_message,\n        quick_replies: prev.welcome_message.quick_replies.map((reply, i) => \n          i === index ? value : reply\n        )\n      }\n    }));\n  };\n\n  const removeQuickReply = (index: number) => {\n    setFormData(prev => ({\n      ...prev,\n      welcome_message: {\n        ...prev.welcome_message,\n        quick_replies: prev.welcome_message.quick_replies.filter((_, i) => i !== index)\n      }\n    }));\n  };\n\n  const loadTemplate = (templateName: string) => {\n    const templates: {[key: string]: FollowEventFlow} = {\n      'basic': {\n        name: 'Basic Onboarding',\n        is_active: true,\n        welcome_message: {\n          text: 'Welcome! Let\\'s get you started with a few quick questions.',\n          include_quick_replies: true,\n          quick_replies: ['Start', 'Help', 'Skip']\n        },\n        onboarding_steps: [\n          {\n            step: 1,\n            type: 'text',\n            content: { text: 'What\\'s your name?' },\n            delay_seconds: 0\n          },\n          {\n            step: 2,\n            type: 'text',\n            content: { text: 'How can we help you today?' },\n            delay_seconds: 1\n          }\n        ],\n        user_preferences: {\n          collect_language: true,\n          collect_timezone: true,\n          collect_notifications: false,\n          collect_medical_info: false\n        },\n        consent_management: {\n          require_consent: true,\n          consent_text: 'By continuing, you agree to our terms of service.',\n          privacy_policy_url: '/privacy',\n          required_documents: ['privacy_policy', 'digital_consent'],\n          optional_documents: ['terms_of_use'],\n          consent_flow_type: 'step_by_step'\n        },\n        profile_setup: {\n          auto_create_profile: true,\n          required_fields: ['name'],\n          optional_fields: ['preferences']\n        }\n      },\n      'medical': {\n        name: 'Medical Onboarding',\n        is_active: true,\n        welcome_message: {\n          text: 'Welcome to our health service! We\\'ll help you set up your health profile.',\n          include_quick_replies: true,\n          quick_replies: ['Start Health Setup', 'Learn More', 'Contact Support']\n        },\n        onboarding_steps: [\n          {\n            step: 1,\n            type: 'text',\n            content: { text: 'What\\'s your primary health concern?' },\n            delay_seconds: 0\n          },\n          {\n            step: 2,\n            type: 'text',\n            content: { text: 'Do you have any existing medical conditions?' },\n            delay_seconds: 2\n          },\n          {\n            step: 3,\n            type: 'text',\n            content: { text: 'What medications are you currently taking?' },\n            delay_seconds: 2\n          }\n        ],\n        user_preferences: {\n          collect_language: true,\n          collect_timezone: true,\n          collect_notifications: true,\n          collect_medical_info: true\n        },\n        consent_management: {\n          require_consent: true,\n          consent_text: 'By using this health service, you consent to sharing your health information for medical purposes.',\n          privacy_policy_url: '/health-privacy',\n          required_documents: ['privacy_policy', 'digital_consent'],\n          optional_documents: ['terms_of_use'],\n          consent_flow_type: 'step_by_step'\n        },\n        profile_setup: {\n          auto_create_profile: true,\n          required_fields: ['name', 'age', 'medical_history'],\n          optional_fields: ['emergency_contact', 'preferences']\n        }\n      }\n    };\n\n    if (templates[templateName]) {\n      setFormData(templates[templateName]);\n      setSuccess(`Loaded ${templateName} template`);\n    }\n  };\n\n  const handleTabChange = (_event: React.SyntheticEvent, newValue: number) => {\n    setTabValue(newValue);\n  };\n\n  return (\n    <Box sx={{ \n      p: { xs: 2, md: 4 }, \n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)'\n    }}>\n      {/* Header Section */}\n      <Box sx={{ \n        mb: 4, \n        display: 'flex', \n        alignItems: 'center', \n        gap: 3,\n        background: 'white',\n        p: 3,\n        borderRadius: 3,\n        boxShadow: '0 4px 12px rgba(0,0,0,0.08)',\n        border: '1px solid rgba(0,0,0,0.05)'\n      }}>\n        <Box sx={{ \n          display: 'flex', \n          alignItems: 'center', \n          gap: 2,\n          flex: 1\n        }}>\n          <Box sx={{ \n            bgcolor: 'primary.main', \n            width: 56, \n            height: 56,\n            borderRadius: 2,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            boxShadow: '0 4px 16px rgba(25, 118, 210, 0.3)'\n          }}>\n            <PersonAdd sx={{ fontSize: 28, color: 'white' }} />\n          </Box>\n          <Box>\n            <Typography variant=\"h4\" sx={{ \n              fontWeight: 700, \n              mb: 1,\n              background: 'linear-gradient(135deg, #1e293b 0%, #334155 100%)',\n              backgroundClip: 'text',\n              WebkitBackgroundClip: 'text',\n              WebkitTextFillColor: 'transparent'\n            }}>\n              Visual Follow Event Manager\n            </Typography>\n            <Typography variant=\"body1\" color=\"text.secondary\" sx={{ fontSize: '1.1rem' }}>\n              Template-based onboarding flow management\n            </Typography>\n          </Box>\n        </Box>\n        <Chip label=\"Template-Based\" color=\"primary\" variant=\"outlined\" />\n      </Box>\n\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 3 }}>\n          {typeof error === 'string' ? error : 'An error occurred'}\n        </Alert>\n      )}\n\n      {success && (\n        <Alert severity=\"success\" sx={{ mb: 3 }}>\n          {typeof success === 'string' ? success : 'Operation completed successfully'}\n        </Alert>\n      )}\n\n      <Box sx={{ mb: 3, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n        <Typography variant=\"h6\">\n          Onboarding Flows ({flows.length})\n        </Typography>\n        <Box sx={{ display: 'flex', gap: 2 }}>\n          <Button\n            variant=\"outlined\"\n            startIcon={<Template />}\n            onClick={() => setTemplateDialogOpen(true)}\n            disabled={loading}\n          >\n            Choose Template\n          </Button>\n          <Button\n            variant=\"contained\"\n            startIcon={<Add />}\n            onClick={() => handleOpenDialog()}\n            disabled={loading}\n          >\n            Create Custom Flow\n          </Button>\n        </Box>\n      </Box>\n\n      {loading && (\n        <Box sx={{ display: 'flex', justifyContent: 'center', my: 3 }}>\n          <CircularProgress />\n        </Box>\n      )}\n\n      <Grid container spacing={3}>\n        {(flows || []).map((flow, index) => (\n          <Grid item xs={12} key={flow?.id || `flow-${index}`}>\n            <Card sx={{ \n              background: 'white',\n              borderRadius: 3,\n              boxShadow: '0 4px 12px rgba(0,0,0,0.08)',\n              border: '1px solid rgba(0,0,0,0.05)',\n              transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n              '&:hover': {\n                boxShadow: '0 8px 24px rgba(0,0,0,0.12)',\n                transform: 'translateY(-2px)'\n              }\n            }}>\n              <CardContent sx={{ p: 3 }}>\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', mb: 2 }}>\n                  <Box>\n                    <Typography variant=\"h6\">\n                      {flow.name || 'Unnamed Flow'}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {flow.onboarding_steps?.length || 0} onboarding steps\n                    </Typography>\n                  </Box>\n                  <Box sx={{ display: 'flex', gap: 1 }}>\n                    <Chip\n                      label={flow.is_active ? 'Active' : 'Inactive'}\n                      color={flow.is_active ? 'success' : 'default'}\n                      size=\"small\"\n                    />\n                    <Button\n                      size=\"small\"\n                      variant=\"outlined\"\n                      onClick={() => handleTestFlow(flow)}\n                    >\n                      Test Flow\n                    </Button>\n                    <Button\n                      size=\"small\"\n                      variant=\"outlined\"\n                      onClick={() => handleOpenDialog(flow)}\n                    >\n                      Edit\n                    </Button>\n                    <Button\n                      size=\"small\"\n                      variant=\"outlined\"\n                      color=\"error\"\n                      onClick={() => handleDeleteFlow(flow)}\n                    >\n                      Delete\n                    </Button>\n                  </Box>\n                </Box>\n\n                <Accordion>\n                  <AccordionSummary expandIcon={<ExpandMore />}>\n                    <Typography variant=\"subtitle1\">Flow Details</Typography>\n                  </AccordionSummary>\n                  <AccordionDetails>\n                    <Grid container spacing={2}>\n                      <Grid item xs={12} md={6}>\n                        <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>\n                          Welcome Message\n                        </Typography>\n                        <Typography variant=\"body2\" sx={{ mb: 2 }}>\n                          {flow.welcome_message?.text || 'No welcome message configured'}\n                        </Typography>\n                        {flow.welcome_message?.include_quick_replies && flow.welcome_message?.quick_replies && (\n                          <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>\n                            {(flow.welcome_message?.quick_replies || []).map((reply, i) => (\n                              <Chip key={i} label={reply} size=\"small\" />\n                            ))}\n                          </Box>\n                        )}\n                      </Grid>\n                      \n                      <Grid item xs={12} md={6}>\n                        <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>\n                          User Preferences Collection\n                        </Typography>\n                        <List dense>\n                          <ListItem>\n                            <ListItemIcon>\n                              {flow.user_preferences?.collect_language ? <CheckCircle color=\"success\" /> : <Warning color=\"disabled\" />}\n                            </ListItemIcon>\n                            <ListItemText primary=\"Language Preference\" />\n                          </ListItem>\n                          <ListItem>\n                            <ListItemIcon>\n                              {flow.user_preferences?.collect_timezone ? <CheckCircle color=\"success\" /> : <Warning color=\"disabled\" />}\n                            </ListItemIcon>\n                            <ListItemText primary=\"Timezone\" />\n                          </ListItem>\n                          <ListItem>\n                            <ListItemIcon>\n                              {flow.user_preferences?.collect_notifications ? <CheckCircle color=\"success\" /> : <Warning color=\"disabled\" />}\n                            </ListItemIcon>\n                            <ListItemText primary=\"Notification Settings\" />\n                          </ListItem>\n                        </List>\n                      </Grid>\n                    </Grid>\n                  </AccordionDetails>\n                </Accordion>\n              </CardContent>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n\n      {/* Template Selection Dialog */}\n      <Dialog open={templateDialogOpen} onClose={() => setTemplateDialogOpen(false)} maxWidth=\"md\" fullWidth>\n        <DialogTitle>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n            <Template />\n            <Typography variant=\"h6\">Choose a Template</Typography>\n          </Box>\n        </DialogTitle>\n        <DialogContent>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n            Select a pre-built template to get started quickly, or create a custom flow from scratch.\n          </Typography>\n          <Grid container spacing={3}>\n            <Grid item xs={12} md={6}>\n              <Card \n                sx={{ \n                  cursor: 'pointer',\n                  transition: 'all 0.2s',\n                  '&:hover': {\n                    transform: 'translateY(-2px)',\n                    boxShadow: 3\n                  }\n                }}\n                onClick={() => handleTemplateSelect('basic')}\n              >\n                <CardContent>\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}>\n                    <PersonAdd color=\"primary\" />\n                    <Typography variant=\"h6\">\n                      Basic Welcome Flow\n                    </Typography>\n                  </Box>\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                    Simple welcome message with basic onboarding\n                  </Typography>\n                  <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>\n                    <Chip label=\"Template\" size=\"small\" variant=\"outlined\" />\n                    <Chip label=\"Ready to Use\" size=\"small\" color=\"success\" />\n                  </Box>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <Card \n                sx={{ \n                  cursor: 'pointer',\n                  transition: 'all 0.2s',\n                  '&:hover': {\n                    transform: 'translateY(-2px)',\n                    boxShadow: 3\n                  }\n                }}\n                onClick={() => handleTemplateSelect('medical')}\n              >\n                <CardContent>\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}>\n                    <PersonAdd color=\"error\" />\n                    <Typography variant=\"h6\">\n                      Medical Onboarding\n                    </Typography>\n                  </Box>\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                    Comprehensive health profile setup\n                  </Typography>\n                  <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>\n                    <Chip label=\"Template\" size=\"small\" variant=\"outlined\" />\n                    <Chip label=\"Health Focused\" size=\"small\" color=\"error\" />\n                  </Box>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setTemplateDialogOpen(false)}>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Enhanced Create/Edit Dialog */}\n      <Dialog open={dialogOpen} onClose={handleCloseDialog} maxWidth=\"xl\" fullWidth>\n        <DialogTitle>\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <Typography variant=\"h6\">\n              {editingFlow ? 'Edit Onboarding Flow' : 'Create New Onboarding Flow'}\n            </Typography>\n            <Box sx={{ display: 'flex', gap: 1 }}>\n              <Button\n                size=\"small\"\n                variant=\"outlined\"\n                startIcon={<Preview />}\n                onClick={() => setPreviewMode(!previewMode)}\n              >\n                {previewMode ? 'Edit Mode' : 'Preview'}\n              </Button>\n              <Button\n                size=\"small\"\n                variant=\"outlined\"\n                startIcon={<ContentCopy />}\n                onClick={() => loadTemplate('basic')}\n              >\n                Load Template\n              </Button>\n            </Box>\n          </Box>\n        </DialogTitle>\n        <DialogContent sx={{ p: 0 }}>\n          {previewMode ? (\n            <Box sx={{ p: 3 }}>\n              <Typography variant=\"h6\" gutterBottom>Flow Preview</Typography>\n              <Paper sx={{ p: 2, mb: 2, bgcolor: 'grey.50' }}>\n                <Typography variant=\"subtitle2\" color=\"primary\" gutterBottom>\n                  Welcome Message:\n                </Typography>\n                <Typography variant=\"body2\" sx={{ mb: 2 }}>\n                  {formData.welcome_message.text}\n                </Typography>\n                {formData.welcome_message.include_quick_replies && (\n                  <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>\n                    {formData.welcome_message.quick_replies.map((reply, i) => (\n                      <Chip key={i} label={reply} size=\"small\" variant=\"outlined\" />\n                    ))}\n                  </Box>\n                )}\n              </Paper>\n              \n              <Typography variant=\"subtitle2\" color=\"primary\" gutterBottom>\n                Onboarding Steps:\n              </Typography>\n              {formData.onboarding_steps.map((step, index) => (\n                <Paper key={index} sx={{ p: 2, mb: 1, bgcolor: 'grey.50' }}>\n                  <Typography variant=\"body2\" fontWeight=\"bold\">\n                    Step {step.step} ({step.type})\n                  </Typography>\n                  <Typography variant=\"body2\">\n                    {step.content?.text}\n                  </Typography>\n                  {step.delay_seconds > 0 && (\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      Delay: {step.delay_seconds}s\n                    </Typography>\n                  )}\n                </Paper>\n              ))}\n            </Box>\n          ) : (\n            <>\n              <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n                <Tabs value={tabValue} onChange={handleTabChange} aria-label=\"flow configuration tabs\">\n                  <Tab icon={<Message />} label=\"Welcome\" />\n                  <Tab icon={<PlayArrow />} label=\"Onboarding\" />\n                  <Tab icon={<Person />} label=\"Preferences\" />\n                  <Tab icon={<Gavel />} label=\"Consent\" />\n                  <Tab icon={<Settings />} label=\"Profile\" />\n                </Tabs>\n              </Box>\n\n              <TabPanel value={tabValue} index={0}>\n              <Grid container spacing={3}>\n                <Grid item xs={12}>\n                  <TextField\n                    fullWidth\n                    label=\"Flow Name\"\n                    value={formData.name}\n                    onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                    helperText=\"Enter a descriptive name for this onboarding flow\"\n                    error={!!validationErrors.name}\n                    FormHelperTextProps={{ error: !!validationErrors.name }}\n                  />\n                  {validationErrors.name && (\n                    <FormHelperText error>{validationErrors.name}</FormHelperText>\n                  )}\n                </Grid>\n\n                <Grid item xs={12}>\n                  <TextField\n                    fullWidth\n                    label=\"Welcome Message\"\n                    multiline\n                    rows={4}\n                    value={formData.welcome_message.text}\n                    onChange={(e) => setFormData(prev => ({ \n                      ...prev, \n                      welcome_message: { ...prev.welcome_message, text: e.target.value }\n                    }))}\n                    helperText=\"Message sent to new users when they follow the bot\"\n                    error={!!validationErrors.welcomeMessage}\n                    FormHelperTextProps={{ error: !!validationErrors.welcomeMessage }}\n                  />\n                  {validationErrors.welcomeMessage && (\n                    <FormHelperText error>{validationErrors.welcomeMessage}</FormHelperText>\n                  )}\n                </Grid>\n\n                <Grid item xs={12}>\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        checked={formData.welcome_message.include_quick_replies}\n                        onChange={(e) => setFormData(prev => ({ \n                          ...prev, \n                          welcome_message: { ...prev.welcome_message, include_quick_replies: e.target.checked }\n                        }))}\n                      />\n                    }\n                    label=\"Include Quick Reply Buttons\"\n                  />\n                </Grid>\n\n                {formData.welcome_message.include_quick_replies && (\n                  <Grid item xs={12}>\n                    <Typography variant=\"subtitle2\" gutterBottom>\n                      Quick Reply Buttons\n                    </Typography>\n                    <Stack spacing={2}>\n                      {formData.welcome_message.quick_replies.map((reply, index) => (\n                        <Box key={index} sx={{ display: 'flex', gap: 1, alignItems: 'center' }}>\n                          <TextField\n                            fullWidth\n                            size=\"small\"\n                            label={`Quick Reply ${index + 1}`}\n                            value={reply}\n                            onChange={(e) => updateQuickReply(index, e.target.value)}\n                            placeholder=\"Enter quick reply text\"\n                          />\n                          <IconButton\n                            size=\"small\"\n                            color=\"error\"\n                            onClick={() => removeQuickReply(index)}\n                          >\n                            <Delete />\n                          </IconButton>\n                        </Box>\n                      ))}\n                      <Button\n                        variant=\"outlined\"\n                        startIcon={<Add />}\n                        onClick={addQuickReply}\n                        size=\"small\"\n                      >\n                        Add Quick Reply\n                      </Button>\n                    </Stack>\n                    {validationErrors.quickReplies && (\n                      <FormHelperText error>{validationErrors.quickReplies}</FormHelperText>\n                    )}\n                  </Grid>\n                )}\n              </Grid>\n            </TabPanel>\n\n            <TabPanel value={tabValue} index={1}>\n              <Grid container spacing={3}>\n                <Grid item xs={12}>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                    <Typography variant=\"h6\">Onboarding Steps</Typography>\n                    <Button\n                      variant=\"outlined\"\n                      startIcon={<Add />}\n                      onClick={addOnboardingStep}\n                    >\n                      Add Step\n                    </Button>\n                  </Box>\n                </Grid>\n\n                {(formData.onboarding_steps || []).map((step, index) => (\n                  <Grid item xs={12} key={`step-${index}`}>\n                    <Card variant=\"outlined\">\n                      <CardContent>\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                          <Typography variant=\"subtitle1\">Step {step.step}</Typography>\n                          <IconButton\n                            size=\"small\"\n                            color=\"error\"\n                            onClick={() => removeOnboardingStep(index)}\n                          >\n                            <Delete />\n                          </IconButton>\n                        </Box>\n                        \n                        <Grid container spacing={2}>\n                          <Grid item xs={12} md={6}>\n                            <FormControl fullWidth>\n                              <InputLabel>Message Type</InputLabel>\n                              <Select\n                                value={step.type}\n                                onChange={(e) => updateOnboardingStep(index, 'type', e.target.value)}\n                                label=\"Message Type\"\n                              >\n                                <MenuItem value=\"text\">Text Message</MenuItem>\n                                <MenuItem value=\"flex\">Flex Message</MenuItem>\n                                <MenuItem value=\"image\">Image</MenuItem>\n                                <MenuItem value=\"video\">Video</MenuItem>\n                              </Select>\n                            </FormControl>\n                          </Grid>\n                          \n                          <Grid item xs={12} md={6}>\n                            <TextField\n                              fullWidth\n                              label=\"Delay (seconds)\"\n                              type=\"number\"\n                              value={step.delay_seconds}\n                              onChange={(e) => updateOnboardingStep(index, 'delay_seconds', parseInt(e.target.value) || 0)}\n                              inputProps={{ min: 0 }}\n                              InputProps={{\n                                endAdornment: <InputAdornment position=\"end\">sec</InputAdornment>,\n                              }}\n                            />\n                          </Grid>\n                          \n                          <Grid item xs={12}>\n                            <TextField\n                              fullWidth\n                              label=\"Message Content\"\n                              multiline\n                              rows={3}\n                              value={typeof step.content === 'object' && step.content?.text ? step.content.text : ''}\n                              onChange={(e) => updateOnboardingStep(index, 'content', { text: e.target.value })}\n                              error={!!validationErrors[`step${index}Content`]}\n                              helperText={validationErrors[`step${index}Content`] || \"Enter the message content for this step\"}\n                            />\n                          </Grid>\n                        </Grid>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                ))}\n\n                {validationErrors.onboardingSteps && (\n                  <Grid item xs={12}>\n                    <FormHelperText error>{validationErrors.onboardingSteps}</FormHelperText>\n                  </Grid>\n                )}\n              </Grid>\n            </TabPanel>\n\n            <TabPanel value={tabValue} index={2}>\n              <Grid container spacing={3}>\n                <Grid item xs={12}>\n                  <Typography variant=\"h6\" gutterBottom>User Preferences Collection</Typography>\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        checked={formData.user_preferences.collect_language}\n                        onChange={(e) => setFormData(prev => ({ \n                          ...prev, \n                          user_preferences: { ...prev.user_preferences, collect_language: e.target.checked }\n                        }))}\n                      />\n                    }\n                    label=\"Collect Language Preference\"\n                  />\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        checked={formData.user_preferences.collect_timezone}\n                        onChange={(e) => setFormData(prev => ({ \n                          ...prev, \n                          user_preferences: { ...prev.user_preferences, collect_timezone: e.target.checked }\n                        }))}\n                      />\n                    }\n                    label=\"Collect Timezone\"\n                  />\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        checked={formData.user_preferences.collect_notifications}\n                        onChange={(e) => setFormData(prev => ({ \n                          ...prev, \n                          user_preferences: { ...prev.user_preferences, collect_notifications: e.target.checked }\n                        }))}\n                      />\n                    }\n                    label=\"Collect Notification Settings\"\n                  />\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        checked={formData.user_preferences.collect_medical_info}\n                        onChange={(e) => setFormData(prev => ({ \n                          ...prev, \n                          user_preferences: { ...prev.user_preferences, collect_medical_info: e.target.checked }\n                        }))}\n                      />\n                    }\n                    label=\"Collect Medical Information\"\n                  />\n                </Grid>\n              </Grid>\n            </TabPanel>\n\n            <TabPanel value={tabValue} index={3}>\n              <Grid container spacing={3}>\n                <Grid item xs={12}>\n                  <Typography variant=\"h6\" gutterBottom>Consent Management</Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                    Configure consent collection using Legal Document Manager\n                  </Typography>\n                </Grid>\n\n                <Grid item xs={12}>\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        checked={formData.consent_management.require_consent}\n                        onChange={(e) => setFormData(prev => ({ \n                          ...prev, \n                          consent_management: { ...prev.consent_management, require_consent: e.target.checked }\n                        }))}\n                      />\n                    }\n                    label=\"Require User Consent\"\n                  />\n                </Grid>\n\n                {formData.consent_management.require_consent && (\n                  <>\n                    <Grid item xs={12} md={6}>\n                      <FormControl fullWidth>\n                        <InputLabel>Consent Flow Type</InputLabel>\n                        <Select\n                          value={formData.consent_management.consent_flow_type}\n                          onChange={(e) => setFormData(prev => ({ \n                            ...prev, \n                            consent_management: { ...prev.consent_management, consent_flow_type: e.target.value as 'simple' | 'detailed' | 'step_by_step' }\n                          }))}\n                          label=\"Consent Flow Type\"\n                        >\n                          <MenuItem value=\"simple\">Simple (Single Consent)</MenuItem>\n                          <MenuItem value=\"detailed\">Detailed (All Documents)</MenuItem>\n                          <MenuItem value=\"step_by_step\">Step by Step (Progressive)</MenuItem>\n                        </Select>\n                        <FormHelperText>\n                          How consent documents will be presented to users\n                        </FormHelperText>\n                      </FormControl>\n                    </Grid>\n\n                    <Grid item xs={12} md={6}>\n                      <FormControl fullWidth>\n                        <InputLabel>Required Documents</InputLabel>\n                        <Select\n                          multiple\n                          value={formData.consent_management.required_documents}\n                          onChange={(e) => setFormData(prev => ({ \n                            ...prev, \n                            consent_management: { ...prev.consent_management, required_documents: e.target.value as string[] }\n                          }))}\n                          label=\"Required Documents\"\n                          renderValue={(selected) => (\n                            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                              {selected.map((value) => (\n                                <Chip key={value} label={value} size=\"small\" />\n                              ))}\n                            </Box>\n                          )}\n                        >\n                          {legalDocuments.filter(doc => doc.is_active).map((doc) => (\n                            <MenuItem key={doc.document_type} value={doc.document_type}>\n                              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                                <Typography variant=\"body2\">{doc.title}</Typography>\n                                <Chip label={`v${doc.version}`} size=\"small\" variant=\"outlined\" />\n                              </Box>\n                            </MenuItem>\n                          ))}\n                        </Select>\n                        <FormHelperText>\n                          Documents that users must consent to (from Legal Document Manager)\n                        </FormHelperText>\n                      </FormControl>\n                    </Grid>\n\n                    <Grid item xs={12} md={6}>\n                      <FormControl fullWidth>\n                        <InputLabel>Optional Documents</InputLabel>\n                        <Select\n                          multiple\n                          value={formData.consent_management.optional_documents}\n                          onChange={(e) => setFormData(prev => ({ \n                            ...prev, \n                            consent_management: { ...prev.consent_management, optional_documents: e.target.value as string[] }\n                          }))}\n                          label=\"Optional Documents\"\n                          renderValue={(selected) => (\n                            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                              {selected.map((value) => (\n                                <Chip key={value} label={value} size=\"small\" />\n                              ))}\n                            </Box>\n                          )}\n                        >\n                          {legalDocuments.filter(doc => doc.is_active).map((doc) => (\n                            <MenuItem key={doc.document_type} value={doc.document_type}>\n                              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                                <Typography variant=\"body2\">{doc.title}</Typography>\n                                <Chip label={`v${doc.version}`} size=\"small\" variant=\"outlined\" />\n                              </Box>\n                            </MenuItem>\n                          ))}\n                        </Select>\n                        <FormHelperText>\n                          Documents that users can optionally consent to\n                        </FormHelperText>\n                      </FormControl>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                      <TextField\n                        fullWidth\n                        label=\"Consent Text\"\n                        multiline\n                        rows={3}\n                        value={formData.consent_management.consent_text}\n                        onChange={(e) => setFormData(prev => ({ \n                          ...prev, \n                          consent_management: { ...prev.consent_management, consent_text: e.target.value }\n                        }))}\n                        helperText=\"Additional consent text shown to users (optional)\"\n                      />\n                    </Grid>\n\n                    <Grid item xs={12}>\n                      <Alert severity=\"info\" sx={{ mt: 2 }}>\n                        <Typography variant=\"body2\">\n                          <strong>Legal Document Integration:</strong> This flow will use documents from the Legal Document Manager. \n                          Make sure you have created the required documents in the Legal Documents section.\n                        </Typography>\n                        <Button \n                          size=\"small\" \n                          variant=\"outlined\" \n                          sx={{ mt: 1 }}\n                          onClick={() => window.open('/admin/legal-documents', '_blank')}\n                        >\n                          Open Legal Document Manager\n                        </Button>\n                      </Alert>\n                    </Grid>\n\n                    {/* Consent Flow Preview */}\n                    <Grid item xs={12}>\n                      <Card variant=\"outlined\">\n                        <CardContent>\n                          <Typography variant=\"h6\" gutterBottom>\n                            Consent Flow Preview\n                          </Typography>\n                          <Box sx={{ mb: 2 }}>\n                            <Typography variant=\"subtitle2\" color=\"primary\">\n                              Flow Type: {formData.consent_management.consent_flow_type.replace('_', ' ').toUpperCase()}\n                            </Typography>\n                          </Box>\n                          \n                          {formData.consent_management.required_documents.length > 0 && (\n                            <Box sx={{ mb: 2 }}>\n                              <Typography variant=\"subtitle2\" color=\"error\" gutterBottom>\n                                Required Documents ({formData.consent_management.required_documents.length}):\n                              </Typography>\n                              <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\n                                {formData.consent_management.required_documents.map((docType) => {\n                                  const doc = legalDocuments.find(d => d.document_type === docType);\n                                  return (\n                                    <Chip \n                                      key={docType} \n                                      label={doc ? doc.title : docType} \n                                      color=\"error\" \n                                      variant=\"outlined\"\n                                      size=\"small\"\n                                    />\n                                  );\n                                })}\n                              </Box>\n                            </Box>\n                          )}\n\n                          {formData.consent_management.optional_documents.length > 0 && (\n                            <Box sx={{ mb: 2 }}>\n                              <Typography variant=\"subtitle2\" color=\"warning.main\" gutterBottom>\n                                Optional Documents ({formData.consent_management.optional_documents.length}):\n                              </Typography>\n                              <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\n                                {formData.consent_management.optional_documents.map((docType) => {\n                                  const doc = legalDocuments.find(d => d.document_type === docType);\n                                  return (\n                                    <Chip \n                                      key={docType} \n                                      label={doc ? doc.title : docType} \n                                      color=\"warning\" \n                                      variant=\"outlined\"\n                                      size=\"small\"\n                                    />\n                                  );\n                                })}\n                              </Box>\n                            </Box>\n                          )}\n\n                          {formData.consent_management.required_documents.length === 0 && \n                           formData.consent_management.optional_documents.length === 0 && (\n                            <Alert severity=\"warning\">\n                              No documents selected. Please select at least one document from the Legal Document Manager.\n                            </Alert>\n                          )}\n                        </CardContent>\n                      </Card>\n                    </Grid>\n                  </>\n                )}\n              </Grid>\n            </TabPanel>\n\n            <TabPanel value={tabValue} index={4}>\n              <Grid container spacing={3}>\n                <Grid item xs={12}>\n                  <Typography variant=\"h6\" gutterBottom>Profile Setup</Typography>\n                </Grid>\n\n                <Grid item xs={12}>\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        checked={formData.profile_setup.auto_create_profile}\n                        onChange={(e) => setFormData(prev => ({ \n                          ...prev, \n                          profile_setup: { ...prev.profile_setup, auto_create_profile: e.target.checked }\n                        }))}\n                      />\n                    }\n                    label=\"Auto-create User Profile\"\n                  />\n                </Grid>\n\n                {formData.profile_setup.auto_create_profile && (\n                  <>\n                    <Grid item xs={12} md={6}>\n                      <Typography variant=\"subtitle2\" gutterBottom>Required Fields</Typography>\n                      <TextField\n                        fullWidth\n                        label=\"Required Fields (comma-separated)\"\n                        value={formData.profile_setup.required_fields.join(', ')}\n                        onChange={(e) => setFormData(prev => ({ \n                          ...prev, \n                          profile_setup: { \n                            ...prev.profile_setup, \n                            required_fields: e.target.value.split(',').map(f => f.trim()).filter(f => f)\n                          }\n                        }))}\n                        helperText=\"Fields that must be filled (e.g., name, age, email)\"\n                      />\n                    </Grid>\n\n                    <Grid item xs={12} md={6}>\n                      <Typography variant=\"subtitle2\" gutterBottom>Optional Fields</Typography>\n                      <TextField\n                        fullWidth\n                        label=\"Optional Fields (comma-separated)\"\n                        value={formData.profile_setup.optional_fields.join(', ')}\n                        onChange={(e) => setFormData(prev => ({ \n                          ...prev, \n                          profile_setup: { \n                            ...prev.profile_setup, \n                            optional_fields: e.target.value.split(',').map(f => f.trim()).filter(f => f)\n                          }\n                        }))}\n                        helperText=\"Fields that can be filled later (e.g., preferences, notes)\"\n                      />\n                    </Grid>\n                  </>\n                )}\n              </Grid>\n            </TabPanel>\n          </>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseDialog} disabled={loading}>\n            Cancel\n          </Button>\n          <Button\n            onClick={handleSave}\n            variant=\"contained\"\n            disabled={loading || !formData.name}\n            startIcon={loading ? <CircularProgress size={20} /> : <Save />}\n          >\n            {loading ? 'Saving...' : 'Save Flow'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <Snackbar\n        open={!!success}\n        autoHideDuration={6000}\n        onClose={() => setSuccess(null)}\n      >\n        <Alert severity=\"success\" onClose={() => setSuccess(null)}>\n          {typeof success === 'string' ? success : 'Operation completed successfully'}\n        </Alert>\n      </Snackbar>\n    </Box>\n  );\n};\n\nexport default FollowEventManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}