{"ast":null,"code":"import React from'react';import{Navigate}from'react-router-dom';import{Box,CircularProgress,Typography}from'@mui/material';import{useTheme}from'@mui/material/styles';import{useAdminAuth}from'../../contexts/AdminAuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children}=_ref;const{isAuthenticated,loading,user}=useAdminAuth();const theme=useTheme();console.log('üõ°Ô∏è PROTECTED ROUTE CHECK:');console.log('‚è≥ Loading:',loading);console.log('üîê Is Authenticated:',isAuthenticated);console.log('üë§ User:',user);console.log('üëë User Role:',user===null||user===void 0?void 0:user.role);// Show loading while checking authentication\nif(loading){console.log('‚è≥ Showing loading screen...');return/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",minHeight:\"100vh\",sx:{background:\"linear-gradient(135deg, #F8FAFC 0%, \".concat(theme.palette.background.default,\" 100%)\")},children:[/*#__PURE__*/_jsx(CircularProgress,{size:60,sx:{color:theme.palette.primary.main,mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:theme.palette.primary.main,fontWeight:600,children:\"Loading EVEP Admin Panel...\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:theme.palette.text.secondary,sx:{mt:1},children:\"System Administration & Control Center\"})]});}// Redirect to login if not authenticated\nif(!isAuthenticated){console.log('‚ùå Not authenticated, redirecting to login...');return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// Check if user has admin privileges\nif(user&&user.role!=='admin'&&user.role!=='super_admin'){console.log('‚ùå User does not have admin privileges, showing access denied...');return/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",minHeight:\"100vh\",sx:{background:\"linear-gradient(135deg, #F8FAFC 0%, \".concat(theme.palette.background.default,\" 100%)\")},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:theme.palette.error.main,fontWeight:600,gutterBottom:true,children:\"Access Denied\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:theme.palette.text.secondary,textAlign:\"center\",sx:{maxWidth:400},children:\"You do not have permission to access the EVEP Admin Panel. Admin privileges are required.\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:theme.palette.text.secondary,sx:{mt:2},children:[\"Current role: \",user.role]})]});}// Render children if authenticated and authorized\nconsole.log('‚úÖ User authenticated and authorized, rendering protected content...');return/*#__PURE__*/_jsx(_Fragment,{children:children});};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","Box","CircularProgress","Typography","useTheme","useAdminAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProtectedRoute","_ref","children","isAuthenticated","loading","user","theme","console","log","role","display","flexDirection","alignItems","justifyContent","minHeight","sx","background","concat","palette","default","size","color","primary","main","mb","variant","fontWeight","text","secondary","mt","to","replace","error","gutterBottom","textAlign","maxWidth"],"sources":["/Users/kitkamon/Cursor/evep-my-firstcare-com/admin-panel/src/components/Auth/ProtectedRoute.tsx"],"sourcesContent":["import React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { Box, CircularProgress, Typography } from '@mui/material';\nimport { useTheme } from '@mui/material/styles';\nimport { useAdminAuth } from '../../contexts/AdminAuthContext';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ children }) => {\n  const { isAuthenticated, loading, user } = useAdminAuth();\n  const theme = useTheme();\n\n  console.log('üõ°Ô∏è PROTECTED ROUTE CHECK:');\n  console.log('‚è≥ Loading:', loading);\n  console.log('üîê Is Authenticated:', isAuthenticated);\n  console.log('üë§ User:', user);\n  console.log('üëë User Role:', user?.role);\n\n  // Show loading while checking authentication\n  if (loading) {\n    console.log('‚è≥ Showing loading screen...');\n    return (\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        minHeight=\"100vh\"\n        sx={{ \n          background: `linear-gradient(135deg, #F8FAFC 0%, ${theme.palette.background.default} 100%)`,\n        }}\n      >\n        <CircularProgress size={60} sx={{ color: theme.palette.primary.main, mb: 2 }} />\n        <Typography variant=\"h6\" color={theme.palette.primary.main} fontWeight={600}>\n          Loading EVEP Admin Panel...\n        </Typography>\n        <Typography variant=\"body2\" color={theme.palette.text.secondary} sx={{ mt: 1 }}>\n          System Administration & Control Center\n        </Typography>\n      </Box>\n    );\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    console.log('‚ùå Not authenticated, redirecting to login...');\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  // Check if user has admin privileges\n  if (user && (user.role !== 'admin' && user.role !== 'super_admin')) {\n    console.log('‚ùå User does not have admin privileges, showing access denied...');\n    return (\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        minHeight=\"100vh\"\n        sx={{ \n          background: `linear-gradient(135deg, #F8FAFC 0%, ${theme.palette.background.default} 100%)`,\n        }}\n      >\n        <Typography variant=\"h4\" color={theme.palette.error.main} fontWeight={600} gutterBottom>\n          Access Denied\n        </Typography>\n        <Typography variant=\"body1\" color={theme.palette.text.secondary} textAlign=\"center\" sx={{ maxWidth: 400 }}>\n          You do not have permission to access the EVEP Admin Panel. \n          Admin privileges are required.\n        </Typography>\n        <Typography variant=\"body2\" color={theme.palette.text.secondary} sx={{ mt: 2 }}>\n          Current role: {user.role}\n        </Typography>\n      </Box>\n    );\n  }\n\n  // Render children if authenticated and authorized\n  console.log('‚úÖ User authenticated and authorized, rendering protected content...');\n  return <>{children}</>;\n};\n\nexport default ProtectedRoute;\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}