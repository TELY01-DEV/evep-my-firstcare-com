{"ast":null,"code":"import React from'react';import{Navigate}from'react-router-dom';import{Box,CircularProgress,Typography}from'@mui/material';import{useTheme}from'@mui/material/styles';import{useAdminAuth}from'../../contexts/AdminAuthContext.tsx';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children}=_ref;const{isAuthenticated,loading,user}=useAdminAuth();const theme=useTheme();// Show loading while checking authentication\nif(loading){return/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",minHeight:\"100vh\",sx:{background:\"linear-gradient(135deg, #F8FAFC 0%, \".concat(theme.palette.background.default,\" 100%)\")},children:[/*#__PURE__*/_jsx(CircularProgress,{size:60,sx:{color:theme.palette.primary.main,mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:theme.palette.primary.main,fontWeight:600,children:\"Loading EVEP Admin Panel...\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:theme.palette.text.secondary,sx:{mt:1},children:\"System Administration & Control Center\"})]});}// Redirect to login if not authenticated\nif(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// Check if user has admin privileges\nif(user&&user.role!=='admin'&&user.role!=='super_admin'){return/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",minHeight:\"100vh\",sx:{background:\"linear-gradient(135deg, #F8FAFC 0%, \".concat(theme.palette.background.default,\" 100%)\")},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:theme.palette.error.main,fontWeight:600,gutterBottom:true,children:\"Access Denied\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:theme.palette.text.secondary,textAlign:\"center\",sx:{maxWidth:400},children:\"You do not have permission to access the EVEP Admin Panel. Admin privileges are required.\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:theme.palette.text.secondary,sx:{mt:2},children:[\"Current role: \",user.role]})]});}// Render children if authenticated and authorized\nreturn/*#__PURE__*/_jsx(_Fragment,{children:children});};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","Box","CircularProgress","Typography","useTheme","useAdminAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProtectedRoute","_ref","children","isAuthenticated","loading","user","theme","display","flexDirection","alignItems","justifyContent","minHeight","sx","background","concat","palette","default","size","color","primary","main","mb","variant","fontWeight","text","secondary","mt","to","replace","role","error","gutterBottom","textAlign","maxWidth"],"sources":["/Users/kitkamon/Cursor/evep-my-firstcare-com/admin-panel/src/components/Auth/ProtectedRoute.tsx"],"sourcesContent":["import React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { Box, CircularProgress, Typography } from '@mui/material';\nimport { useTheme } from '@mui/material/styles';\nimport { useAdminAuth } from '../../contexts/AdminAuthContext.tsx';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ children }) => {\n  const { isAuthenticated, loading, user } = useAdminAuth();\n  const theme = useTheme();\n\n  // Show loading while checking authentication\n  if (loading) {\n    return (\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        minHeight=\"100vh\"\n        sx={{ \n          background: `linear-gradient(135deg, #F8FAFC 0%, ${theme.palette.background.default} 100%)`,\n        }}\n      >\n        <CircularProgress size={60} sx={{ color: theme.palette.primary.main, mb: 2 }} />\n        <Typography variant=\"h6\" color={theme.palette.primary.main} fontWeight={600}>\n          Loading EVEP Admin Panel...\n        </Typography>\n        <Typography variant=\"body2\" color={theme.palette.text.secondary} sx={{ mt: 1 }}>\n          System Administration & Control Center\n        </Typography>\n      </Box>\n    );\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  // Check if user has admin privileges\n  if (user && (user.role !== 'admin' && user.role !== 'super_admin')) {\n    return (\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        minHeight=\"100vh\"\n        sx={{ \n          background: `linear-gradient(135deg, #F8FAFC 0%, ${theme.palette.background.default} 100%)`,\n        }}\n      >\n        <Typography variant=\"h4\" color={theme.palette.error.main} fontWeight={600} gutterBottom>\n          Access Denied\n        </Typography>\n        <Typography variant=\"body1\" color={theme.palette.text.secondary} textAlign=\"center\" sx={{ maxWidth: 400 }}>\n          You do not have permission to access the EVEP Admin Panel. \n          Admin privileges are required.\n        </Typography>\n        <Typography variant=\"body2\" color={theme.palette.text.secondary} sx={{ mt: 2 }}>\n          Current role: {user.role}\n        </Typography>\n      </Box>\n    );\n  }\n\n  // Render children if authenticated and authorized\n  return <>{children}</>;\n};\n\nexport default ProtectedRoute;\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}