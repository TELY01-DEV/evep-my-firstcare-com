{"ast":null,"code":"import _objectSpread from\"/Users/kitkamon/Cursor/evep-my-firstcare-com/admin-panel/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import FileUploadDialog from'./FileUploadDialog';import{Box,Button,Dialog,DialogTitle,DialogContent,DialogActions,TextField,Typography,IconButton,Chip,Grid,Card,CardContent,CardActions,FormControl,InputLabel,Select,MenuItem,Tabs,Tab,Alert,Snackbar,CircularProgress,Accordion,AccordionSummary,AccordionDetails,List,ListItem,ListItemText,ListItemIcon,Paper,FormControlLabel,Switch,Tooltip,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,ToggleButton,ToggleButtonGroup}from'@mui/material';import{Add as AddIcon,Edit as EditIcon,Delete as DeleteIcon,Visibility as ViewIcon,Smartphone as SmartphoneIcon,Code as CodeIcon,ViewModule as ViewModuleIcon,ViewCarousel as ViewCarouselIcon,TextFields as TextFieldsIcon,CropSquare as CropSquareIcon,Image as ImageIcon,VideoLibrary as VideoLibraryIcon,EmojiEmotions as EmojiEmotionsIcon,Remove as SeparatorIcon,Dashboard as DashboardIcon,ExpandMore as ExpandMoreIcon,Build as BuildIcon,Category as CategoryIcon,DragIndicator as DragIndicatorIcon,OpenInNew as OpenInNewIcon,TableChart as TableChartIcon}from'@mui/icons-material';import{getAllSystemFlexMessages,createNewSystemFlexMessage,updateSystemFlexMessageById,deleteSystemFlexMessageById,getFlexMessagesByPurpose}from'../api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FlexMessageManager=()=>{const[flexMessages,setFlexMessages]=useState([]);const[loading,setLoading]=useState(false);const[dialogOpen,setDialogOpen]=useState(false);const[previewDialogOpen,setPreviewDialogOpen]=useState(false);const[editingMessage,setEditingMessage]=useState(null);const[previewMessage,setPreviewMessage]=useState(null);const[previewTabValue,setPreviewTabValue]=useState(0);const[snackbar,setSnackbar]=useState({open:false,message:'',severity:'success'});const[designerOpen,setDesignerOpen]=useState(false);const[selectedContainer,setSelectedContainer]=useState('');const[selectedComponents,setSelectedComponents]=useState([]);const[selectedElement,setSelectedElement]=useState(null);const[editingElement,setEditingElement]=useState(null);const[showElementEditor,setShowElementEditor]=useState(false);const[fileUploadDialog,setFileUploadDialog]=useState({open:false,fileType:'image',onSelect:()=>{}});// View mode state\nconst[viewMode,setViewMode]=useState('table');// Flex Message Templates based on LINE documentation\nconst flexTemplates={containers:[{id:'bubble',name:'Bubble Container',description:'A container that displays a single message bubble',icon:/*#__PURE__*/_jsx(ViewModuleIcon,{}),template:{type:'bubble',size:'mega',body:{type:'box',layout:'vertical',contents:[]}}},{id:'carousel',name:'Carousel Container',description:'A container that displays multiple message bubbles, laid out side by side',icon:/*#__PURE__*/_jsx(ViewCarouselIcon,{}),template:{type:'carousel',contents:[]}}],blocks:[{id:'header',name:'Header Block',description:'Block that displays the message subject or header',icon:/*#__PURE__*/_jsx(TextFieldsIcon,{}),template:{type:'box',layout:'vertical',contents:[]}},{id:'hero',name:'Hero Block',description:'Block that displays the main image',icon:/*#__PURE__*/_jsx(ImageIcon,{}),template:{type:'image',url:'https://example.com/hero-image.jpg',size:'full',aspectRatio:'2:1'}},{id:'body',name:'Body Block',description:'Block that displays the main message',icon:/*#__PURE__*/_jsx(CropSquareIcon,{}),template:{type:'box',layout:'vertical',contents:[]}},{id:'footer',name:'Footer Block',description:'Block that displays buttons and supplementary information',icon:/*#__PURE__*/_jsx(CropSquareIcon,{}),template:{type:'box',layout:'vertical',contents:[]}}],components:[{id:'box',type:'box',name:'Box',description:'Defines horizontal or vertical layout orientation and holds components together',icon:/*#__PURE__*/_jsx(CropSquareIcon,{}),category:'layout',template:{type:'box',layout:'vertical',contents:[]}},{id:'text',type:'text',name:'Text',description:'Renders a text string with customizable color, size, and weight',icon:/*#__PURE__*/_jsx(TextFieldsIcon,{}),category:'content',template:{type:'text',text:'Sample text',size:'md',weight:'regular',color:'#000000',wrap:false,lineSpacing:'',maxLines:0,flex:0,margin:'none',position:'relative',offsetTop:'0px',offsetBottom:'0px',offsetStart:'0px',offsetEnd:'0px',align:'start',gravity:'top',adjustMode:'shrink-to-fit',scaling:false,contents:[]}},{id:'span',type:'span',name:'Span',description:'Renders multiple text strings in different styles',icon:/*#__PURE__*/_jsx(TextFieldsIcon,{}),category:'content',template:{type:'span',text:'Sample span',color:'#000000',size:'md',weight:'regular'}},{id:'button',type:'button',name:'Button',description:'Renders a button with three styles: primary, secondary, and link',icon:/*#__PURE__*/_jsx(CropSquareIcon,{}),category:'interactive',template:{type:'button',action:{type:'postback',label:'Button',data:'action=button'},style:'primary',color:'#000000',flex:0,margin:'none',height:'sm',gravity:'top'}},{id:'image',type:'image',name:'Image',description:'Renders an image with customizable size and aspect ratio',icon:/*#__PURE__*/_jsx(ImageIcon,{}),category:'media',template:{type:'image',url:'https://example.com/image.jpg',size:'md',aspectRatio:'1:1'}},{id:'video',type:'video',name:'Video',description:'Renders a video with preview image (requires proper URL and preview)',icon:/*#__PURE__*/_jsx(VideoLibraryIcon,{}),category:'media',template:{type:'video',url:'https://example.com/video.mp4',previewUrl:'https://example.com/preview.jpg',altContent:{type:'box',layout:'vertical',contents:[{type:'text',text:'Video not available',size:'lg',weight:'bold'}]}}},{id:'icon',type:'icon',name:'Icon',description:'Renders an icon with customizable size',icon:/*#__PURE__*/_jsx(EmojiEmotionsIcon,{}),category:'content',template:{type:'icon',url:'https://example.com/icon.png',size:'md'}},{id:'separator',type:'separator',name:'Separator',description:'Renders a separating line inside a box',icon:/*#__PURE__*/_jsx(SeparatorIcon,{}),category:'layout',template:{type:'separator',margin:'md'}},{id:'filler',type:'filler',name:'Filler (Deprecated)',description:'Renders an empty space (deprecated - use spacing properties instead)',icon:/*#__PURE__*/_jsx(CropSquareIcon,{}),category:'layout',template:{type:'filler',flex:1}},{id:'spacer',type:'spacer',name:'Spacer',description:'Adds flexible space between components',icon:/*#__PURE__*/_jsx(CropSquareIcon,{}),category:'layout',template:{type:'spacer',size:'md'}}]};const[formData,setFormData]=useState({name:'',purpose:'liff_message',flex_message:{},alt_text:'',quick_reply:null,tags:[]});// Template selection state\nconst[availableTemplates,setAvailableTemplates]=useState([]);const[selectedTemplate,setSelectedTemplate]=useState(null);const[templateLoading,setTemplateLoading]=useState(false);useEffect(()=>{loadFlexMessages();loadAvailableTemplates();},[]);const loadAvailableTemplates=async()=>{setTemplateLoading(true);try{var _response$data;const response=await getFlexMessagesByPurpose('bot_reply');console.log('ðŸ” API Response:',response.data);console.log('ðŸ” Total messages received:',((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.length)||0);// Filter to show only templates (messages with template_type or specific tags)\nconst templates=(response.data||[]).filter(message=>{// Show messages that have template_type or are marked as templates\nconst isTemplate=message.template_type||message.tags&&message.tags.includes('template')||message.name.includes('Template')||message.name.includes('Full AutoPlay');console.log(\"\\uD83D\\uDD0D Message \\\"\".concat(message.name,\"\\\":\"),{template_type:message.template_type,tags:message.tags,name_has_template:message.name.includes('Template'),name_has_full_autoplay:message.name.includes('Full AutoPlay'),isTemplate});return isTemplate;});console.log('ðŸ” Templates found:',templates.length);console.log('ðŸ” Template names:',templates.map(t=>t.name));setAvailableTemplates(templates);}catch(error){console.error('Error loading templates:',error);}finally{setTemplateLoading(false);}};const handleTemplateSelect=template=>{setSelectedTemplate(template);setFormData({name:template.name,purpose:template.purpose,flex_message:template.flex_message,alt_text:template.alt_text,quick_reply:template.quick_reply,tags:template.tags||[]});};const loadFlexMessages=async()=>{setLoading(true);try{const response=await getAllSystemFlexMessages();setFlexMessages(response.data||[]);}catch(error){console.error('Error loading flex messages:',error);setSnackbar({open:true,message:'Failed to load flex messages',severity:'error'});}finally{setLoading(false);}};const handleCreateNew=()=>{setEditingMessage(null);setSelectedTemplate(null);setFormData({name:'',purpose:'liff_message',flex_message:{},alt_text:'',quick_reply:null,tags:[]});setDialogOpen(true);};const handleEdit=message=>{setEditingMessage(message);setSelectedTemplate(null);// Clear template selection when editing\nsetFormData({name:message.name,purpose:message.purpose,flex_message:message.flex_message,alt_text:message.alt_text,quick_reply:message.quick_reply,tags:message.tags});setDialogOpen(true);};const handleDelete=async id=>{if(window.confirm('Are you sure you want to delete this flex message?')){try{await deleteSystemFlexMessageById(id);setSnackbar({open:true,message:'Flex message deleted successfully',severity:'success'});loadFlexMessages();}catch(error){console.error('Error deleting flex message:',error);setSnackbar({open:true,message:'Failed to delete flex message',severity:'error'});}}};const handleSave=async()=>{try{if(editingMessage){await updateSystemFlexMessageById(editingMessage._id,formData);setSnackbar({open:true,message:'Flex message updated successfully',severity:'success'});}else{await createNewSystemFlexMessage(formData);setSnackbar({open:true,message:'Flex message created successfully',severity:'success'});}setDialogOpen(false);loadFlexMessages();}catch(error){console.error('Error saving flex message:',error);setSnackbar({open:true,message:'Failed to save flex message',severity:'error'});}};const handlePreview=message=>{setPreviewMessage(message);setPreviewDialogOpen(true);setPreviewTabValue(0);};const handleOpenDesigner=()=>{setDesignerOpen(true);// Initialize designer with existing flex message data\nif(formData.flex_message&&Object.keys(formData.flex_message).length>0){// Set selected container based on existing flex message type\nif(formData.flex_message.type==='bubble'){setSelectedContainer('bubble');}else if(formData.flex_message.type==='carousel'){setSelectedContainer('carousel');}// Ensure all elements have unique IDs\nconst updatedFlexMessage=_objectSpread({},formData.flex_message);assignUniqueIdsToStructure(updatedFlexMessage);// Update formData with the structure that has unique IDs\nsetFormData(_objectSpread(_objectSpread({},formData),{},{flex_message:updatedFlexMessage}));// Extract and set selected components from existing structure\nconst allComponents=extractAllComponents(updatedFlexMessage);setSelectedComponents(allComponents);}else{// For new flex messages, reset to default state\nsetSelectedContainer('');setSelectedComponents([]);}};const assignUniqueIdsToStructure=structure=>{if(!structure)return;// Add unique ID to this element if it doesn't have one\nif(!structure.id&&structure.type&&structure.type!=='bubble'&&structure.type!=='carousel'){structure.id=\"\".concat(structure.type,\"_\").concat(Date.now(),\"_\").concat(Math.random().toString(36).substr(2,9));}// Recursively process contents\nif(structure.contents&&Array.isArray(structure.contents)){for(const item of structure.contents){assignUniqueIdsToStructure(item);}}// Recursively process body contents\nif(structure.body&&structure.body.contents&&Array.isArray(structure.body.contents)){for(const item of structure.body.contents){assignUniqueIdsToStructure(item);}}// Recursively process blocks (header, hero, body, footer)\nconst blocks=['header','hero','body','footer'];for(const block of blocks){if(structure[block]){assignUniqueIdsToStructure(structure[block]);}}};const handleCloseDesigner=()=>{setDesignerOpen(false);};const handleSaveDesign=()=>{// Update the form data with the designed flex message\nsetFormData(_objectSpread(_objectSpread({},formData),{},{flex_message:formData.flex_message}));// Close the designer\nsetDesignerOpen(false);// Show success message\nsetSnackbar({open:true,message:'Flex Message design saved successfully!',severity:'success'});};const handleSelectContainer=containerId=>{const container=flexTemplates.containers.find(c=>c.id===containerId);if(container){var _formData$flex_messag;setSelectedContainer(containerId);// Only reset if we're changing container type or if no existing data\nconst currentType=(_formData$flex_messag=formData.flex_message)===null||_formData$flex_messag===void 0?void 0:_formData$flex_messag.type;if(currentType!==containerId||!formData.flex_message||Object.keys(formData.flex_message).length===0){setSelectedComponents([]);// Reset selected components when changing container\nsetFormData(_objectSpread(_objectSpread({},formData),{},{flex_message:container.template}));}}};const handleAddComponent=componentId=>{const component=flexTemplates.components.find(c=>c.id===componentId);if(component){const newComponent=_objectSpread(_objectSpread({},component.template),{},{id:\"\".concat(componentId,\"_\").concat(Date.now(),\"_\").concat(Math.random().toString(36).substr(2,9))});console.log('Adding component:',newComponent);// Add to flex message structure\nconst updatedFlexMessage=_objectSpread({},formData.flex_message);if(updatedFlexMessage.type==='bubble'&&updatedFlexMessage.body){if(!updatedFlexMessage.body.contents){updatedFlexMessage.body.contents=[];}updatedFlexMessage.body.contents.push(newComponent);}else if(updatedFlexMessage.type==='carousel'){if(!updatedFlexMessage.contents){updatedFlexMessage.contents=[];}// For carousel, we need to add to the first bubble or create one\nif(updatedFlexMessage.contents.length===0){updatedFlexMessage.contents.push({type:'bubble',body:{type:'box',layout:'vertical',contents:[newComponent]}});}else{if(!updatedFlexMessage.contents[0].body.contents){updatedFlexMessage.contents[0].body.contents=[];}updatedFlexMessage.contents[0].body.contents.push(newComponent);}}// Update selected components to match the structure\nconst allComponents=extractAllComponents(updatedFlexMessage);setSelectedComponents(allComponents);setFormData(_objectSpread(_objectSpread({},formData),{},{flex_message:updatedFlexMessage}));}};const handleAddBlock=blockId=>{const block=flexTemplates.blocks.find(b=>b.id===blockId);if(block){const newBlock=_objectSpread(_objectSpread({},block.template),{},{id:\"\".concat(blockId,\"_\").concat(Date.now(),\"_\").concat(Math.random().toString(36).substr(2,9))});// Add block to bubble container\nconst updatedFlexMessage=_objectSpread({},formData.flex_message);if(updatedFlexMessage.type==='bubble'){// Add the block directly to the bubble\nupdatedFlexMessage[blockId]=newBlock;}// Update selected components to match the structure\nconst allComponents=extractAllComponents(updatedFlexMessage);setSelectedComponents(allComponents);setFormData(_objectSpread(_objectSpread({},formData),{},{flex_message:updatedFlexMessage}));}};const extractAllComponents=structure=>{const components=[];if(!structure)return components;// Helper function to add ID to component if missing\nconst addIdIfMissing=(component,index)=>{if(!component.id&&component.type!=='bubble'&&component.type!=='carousel'){component.id=\"\".concat(component.type,\"_\").concat(Date.now(),\"_\").concat(Math.random().toString(36).substr(2,9),\"_\").concat(index);}return component;};if(structure.type!=='bubble'&&structure.type!=='carousel'){components.push(addIdIfMissing(structure,components.length));}if(structure.contents&&Array.isArray(structure.contents)){for(let i=0;i<structure.contents.length;i++){const item=structure.contents[i];components.push(...extractAllComponents(item));}}if(structure.body&&structure.body.contents&&Array.isArray(structure.body.contents)){for(let i=0;i<structure.body.contents.length;i++){const item=structure.body.contents[i];components.push(...extractAllComponents(item));}}// Also check for blocks (header, hero, body, footer)\nconst blocks=['header','hero','body','footer'];for(const block of blocks){if(structure[block]){components.push(...extractAllComponents(structure[block]));}}return components;};const handleRemoveComponent=componentId=>{var _updatedFlexMessage$c,_updatedFlexMessage$c2;// Remove from flex message structure\nconst updatedFlexMessage=_objectSpread({},formData.flex_message);if(updatedFlexMessage.type==='bubble'&&updatedFlexMessage.body){var _updatedFlexMessage$b;updatedFlexMessage.body.contents=((_updatedFlexMessage$b=updatedFlexMessage.body.contents)===null||_updatedFlexMessage$b===void 0?void 0:_updatedFlexMessage$b.filter(c=>c.id!==componentId))||[];}else if(updatedFlexMessage.type==='carousel'&&(_updatedFlexMessage$c=updatedFlexMessage.contents)!==null&&_updatedFlexMessage$c!==void 0&&(_updatedFlexMessage$c2=_updatedFlexMessage$c[0])!==null&&_updatedFlexMessage$c2!==void 0&&_updatedFlexMessage$c2.body){var _updatedFlexMessage$c3;updatedFlexMessage.contents[0].body.contents=((_updatedFlexMessage$c3=updatedFlexMessage.contents[0].body.contents)===null||_updatedFlexMessage$c3===void 0?void 0:_updatedFlexMessage$c3.filter(c=>c.id!==componentId))||[];}// Update selected components to match the structure\nconst allComponents=extractAllComponents(updatedFlexMessage);setSelectedComponents(allComponents);setFormData(_objectSpread(_objectSpread({},formData),{},{flex_message:updatedFlexMessage}));};const handleSelectElement=elementId=>{console.log('Selecting element:',elementId);setSelectedElement(elementId);// Find the element in the structure\nconst element=findElementById(formData.flex_message,elementId);console.log('Found element:',element);if(element){setEditingElement(element);setShowElementEditor(true);}else{console.log('Element not found for ID:',elementId);}};const findElementById=(structure,elementId)=>{if(!structure)return null;if(structure.id===elementId)return structure;if(structure.contents&&Array.isArray(structure.contents)){for(const item of structure.contents){const found=findElementById(item,elementId);if(found)return found;}}if(structure.body&&structure.body.contents&&Array.isArray(structure.body.contents)){for(const item of structure.body.contents){const found=findElementById(item,elementId);if(found)return found;}}// Check for blocks (header, hero, body, footer)\nconst blocks=['header','hero','body','footer'];for(const block of blocks){if(structure[block]){const found=findElementById(structure[block],elementId);if(found)return found;}}return null;};const handleUpdateElement=(elementId,updates)=>{const newFlexMessage=_objectSpread({},formData.flex_message);updateElementInStructure(newFlexMessage,elementId,updates);// Update selected components to match the structure\nconst allComponents=extractAllComponents(newFlexMessage);setSelectedComponents(allComponents);setFormData(_objectSpread(_objectSpread({},formData),{},{flex_message:newFlexMessage}));setShowElementEditor(false);setEditingElement(null);setSelectedElement(null);};const updateElementInStructure=(structure,elementId,updates)=>{if(!structure)return false;if(structure.id===elementId){Object.assign(structure,updates);return true;}if(structure.contents&&Array.isArray(structure.contents)){for(const item of structure.contents){if(updateElementInStructure(item,elementId,updates)){return true;}}}if(structure.body&&structure.body.contents&&Array.isArray(structure.body.contents)){for(const item of structure.body.contents){if(updateElementInStructure(item,elementId,updates)){return true;}}}// Check for blocks (header, hero, body, footer)\nconst blocks=['header','hero','body','footer'];for(const block of blocks){if(structure[block]){if(updateElementInStructure(structure[block],elementId,updates)){return true;}}}return false;};const handleDeleteElement=elementId=>{const newFlexMessage=_objectSpread({},formData.flex_message);removeElementFromStructure(newFlexMessage,elementId);// Update selected components to match the structure\nconst allComponents=extractAllComponents(newFlexMessage);setSelectedComponents(allComponents);setFormData(_objectSpread(_objectSpread({},formData),{},{flex_message:newFlexMessage}));setShowElementEditor(false);setEditingElement(null);};const removeElementFromStructure=(structure,elementId)=>{if(!structure)return false;if(structure.contents&&Array.isArray(structure.contents)){const index=structure.contents.findIndex(item=>item.id===elementId);if(index!==-1){structure.contents.splice(index,1);return true;}for(const item of structure.contents){if(removeElementFromStructure(item,elementId)){return true;}}}if(structure.body&&structure.body.contents&&Array.isArray(structure.body.contents)){const index=structure.body.contents.findIndex(item=>item.id===elementId);if(index!==-1){structure.body.contents.splice(index,1);return true;}for(const item of structure.body.contents){if(removeElementFromStructure(item,elementId)){return true;}}}// Check for blocks (header, hero, body, footer)\nconst blocks=['header','hero','body','footer'];for(const block of blocks){if(structure[block]){if(removeElementFromStructure(structure[block],elementId)){return true;}}}return false;};const getTextSize=size=>{switch(size){case'xs':return'0.75rem';case'sm':return'0.875rem';case'md':return'1rem';case'lg':return'1.125rem';case'xl':return'1.25rem';case'xxl':return'1.5rem';case'3xl':return'1.875rem';default:return'1rem';}};const getImageSize=size=>{switch(size){case'xs':return'40px';case'sm':return'50px';case'md':return'60px';case'lg':return'80px';case'xl':return'100px';case'xxl':return'120px';case'3xl':return'150px';case'full':return'100%';default:return'60px';}};const getBubbleSize=size=>{switch(size){case'nano':return'200px';case'micro':return'250px';case'deca':return'300px';case'hecto':return'350px';case'kilo':return'400px';case'mega':return'450px';case'giga':return'500px';default:return'450px';}};const VisualFlexMessagePreview=_ref=>{let{flexMessage,onElementClick,selectedElementId}=_ref;const renderFlexContent=function(content){var _content$action,_content$action2,_content$action3,_content$action4,_content$action5,_content$action6,_content$action7,_content$action8,_content$action9,_content$action0,_content$action1,_content$action10,_content$action11,_content$action12,_content$action13,_content$action14,_content$action15;let depth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!content)return null;const commonStyles={border:content.id===selectedElementId?'2px solid #1976d2':'1px solid #e0e0e0',borderRadius:'8px',padding:'8px',margin:'4px 0',backgroundColor:content.id===selectedElementId?'#e3f2fd':'#fafafa',fontSize:'12px',fontFamily:'monospace',cursor:onElementClick?'pointer':'default',transition:'all 0.2s ease','&:hover':onElementClick?{backgroundColor:'#f0f0f0',borderColor:'#1976d2'}:{}};const containerStyles=_objectSpread(_objectSpread({},commonStyles),{},{backgroundColor:depth===0?'#e3f2fd':'#f5f5f5',borderColor:depth===0?'#2196f3':'#e0e0e0'});switch(content.type){case'bubble':return/*#__PURE__*/_jsxs(Box,{sx:containerStyles,children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:'#666',display:'block',mb:1},children:\"\\uD83D\\uDCE6 Bubble Container\"}),content.header&&/*#__PURE__*/_jsxs(Box,{sx:{mb:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:'#666'},children:\"Header:\"}),renderFlexContent(content.header,depth+1)]}),content.body&&/*#__PURE__*/_jsxs(Box,{sx:{mb:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:'#666'},children:\"Body:\"}),renderFlexContent(content.body,depth+1)]}),content.footer&&/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:'#666'},children:\"Footer:\"}),renderFlexContent(content.footer,depth+1)]})]});case'box':return/*#__PURE__*/_jsxs(Box,{sx:containerStyles,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{color:'#666',display:'block',mb:1},children:[\"\\uD83D\\uDCE6 Box (\",content.layout||'vertical',\")\"]}),content.contents&&Array.isArray(content.contents)&&/*#__PURE__*/_jsx(Box,{sx:{pl:1},children:content.contents.map((item,index)=>/*#__PURE__*/_jsx(Box,{sx:{mb:0.5},children:renderFlexContent(item,depth+1)},index))})]});case'text':console.log('Text preview - content:',content);console.log('Text preview - content.text:',content.text);return/*#__PURE__*/_jsxs(Box,{sx:commonStyles,onClick:()=>onElementClick&&content.id&&onElementClick(content.id),children:[/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{color:'#666',display:'block',mb:0.5},children:[\"\\uD83D\\uDCDD Text (\",content.size||'md',\")\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{fontWeight:content.weight==='bold'?'bold':'normal',fontSize:getTextSize(content.size),color:content.color||'#000',textAlign:content.align||'start',whiteSpace:content.wrap?'pre-wrap':'nowrap',overflow:content.wrap?'visible':'hidden',textOverflow:content.wrap?'clip':'ellipsis',lineHeight:content.lineSpacing||'normal',maxHeight:content.maxLines?\"\".concat(content.maxLines*1.2,\"em\"):'none',position:content.position||'relative',top:content.position==='absolute'?content.offsetTop:'auto',bottom:content.position==='absolute'?content.offsetBottom:'auto',left:content.position==='absolute'?content.offsetStart:'auto',right:content.position==='absolute'?content.offsetEnd:'auto',flex:content.flex||0,margin:content.margin==='none'?0:content.margin==='xs'?'4px':content.margin==='sm'?'8px':content.margin==='md'?'12px':content.margin==='lg'?'16px':content.margin==='xl'?'20px':content.margin==='xxl'?'24px':0},children:[content.text||'Sample text',\" \"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{color:'#999',display:'block',mt:0.5},children:[content.wrap&&'Wrapped',\" \",content.maxLines>0&&\"\".concat(content.maxLines,\" lines max\"),content.position==='absolute'&&' (Absolute)',\" \",content.flex>0&&\"Flex: \".concat(content.flex)]})]});case'button':return/*#__PURE__*/_jsxs(Box,{sx:commonStyles,onClick:()=>onElementClick&&content.id&&onElementClick(content.id),children:[/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{color:'#666',display:'block',mb:0.5},children:[\"\\uD83D\\uDD18 Button (\",((_content$action=content.action)===null||_content$action===void 0?void 0:_content$action.type)||'postback',\")\"]}),/*#__PURE__*/_jsx(Button,{variant:content.style==='primary'?'contained':'outlined',size:\"small\",sx:{fontSize:'0.75rem',minWidth:'80px',bgcolor:content.color||undefined,height:content.height==='md'?'40px':'32px'},children:((_content$action2=content.action)===null||_content$action2===void 0?void 0:_content$action2.label)||'Button'}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{color:'#999',display:'block',mt:0.5},children:[((_content$action3=content.action)===null||_content$action3===void 0?void 0:_content$action3.type)==='postback'&&\"Data: \".concat((_content$action4=content.action)===null||_content$action4===void 0?void 0:_content$action4.data),((_content$action5=content.action)===null||_content$action5===void 0?void 0:_content$action5.type)==='message'&&\"Text: \".concat((_content$action6=content.action)===null||_content$action6===void 0?void 0:_content$action6.text),((_content$action7=content.action)===null||_content$action7===void 0?void 0:_content$action7.type)==='uri'&&\"URL: \".concat((_content$action8=content.action)===null||_content$action8===void 0?void 0:_content$action8.uri),((_content$action9=content.action)===null||_content$action9===void 0?void 0:_content$action9.type)==='datetimepicker'&&\"Mode: \".concat((_content$action0=content.action)===null||_content$action0===void 0?void 0:_content$action0.mode),((_content$action1=content.action)===null||_content$action1===void 0?void 0:_content$action1.type)==='camera'&&'Camera Action',((_content$action10=content.action)===null||_content$action10===void 0?void 0:_content$action10.type)==='cameraRoll'&&'Camera Roll Action',((_content$action11=content.action)===null||_content$action11===void 0?void 0:_content$action11.type)==='location'&&'Location Action',((_content$action12=content.action)===null||_content$action12===void 0?void 0:_content$action12.type)==='richmenuswitch'&&\"Menu: \".concat((_content$action13=content.action)===null||_content$action13===void 0?void 0:_content$action13.richMenuAliasId),((_content$action14=content.action)===null||_content$action14===void 0?void 0:_content$action14.type)==='clipboard'&&\"Copy: \".concat((_content$action15=content.action)===null||_content$action15===void 0?void 0:_content$action15.text)]})]});case'image':return/*#__PURE__*/_jsxs(Box,{sx:commonStyles,onClick:()=>onElementClick&&content.id&&onElementClick(content.id),children:[/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{color:'#666',display:'block',mb:0.5},children:[\"\\uD83D\\uDDBC\\uFE0F Image (\",content.size||'md',\")\"]}),/*#__PURE__*/_jsx(Box,{sx:{width:getImageSize(content.size),height:getImageSize(content.size),bgcolor:'#e0e0e0',borderRadius:'4px',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'0.75rem',color:'#666',aspectRatio:content.aspectRatio||'1:1'},children:\"IMAGE\"})]});case'icon':return/*#__PURE__*/_jsxs(Box,{sx:commonStyles,onClick:()=>onElementClick&&content.id&&onElementClick(content.id),children:[/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{color:'#666',display:'block',mb:0.5},children:[\"\\uD83D\\uDE0A Icon (\",content.size||'md',\")\"]}),/*#__PURE__*/_jsx(Box,{sx:{width:getImageSize(content.size),height:getImageSize(content.size),bgcolor:'#e0e0e0',borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',fontSize:getTextSize(content.size)},children:\"\\uD83D\\uDE0A\"})]});case'video':return/*#__PURE__*/_jsxs(Box,{sx:commonStyles,onClick:()=>onElementClick&&content.id&&onElementClick(content.id),children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:'#666',display:'block',mb:0.5},children:\"\\uD83C\\uDFA5 Video\"}),/*#__PURE__*/_jsx(Box,{sx:{width:'200px',height:'120px',bgcolor:'#e0e0e0',borderRadius:'4px',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'0.75rem',color:'#666',position:'relative'},children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{fontSize:'2rem',mb:1},children:\"\\uD83C\\uDFA5\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",children:\"Video Content\"})]})}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{color:'#999',display:'block',mt:0.5},children:[\"URL: \",content.url||'Not set',\" | Preview: \",content.previewUrl||'Not set']})]});case'separator':return/*#__PURE__*/_jsxs(Box,{sx:commonStyles,onClick:()=>onElementClick&&content.id&&onElementClick(content.id),children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:'#666',display:'block',mb:0.5},children:\"\\u2796 Separator\"}),/*#__PURE__*/_jsx(Box,{sx:{height:'1px',bgcolor:'#e0e0e0',width:'100%',my:1}})]});case'spacer':return/*#__PURE__*/_jsxs(Box,{sx:commonStyles,onClick:()=>onElementClick&&content.id&&onElementClick(content.id),children:[/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{color:'#666',display:'block',mb:0.5},children:[\"\\uD83D\\uDCCF Spacer (\",content.size||'md',\")\"]}),/*#__PURE__*/_jsx(Box,{sx:{height:content.size==='xs'?'4px':content.size==='sm'?'8px':content.size==='md'?'12px':content.size==='lg'?'16px':content.size==='xl'?'20px':content.size==='xxl'?'24px':'12px',bgcolor:'#f0f0f0',width:'100%',border:'1px dashed #ccc'}})]});case'filler':return/*#__PURE__*/_jsxs(Box,{sx:commonStyles,onClick:()=>onElementClick&&content.id&&onElementClick(content.id),children:[/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{color:'#666',display:'block',mb:0.5},children:[\"\\u2B1C Filler (Deprecated) - Flex: \",content.flex||1]}),/*#__PURE__*/_jsx(Box,{sx:{height:'20px',bgcolor:'#fff3cd',width:'100%',border:'1px dashed #ffc107',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'0.75rem',color:'#856404'},children:\"FILLER\"})]});default:return/*#__PURE__*/_jsx(Box,{sx:commonStyles,children:/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{color:'#666'},children:[\"Unknown: \",content.type]})});}};return/*#__PURE__*/_jsxs(Box,{sx:{p:2,bgcolor:'#f8f9fa',borderRadius:1,border:'1px solid #e0e0e0'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle2\",gutterBottom:true,sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(SmartphoneIcon,{}),\"Visual Preview\"]}),/*#__PURE__*/_jsx(Box,{sx:{maxHeight:400,overflow:'auto'},children:(flexMessage===null||flexMessage===void 0?void 0:flexMessage.type)==='bubble'?/*#__PURE__*/_jsxs(Box,{sx:{border:'1px solid #ccc',borderRadius:2,p:2,bgcolor:'white',maxWidth:getBubbleSize(flexMessage.size)},children:[flexMessage.header&&renderFlexContent(flexMessage.header),flexMessage.hero&&renderFlexContent(flexMessage.hero),flexMessage.body&&renderFlexContent(flexMessage.body),flexMessage.footer&&renderFlexContent(flexMessage.footer)]}):flexMessage!==null&&flexMessage!==void 0&&flexMessage.contents?renderFlexContent(flexMessage.contents):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"No flex message content to preview\"})})]});};// Element Editor Component\nconst ElementEditor=_ref2=>{let{element,onUpdate,onDelete,onClose}=_ref2;const[formData,setFormData]=useState({});const[initialized,setInitialized]=useState(false);// Initialize formData only once when element is first set\nuseEffect(()=>{console.log('ElementEditor received element:',element);if(element&&!initialized){const newFormData=_objectSpread({},element);console.log('Setting formData to:',newFormData);setFormData(newFormData);setInitialized(true);}},[element,initialized]);// Reset initialized state when element changes (for different elements)\nuseEffect(()=>{if(element&&initialized){// Check if this is a different element (different ID)\nif(formData.id!==element.id){console.log('Different element detected, resetting formData');setFormData(_objectSpread({},element));}}},[element===null||element===void 0?void 0:element.id,initialized,formData.id]);const handleSave=()=>{onUpdate(formData);};const renderTextEditor=()=>/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Text Content\",value:(formData.text!==undefined?formData:element).text||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{text:e.target.value})),margin:\"normal\",multiline:true,rows:3}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Size\"}),/*#__PURE__*/_jsxs(Select,{value:formData.size||'md',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{size:e.target.value})),label:\"Size\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"xs\",children:\"Extra Small (xs)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"sm\",children:\"Small (sm)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"md\",children:\"Medium (md)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"lg\",children:\"Large (lg)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"xl\",children:\"Extra Large (xl)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"xxl\",children:\"2X Large (xxl)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"3xl\",children:\"3X Large (3xl)\"})]})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Weight\"}),/*#__PURE__*/_jsxs(Select,{value:formData.weight||'regular',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{weight:e.target.value})),label:\"Weight\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"regular\",children:\"Regular\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"bold\",children:\"Bold\"})]})]}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Color\",value:formData.color||'#000000',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{color:e.target.value})),margin:\"normal\",type:\"color\"}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Alignment\"}),/*#__PURE__*/_jsxs(Select,{value:formData.align||'start',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{align:e.target.value})),label:\"Alignment\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"start\",children:\"Start\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"end\",children:\"End\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"center\",children:\"Center\"})]})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Gravity\"}),/*#__PURE__*/_jsxs(Select,{value:formData.gravity||'top',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{gravity:e.target.value})),label:\"Gravity\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"top\",children:\"Top\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"bottom\",children:\"Bottom\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"center\",children:\"Center\"})]})]}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:formData.wrap||false,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{wrap:e.target.checked}))}),label:\"Text Wrapping\"}),formData.wrap&&/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Line Spacing (e.g., 20px)\",value:formData.lineSpacing||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{lineSpacing:e.target.value})),margin:\"normal\",helperText:\"Line spacing for wrapped text (e.g., 20px)\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Max Lines\",value:formData.maxLines||0,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{maxLines:parseInt(e.target.value)||0})),margin:\"normal\",type:\"number\",inputProps:{min:0},helperText:\"0 = no limit, 1+ = maximum lines to show\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Flex\",value:formData.flex||0,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{flex:parseInt(e.target.value)||0})),margin:\"normal\",type:\"number\",inputProps:{min:0,max:10},helperText:\"Flex ratio (0-10)\"}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Margin\"}),/*#__PURE__*/_jsxs(Select,{value:formData.margin||'none',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{margin:e.target.value})),label:\"Margin\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"none\",children:\"None\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"xs\",children:\"Extra Small\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"sm\",children:\"Small\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"md\",children:\"Medium\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"lg\",children:\"Large\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"xl\",children:\"Extra Large\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"xxl\",children:\"2X Large\"})]})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Position\"}),/*#__PURE__*/_jsxs(Select,{value:formData.position||'relative',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{position:e.target.value})),label:\"Position\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"relative\",children:\"Relative\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"absolute\",children:\"Absolute\"})]})]}),formData.position==='absolute'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Offset Top (e.g., 0px, 10px)\",value:formData.offsetTop||'0px',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{offsetTop:e.target.value})),margin:\"normal\",helperText:\"Distance from top\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Offset Bottom (e.g., 0px, 10px)\",value:formData.offsetBottom||'0px',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{offsetBottom:e.target.value})),margin:\"normal\",helperText:\"Distance from bottom\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Offset Start (e.g., 0px, 10px)\",value:formData.offsetStart||'0px',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{offsetStart:e.target.value})),margin:\"normal\",helperText:\"Distance from start\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Offset End (e.g., 0px, 10px)\",value:formData.offsetEnd||'0px',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{offsetEnd:e.target.value})),margin:\"normal\",helperText:\"Distance from end\"})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Adjust Mode\"}),/*#__PURE__*/_jsxs(Select,{value:formData.adjustMode||'shrink-to-fit',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{adjustMode:e.target.value})),label:\"Adjust Mode\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"shrink-to-fit\",children:\"Shrink to Fit\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"none\",children:\"None\"})]})]}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:formData.scaling||false,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{scaling:e.target.checked}))}),label:\"Text Scaling\"})]});const renderButtonEditor=()=>{var _formData$action,_formData$action2,_formData$action17,_formData$action18,_formData$action19,_formData$action20,_formData$action21,_formData$action22,_formData$action23,_formData$action24,_formData$action25,_formData$action26,_formData$action27,_formData$action28,_formData$action29,_formData$action30;return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Button Label\",value:((_formData$action=formData.action)===null||_formData$action===void 0?void 0:_formData$action.label)||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{action:_objectSpread(_objectSpread({},formData.action),{},{label:e.target.value})})),margin:\"normal\"}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Button Style\"}),/*#__PURE__*/_jsxs(Select,{value:formData.style||'primary',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{style:e.target.value})),label:\"Button Style\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"primary\",children:\"Primary\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"secondary\",children:\"Secondary\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"link\",children:\"Link\"})]})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Action Type\"}),/*#__PURE__*/_jsxs(Select,{value:((_formData$action2=formData.action)===null||_formData$action2===void 0?void 0:_formData$action2.type)||'postback',onChange:e=>{var _formData$action3,_formData$action4,_formData$action5,_formData$action6,_formData$action7,_formData$action8,_formData$action9,_formData$action0,_formData$action1,_formData$action10,_formData$action11,_formData$action12,_formData$action13,_formData$action14,_formData$action15,_formData$action16;const actionType=e.target.value;let newAction={type:actionType};// Set default properties based on action type\nswitch(actionType){case'postback':newAction=_objectSpread(_objectSpread({},newAction),{},{label:((_formData$action3=formData.action)===null||_formData$action3===void 0?void 0:_formData$action3.label)||'Button',data:((_formData$action4=formData.action)===null||_formData$action4===void 0?void 0:_formData$action4.data)||'action=button'});break;case'message':newAction=_objectSpread(_objectSpread({},newAction),{},{label:((_formData$action5=formData.action)===null||_formData$action5===void 0?void 0:_formData$action5.label)||'Button',text:((_formData$action6=formData.action)===null||_formData$action6===void 0?void 0:_formData$action6.text)||'Hello'});break;case'uri':newAction=_objectSpread(_objectSpread({},newAction),{},{label:((_formData$action7=formData.action)===null||_formData$action7===void 0?void 0:_formData$action7.label)||'Button',uri:((_formData$action8=formData.action)===null||_formData$action8===void 0?void 0:_formData$action8.uri)||'https://example.com'});break;case'datetimepicker':newAction=_objectSpread(_objectSpread({},newAction),{},{label:((_formData$action9=formData.action)===null||_formData$action9===void 0?void 0:_formData$action9.label)||'Select Date',data:((_formData$action0=formData.action)===null||_formData$action0===void 0?void 0:_formData$action0.data)||'action=datetime',mode:'date'});break;case'camera':newAction=_objectSpread(_objectSpread({},newAction),{},{label:((_formData$action1=formData.action)===null||_formData$action1===void 0?void 0:_formData$action1.label)||'Camera'});break;case'cameraRoll':newAction=_objectSpread(_objectSpread({},newAction),{},{label:((_formData$action10=formData.action)===null||_formData$action10===void 0?void 0:_formData$action10.label)||'Camera Roll'});break;case'location':newAction=_objectSpread(_objectSpread({},newAction),{},{label:((_formData$action11=formData.action)===null||_formData$action11===void 0?void 0:_formData$action11.label)||'Location'});break;case'richmenuswitch':newAction=_objectSpread(_objectSpread({},newAction),{},{label:((_formData$action12=formData.action)===null||_formData$action12===void 0?void 0:_formData$action12.label)||'Switch Menu',richMenuAliasId:((_formData$action13=formData.action)===null||_formData$action13===void 0?void 0:_formData$action13.richMenuAliasId)||'menu1',data:((_formData$action14=formData.action)===null||_formData$action14===void 0?void 0:_formData$action14.data)||'action=switch'});break;case'clipboard':newAction=_objectSpread(_objectSpread({},newAction),{},{label:((_formData$action15=formData.action)===null||_formData$action15===void 0?void 0:_formData$action15.label)||'Copy',text:((_formData$action16=formData.action)===null||_formData$action16===void 0?void 0:_formData$action16.text)||'Text to copy'});break;}setFormData(_objectSpread(_objectSpread({},formData),{},{action:newAction}));},label:\"Action Type\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"postback\",children:\"Postback\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"message\",children:\"Message\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"uri\",children:\"URI\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"datetimepicker\",children:\"Date/Time Picker\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"camera\",children:\"Camera\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"cameraRoll\",children:\"Camera Roll\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"location\",children:\"Location\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"richmenuswitch\",children:\"Rich Menu Switch\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"clipboard\",children:\"Clipboard\"})]})]}),((_formData$action17=formData.action)===null||_formData$action17===void 0?void 0:_formData$action17.type)==='postback'&&/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Postback Data\",value:((_formData$action18=formData.action)===null||_formData$action18===void 0?void 0:_formData$action18.data)||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{action:_objectSpread(_objectSpread({},formData.action),{},{data:e.target.value})})),margin:\"normal\",helperText:\"Data sent when button is pressed\"}),((_formData$action19=formData.action)===null||_formData$action19===void 0?void 0:_formData$action19.type)==='message'&&/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Message Text\",value:((_formData$action20=formData.action)===null||_formData$action20===void 0?void 0:_formData$action20.text)||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{action:_objectSpread(_objectSpread({},formData.action),{},{text:e.target.value})})),margin:\"normal\",helperText:\"Text message sent when button is pressed\"}),((_formData$action21=formData.action)===null||_formData$action21===void 0?void 0:_formData$action21.type)==='uri'&&/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"URI\",value:((_formData$action22=formData.action)===null||_formData$action22===void 0?void 0:_formData$action22.uri)||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{action:_objectSpread(_objectSpread({},formData.action),{},{uri:e.target.value})})),margin:\"normal\",helperText:\"URL to open when button is pressed\"}),((_formData$action23=formData.action)===null||_formData$action23===void 0?void 0:_formData$action23.type)==='datetimepicker'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Datetime Data\",value:((_formData$action24=formData.action)===null||_formData$action24===void 0?void 0:_formData$action24.data)||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{action:_objectSpread(_objectSpread({},formData.action),{},{data:e.target.value})})),margin:\"normal\",helperText:\"Data sent when date/time is selected\"}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Mode\"}),/*#__PURE__*/_jsxs(Select,{value:((_formData$action25=formData.action)===null||_formData$action25===void 0?void 0:_formData$action25.mode)||'date',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{action:_objectSpread(_objectSpread({},formData.action),{},{mode:e.target.value})})),label:\"Mode\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"date\",children:\"Date\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"time\",children:\"Time\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"datetime\",children:\"Date & Time\"})]})]})]}),((_formData$action26=formData.action)===null||_formData$action26===void 0?void 0:_formData$action26.type)==='richmenuswitch'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Rich Menu Alias ID\",value:((_formData$action27=formData.action)===null||_formData$action27===void 0?void 0:_formData$action27.richMenuAliasId)||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{action:_objectSpread(_objectSpread({},formData.action),{},{richMenuAliasId:e.target.value})})),margin:\"normal\",helperText:\"Rich menu alias ID to switch to\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Switch Data\",value:((_formData$action28=formData.action)===null||_formData$action28===void 0?void 0:_formData$action28.data)||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{action:_objectSpread(_objectSpread({},formData.action),{},{data:e.target.value})})),margin:\"normal\",helperText:\"Data sent when menu is switched\"})]}),((_formData$action29=formData.action)===null||_formData$action29===void 0?void 0:_formData$action29.type)==='clipboard'&&/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Clipboard Text\",value:((_formData$action30=formData.action)===null||_formData$action30===void 0?void 0:_formData$action30.text)||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{action:_objectSpread(_objectSpread({},formData.action),{},{text:e.target.value})})),margin:\"normal\",helperText:\"Text to copy to clipboard\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Button Color\",value:formData.color||'#000000',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{color:e.target.value})),margin:\"normal\",type:\"color\"}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Height\"}),/*#__PURE__*/_jsxs(Select,{value:formData.height||'sm',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{height:e.target.value})),label:\"Height\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"sm\",children:\"Small\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"md\",children:\"Medium\"})]})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Gravity\"}),/*#__PURE__*/_jsxs(Select,{value:formData.gravity||'top',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{gravity:e.target.value})),label:\"Gravity\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"top\",children:\"Top\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"bottom\",children:\"Bottom\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"center\",children:\"Center\"})]})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Margin\"}),/*#__PURE__*/_jsxs(Select,{value:formData.margin||'none',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{margin:e.target.value})),label:\"Margin\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"none\",children:\"None\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"xs\",children:\"Extra Small\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"sm\",children:\"Small\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"md\",children:\"Medium\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"lg\",children:\"Large\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"xl\",children:\"Extra Large\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"xxl\",children:\"2X Large\"})]})]}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Flex\",value:formData.flex||0,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{flex:parseInt(e.target.value)||0})),margin:\"normal\",type:\"number\",inputProps:{min:0,max:10},helperText:\"Flex ratio (0-10)\"})]});};const renderImageEditor=()=>/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1,mb:2},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Image URL\",value:formData.url||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{url:e.target.value})),margin:\"normal\",helperText:\"Enter image URL or use upload button\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>{console.log('Opening image upload dialog...');setFileUploadDialog({open:true,fileType:'image',onSelect:fileData=>{console.log('Image selected:',fileData);const updatedFormData=_objectSpread(_objectSpread({},formData),{},{url:fileData.url});setFormData(updatedFormData);// Also update the editingElement to persist the change\nsetEditingElement(updatedFormData);setSnackbar({open:true,message:\"Image uploaded successfully: \".concat(fileData.filename),severity:'success'});}});},sx:{mt:1,minWidth:'120px'},children:\"Upload Image\"})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Size\"}),/*#__PURE__*/_jsxs(Select,{value:formData.size||'md',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{size:e.target.value})),label:\"Size\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"xs\",children:\"Extra Small (xs)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"sm\",children:\"Small (sm)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"md\",children:\"Medium (md)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"lg\",children:\"Large (lg)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"xl\",children:\"Extra Large (xl)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"xxl\",children:\"2X Large (xxl)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"3xl\",children:\"3X Large (3xl)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"full\",children:\"Full Width\"})]})]}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Aspect Ratio (e.g., 2:1, 1:1, 4:3)\",value:formData.aspectRatio||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{aspectRatio:e.target.value})),margin:\"normal\",helperText:\"Aspect ratio for the image (e.g., 2:1, 1:1, 4:3)\"})]});const renderIconEditor=()=>/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1,mb:2},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Icon URL\",value:formData.url||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{url:e.target.value})),margin:\"normal\",helperText:\"Enter icon URL or use upload button\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>{console.log('Opening icon upload dialog...');setFileUploadDialog({open:true,fileType:'image',onSelect:fileData=>{console.log('Icon selected:',fileData);const updatedFormData=_objectSpread(_objectSpread({},formData),{},{url:fileData.url});setFormData(updatedFormData);// Also update the editingElement to persist the change\nsetEditingElement(updatedFormData);setSnackbar({open:true,message:\"Icon uploaded successfully: \".concat(fileData.filename),severity:'success'});}});},sx:{mt:1,minWidth:'120px'},children:\"Upload Icon\"})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Size\"}),/*#__PURE__*/_jsxs(Select,{value:formData.size||'md',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{size:e.target.value})),label:\"Size\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"xs\",children:\"Extra Small (xs)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"sm\",children:\"Small (sm)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"md\",children:\"Medium (md)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"lg\",children:\"Large (lg)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"xl\",children:\"Extra Large (xl)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"xxl\",children:\"2X Large (xxl)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"3xl\",children:\"3X Large (3xl)\"})]})]})]});const renderBoxEditor=()=>/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Layout\"}),/*#__PURE__*/_jsxs(Select,{value:formData.layout||'vertical',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{layout:e.target.value})),label:\"Layout\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"vertical\",children:\"Vertical\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"horizontal\",children:\"Horizontal\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"baseline\",children:\"Baseline\"})]})]}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Background Color\",value:formData.backgroundColor||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{backgroundColor:e.target.value})),margin:\"normal\",type:\"color\"})]});const renderBubbleEditor=()=>/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Bubble Size\"}),/*#__PURE__*/_jsxs(Select,{value:formData.size||'mega',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{size:e.target.value})),label:\"Bubble Size\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"nano\",children:\"Nano\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"micro\",children:\"Micro\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"deca\",children:\"Deca\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"hecto\",children:\"Hecto\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"kilo\",children:\"Kilo\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"mega\",children:\"Mega (Default)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"giga\",children:\"Giga\"})]})]}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Background Color\",value:formData.backgroundColor||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{backgroundColor:e.target.value})),margin:\"normal\",type:\"color\"})]});const renderVideoEditor=()=>{var _formData$altContent,_formData$altContent$,_formData$altContent$2;return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1,mb:2},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Video URL (MP4)\",value:formData.url||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{url:e.target.value})),margin:\"normal\",helperText:\"Must be a valid MP4 video URL\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>{console.log('Opening video upload dialog...');setFileUploadDialog({open:true,fileType:'video',onSelect:fileData=>{console.log('Video selected:',fileData);const updatedFormData=_objectSpread(_objectSpread({},formData),{},{url:fileData.url,previewUrl:fileData.previewUrl||formData.previewUrl});setFormData(updatedFormData);// Also update the editingElement to persist the change\nsetEditingElement(updatedFormData);setSnackbar({open:true,message:\"Video uploaded successfully: \".concat(fileData.filename),severity:'success'});}});},sx:{mt:1,minWidth:'120px'},children:\"Upload Video\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1,mb:2},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Preview Image URL\",value:formData.previewUrl||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{previewUrl:e.target.value})),margin:\"normal\",helperText:\"Preview image shown before video plays\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>{console.log('Opening preview image upload dialog...');setFileUploadDialog({open:true,fileType:'image',onSelect:fileData=>{console.log('Preview image selected:',fileData);const updatedFormData=_objectSpread(_objectSpread({},formData),{},{previewUrl:fileData.url});setFormData(updatedFormData);// Also update the editingElement to persist the change\nsetEditingElement(updatedFormData);setSnackbar({open:true,message:\"Preview image uploaded successfully: \".concat(fileData.filename),severity:'success'});}});},sx:{mt:1,minWidth:'120px'},children:\"Upload Preview\"})]}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Alt Text\",value:((_formData$altContent=formData.altContent)===null||_formData$altContent===void 0?void 0:(_formData$altContent$=_formData$altContent.contents)===null||_formData$altContent$===void 0?void 0:(_formData$altContent$2=_formData$altContent$[0])===null||_formData$altContent$2===void 0?void 0:_formData$altContent$2.text)||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{altContent:{type:'box',layout:'vertical',contents:[{type:'text',text:e.target.value,size:'lg',weight:'bold'}]}})),margin:\"normal\",helperText:\"Text shown when video is not available\"})]});};const renderSpacerEditor=()=>/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Size\"}),/*#__PURE__*/_jsxs(Select,{value:formData.size||'md',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{size:e.target.value})),label:\"Size\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"xs\",children:\"Extra Small (xs)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"sm\",children:\"Small (sm)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"md\",children:\"Medium (md)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"lg\",children:\"Large (lg)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"xl\",children:\"Extra Large (xl)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"xxl\",children:\"2X Large (xxl)\"})]})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mt:2},children:\"Spacer adds flexible space between components. The size determines the amount of space.\"})]});const renderFillerEditor=()=>/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Flex\",value:formData.flex||1,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{flex:parseInt(e.target.value)||1})),margin:\"normal\",type:\"number\",inputProps:{min:1,max:10},helperText:\"Flex ratio (1-10) - determines how much space to take\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mt:2},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:\"}),\" Filler is deprecated. Consider using spacing properties on other components instead.\"]})]});const renderEditor=()=>{// Use formData.type if available, otherwise fall back to element.type\nconst elementType=formData.type||element.type;console.log('renderEditor - formData.type:',formData.type);console.log('renderEditor - element.type:',element.type);console.log('renderEditor - using elementType:',elementType);switch(elementType){case'text':return renderTextEditor();case'button':return renderButtonEditor();case'image':return renderImageEditor();case'icon':return renderIconEditor();case'box':return renderBoxEditor();case'bubble':return renderBubbleEditor();case'span':return renderTextEditor();// Use text editor for span\ncase'video':return renderVideoEditor();case'spacer':return renderSpacerEditor();case'filler':return renderFillerEditor();default:return/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"No specific editor available for this element type: \",elementType]});}};return/*#__PURE__*/_jsxs(Dialog,{open:true,onClose:onClose,maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\"Edit \",element.type,\" Element\"]}),/*#__PURE__*/_jsx(IconButton,{onClick:onDelete,color:\"error\",size:\"small\",children:/*#__PURE__*/_jsx(DeleteIcon,{})})]})}),/*#__PURE__*/_jsx(DialogContent,{children:renderEditor()}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSave,variant:\"contained\",children:\"Save Changes\"})]})]});};// Flex Message Designer Component\nconst FlexMessageDesigner=()=>{var _flexTemplates$contai;return/*#__PURE__*/_jsxs(Dialog,{open:designerOpen,onClose:handleCloseDesigner,maxWidth:\"xl\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Flex Message Designer\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Open LINE Flex Message API Documentation\",children:/*#__PURE__*/_jsx(Button,{variant:\"text\",size:\"small\",startIcon:/*#__PURE__*/_jsx(OpenInNewIcon,{}),onClick:()=>window.open('https://developers.line.biz/en/docs/messaging-api/flex-message-elements/','_blank'),sx:{textTransform:'none'},children:\"LINE API Docs\"})}),/*#__PURE__*/_jsx(Button,{onClick:handleSaveDesign,variant:\"contained\",color:\"primary\",children:\"Save Flex Message\"}),/*#__PURE__*/_jsx(Button,{onClick:handleCloseDesigner,variant:\"outlined\",children:\"Close\"})]})]})}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2,height:'600px',overflow:'auto'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",gutterBottom:true,children:[/*#__PURE__*/_jsx(BuildIcon,{sx:{mr:1}}),\"Template Builder\"]}),/*#__PURE__*/_jsxs(Accordion,{defaultExpanded:true,children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),children:/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[/*#__PURE__*/_jsx(CategoryIcon,{sx:{mr:1}}),\"Container Type\"]})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsx(List,{dense:true,children:flexTemplates.containers.map(container=>/*#__PURE__*/_jsxs(ListItem,{button:true,selected:selectedContainer===container.id,onClick:()=>handleSelectContainer(container.id),sx:{border:selectedContainer===container.id?'2px solid #1976d2':'1px solid #e0e0e0',borderRadius:1,mb:1},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:container.icon}),/*#__PURE__*/_jsx(ListItemText,{primary:container.name,secondary:container.description})]},container.id))})})]}),/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),children:/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[/*#__PURE__*/_jsx(OpenInNewIcon,{sx:{mr:1}}),\"Documentation\"]})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsxs(Box,{sx:{p:2,bgcolor:'#f5f5f5',borderRadius:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",gutterBottom:true,children:/*#__PURE__*/_jsx(\"strong\",{children:\"LINE Flex Message Elements:\"})}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",paragraph:true,children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Containers:\"}),\" Bubble (single message), Carousel (multiple messages)\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",paragraph:true,children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Components:\"}),\" Box, Text, Button, Image, Video, Icon, Separator\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",paragraph:true,children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Sizes:\"}),\" xs, sm, md, lg, xl, xxl, 3xl\"]}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"small\",startIcon:/*#__PURE__*/_jsx(OpenInNewIcon,{}),onClick:()=>window.open('https://developers.line.biz/en/docs/messaging-api/flex-message-elements/','_blank'),sx:{mt:1},children:\"View Full Documentation\"})]})})]}),/*#__PURE__*/_jsxs(Accordion,{defaultExpanded:true,children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),children:/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[/*#__PURE__*/_jsx(DashboardIcon,{sx:{mr:1}}),\"Blocks (\",flexTemplates.blocks.length,\" total)\"]})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsx(List,{dense:true,children:flexTemplates.blocks.map(block=>/*#__PURE__*/_jsxs(ListItem,{button:true,onClick:()=>handleAddBlock(block.id),sx:{border:'1px solid #e0e0e0',borderRadius:1,mb:0.5},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:block.icon}),/*#__PURE__*/_jsx(ListItemText,{primary:block.name,secondary:block.description})]},block.id))})})]}),/*#__PURE__*/_jsxs(Accordion,{defaultExpanded:true,children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),children:/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[/*#__PURE__*/_jsx(DragIndicatorIcon,{sx:{mr:1}}),\"Components (\",flexTemplates.components.length,\" total)\"]})}),/*#__PURE__*/_jsx(AccordionDetails,{children:['layout','content','interactive','media'].map(category=>{const categoryComponents=flexTemplates.components.filter(comp=>comp.category===category);return/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle2\",gutterBottom:true,sx:{textTransform:'capitalize'},children:[category,\" (\",categoryComponents.length,\")\"]}),/*#__PURE__*/_jsx(List,{dense:true,children:categoryComponents.map(component=>/*#__PURE__*/_jsxs(ListItem,{button:true,onClick:()=>handleAddComponent(component.id),sx:{border:'1px solid #e0e0e0',borderRadius:1,mb:0.5},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:component.icon}),/*#__PURE__*/_jsx(ListItemText,{primary:component.name,secondary:component.description})]},component.id))})]},category);})})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2,height:'600px',overflow:'auto'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",gutterBottom:true,children:[/*#__PURE__*/_jsx(DashboardIcon,{sx:{mr:1}}),\"Design Canvas\"]}),selectedContainer?/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Chip,{label:\"Container: \".concat((_flexTemplates$contai=flexTemplates.containers.find(c=>c.id===selectedContainer))===null||_flexTemplates$contai===void 0?void 0:_flexTemplates$contai.name),color:\"primary\",sx:{mb:2}}),selectedComponents.length>0&&/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"Selected Components:\"}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:1},children:selectedComponents.map(component=>/*#__PURE__*/_jsx(Chip,{label:component.type,onDelete:()=>handleRemoveComponent(component.id),color:\"secondary\",variant:\"outlined\"},component.id))})]}),/*#__PURE__*/_jsxs(Box,{sx:{border:'1px solid #e0e0e0',borderRadius:1,p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"Live Preview (Click elements to edit):\"}),/*#__PURE__*/_jsx(VisualFlexMessagePreview,{flexMessage:formData.flex_message,onElementClick:handleSelectElement,selectedElementId:selectedElement})]})]}):/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',height:'100%',color:'#666'},children:[/*#__PURE__*/_jsx(ViewModuleIcon,{sx:{fontSize:48,mb:2,opacity:0.5}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Start Designing\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",align:\"center\",children:\"Select a container type from the left panel to begin building your flex message\"})]})]})})]})})]});};return/*#__PURE__*/_jsxs(Box,{sx:{p:{xs:2,md:4},minHeight:'100vh',background:'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)'},children:[/*#__PURE__*/_jsxs(Box,{sx:{mb:4,display:'flex',alignItems:'center',gap:3,background:'white',p:3,borderRadius:3,boxShadow:'0 4px 12px rgba(0,0,0,0.08)',border:'1px solid rgba(0,0,0,0.05)'},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:2,flex:1},children:[/*#__PURE__*/_jsx(Box,{sx:{bgcolor:'primary.main',width:56,height:56,borderRadius:2,display:'flex',alignItems:'center',justifyContent:'center',boxShadow:'0 4px 16px rgba(25, 118, 210, 0.3)'},children:/*#__PURE__*/_jsx(SmartphoneIcon,{sx:{fontSize:28,color:'white'}})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{fontWeight:700,mb:1,background:'linear-gradient(135deg, #1e293b 0%, #334155 100%)',backgroundClip:'text',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent'},children:\"Flex Message Management\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",sx:{fontSize:'1.1rem'},children:\"Create and manage LINE Flex Messages for enhanced user experience\"})]})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:2},children:[/*#__PURE__*/_jsxs(ToggleButtonGroup,{value:viewMode,exclusive:true,onChange:(_,newViewMode)=>{if(newViewMode!==null){setViewMode(newViewMode);}},size:\"small\",sx:{'& .MuiToggleButton-root':{borderRadius:2,border:'1px solid #e2e8f0','&.Mui-selected':{backgroundColor:'primary.main',color:'white','&:hover':{backgroundColor:'primary.dark'}}}},children:[/*#__PURE__*/_jsx(ToggleButton,{value:\"table\",\"aria-label\":\"table view\",children:/*#__PURE__*/_jsx(TableChartIcon,{})}),/*#__PURE__*/_jsx(ToggleButton,{value:\"cards\",\"aria-label\":\"card view\",children:/*#__PURE__*/_jsx(ViewModuleIcon,{})})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:handleCreateNew,sx:{borderRadius:2,textTransform:'none',fontWeight:600,boxShadow:'0 4px 12px rgba(59, 130, 246, 0.3)',px:3},children:\"Create New Flex Message\"})]})]}),loading?/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',p:4},children:/*#__PURE__*/_jsx(CircularProgress,{})}):viewMode==='table'?/*#__PURE__*/_jsx(Card,{sx:{mb:3,background:'white',borderRadius:3,boxShadow:'0 4px 16px rgba(0,0,0,0.08)',border:'1px solid rgba(0,0,0,0.05)',overflow:'hidden'},children:/*#__PURE__*/_jsx(TableContainer,{children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{sx:{backgroundColor:'#f8fafc'},children:[/*#__PURE__*/_jsx(TableCell,{sx:{fontWeight:600,color:'#334155',borderBottom:'2px solid #e2e8f0'},children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{sx:{fontWeight:600,color:'#334155',borderBottom:'2px solid #e2e8f0'},children:\"Purpose\"}),/*#__PURE__*/_jsx(TableCell,{sx:{fontWeight:600,color:'#334155',borderBottom:'2px solid #e2e8f0'},children:\"Alt Text\"}),/*#__PURE__*/_jsx(TableCell,{sx:{fontWeight:600,color:'#334155',borderBottom:'2px solid #e2e8f0'},children:\"Tags\"}),/*#__PURE__*/_jsx(TableCell,{sx:{fontWeight:600,color:'#334155',borderBottom:'2px solid #e2e8f0'},children:\"Created\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",sx:{fontWeight:600,color:'#334155',borderBottom:'2px solid #e2e8f0'},children:\"Actions\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:flexMessages.map(message=>/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{fontWeight:500},children:message.name})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:message.purpose==='liff_message'?'LIFF':'BOT',size:\"small\",color:message.purpose==='liff_message'?'primary':'secondary'})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{maxWidth:200},children:message.alt_text})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexWrap:'wrap',gap:0.5},children:[message.tags.slice(0,3).map((tag,index)=>/*#__PURE__*/_jsx(Chip,{label:tag,size:\"small\",variant:\"outlined\"},index)),message.tags.length>3&&/*#__PURE__*/_jsx(Chip,{label:\"+\".concat(message.tags.length-3),size:\"small\",variant:\"outlined\"})]})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:message.usertimestamp||new Date(message.created_at||'').toLocaleDateString()})}),/*#__PURE__*/_jsxs(TableCell,{align:\"right\",children:[/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handlePreview(message),color:\"primary\",children:/*#__PURE__*/_jsx(ViewIcon,{})}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleEdit(message),color:\"primary\",children:/*#__PURE__*/_jsx(EditIcon,{})}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleDelete(message._id),color:\"error\",children:/*#__PURE__*/_jsx(DeleteIcon,{})})]})]},message._id))})]})})}):/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:flexMessages.map(message=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,lg:4,children:/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column',transition:'all 0.3s ease','&:hover':{transform:'translateY(-4px)',boxShadow:'0 8px 24px rgba(0,0,0,0.15)'}},children:[/*#__PURE__*/_jsxs(CardContent,{sx:{flex:1,p:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h2\",sx:{wordBreak:'break-word',fontWeight:600,color:'#1e293b'},children:message.name}),/*#__PURE__*/_jsx(Chip,{label:message.purpose==='liff_message'?'LIFF':'BOT',size:\"small\",color:message.purpose==='liff_message'?'primary':'secondary',sx:{fontWeight:600,borderRadius:2}})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:2,lineHeight:1.6,color:'#64748b'},children:message.alt_text}),message.tags.length>0&&/*#__PURE__*/_jsx(Box,{sx:{mb:2},children:message.tags.map((tag,index)=>/*#__PURE__*/_jsx(Chip,{label:tag,size:\"small\",sx:{mr:0.5,mb:0.5,borderRadius:2,backgroundColor:'#f1f5f9',color:'#475569',border:'1px solid #e2e8f0'}},index))}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{color:'#94a3b8',fontWeight:500},children:[\"Created: \",message.usertimestamp||new Date(message.created_at||'').toLocaleDateString()]})]}),/*#__PURE__*/_jsxs(CardActions,{sx:{p:2,pt:0,borderTop:'1px solid #f1f5f9',backgroundColor:'#fafafa'},children:[/*#__PURE__*/_jsx(Button,{size:\"small\",startIcon:/*#__PURE__*/_jsx(ViewIcon,{}),onClick:()=>handlePreview(message),sx:{borderRadius:2,textTransform:'none',fontWeight:600},children:\"Preview\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",startIcon:/*#__PURE__*/_jsx(EditIcon,{}),onClick:()=>handleEdit(message),sx:{borderRadius:2,textTransform:'none',fontWeight:600},children:\"Edit\"}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"error\",onClick:()=>handleDelete(message._id),sx:{borderRadius:2,'&:hover':{backgroundColor:'rgba(239, 68, 68, 0.1)'}},children:/*#__PURE__*/_jsx(DeleteIcon,{})})]})]})},message._id))}),/*#__PURE__*/_jsxs(Dialog,{open:dialogOpen,onClose:()=>setDialogOpen(false),maxWidth:\"lg\",fullWidth:true,PaperProps:{sx:{borderRadius:3,boxShadow:'0 8px 32px rgba(0,0,0,0.15)'}},children:[/*#__PURE__*/_jsx(DialogTitle,{sx:{background:'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)',borderBottom:'1px solid #e2e8f0',pb:2},children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:2},children:[/*#__PURE__*/_jsx(Box,{sx:{bgcolor:'primary.main',width:40,height:40,borderRadius:2,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(SmartphoneIcon,{sx:{fontSize:20,color:'white'}})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{fontWeight:600,color:'#1e293b'},children:editingMessage?'Edit Flex Message':'Create New Flex Message'})]})}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,sx:{mt:1},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2,height:'500px',overflow:'auto'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",gutterBottom:true,children:[/*#__PURE__*/_jsx(ViewModuleIcon,{sx:{mr:1}}),\"Available Templates\"]}),templateLoading?/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',p:2},children:/*#__PURE__*/_jsx(CircularProgress,{size:24})}):/*#__PURE__*/_jsx(List,{dense:true,children:availableTemplates.map(template=>{var _template$tags;return/*#__PURE__*/_jsxs(ListItem,{button:true,selected:(selectedTemplate===null||selectedTemplate===void 0?void 0:selectedTemplate._id)===template._id,onClick:()=>handleTemplateSelect(template),sx:{border:(selectedTemplate===null||selectedTemplate===void 0?void 0:selectedTemplate._id)===template._id?'2px solid #1976d2':'1px solid #e0e0e0',borderRadius:1,mb:1},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:(_template$tags=template.tags)!==null&&_template$tags!==void 0&&_template$tags.includes('video')?/*#__PURE__*/_jsx(VideoLibraryIcon,{}):/*#__PURE__*/_jsx(ViewModuleIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:template.name,secondary:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",display:\"block\",children:template.purpose}),template.tags&&template.tags.length>0&&/*#__PURE__*/_jsx(Box,{sx:{mt:0.5},children:template.tags.map((tag,index)=>/*#__PURE__*/_jsx(Chip,{label:tag,size:\"small\",sx:{mr:0.5,mb:0.5}},index))})]})})]},template._id);})}),availableTemplates.length===0&&!templateLoading&&/*#__PURE__*/_jsxs(Box,{sx:{p:2,textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"No templates available\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",display:\"block\",sx:{mt:1},children:\"Templates are flex messages marked with 'template' tag\"})]})]})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:8,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Name\",value:formData.name,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{name:e.target.value})),margin:\"normal\"}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Purpose\"}),/*#__PURE__*/_jsxs(Select,{value:formData.purpose,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{purpose:e.target.value})),label:\"Purpose\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"liff_message\",children:\"LIFF Message Send\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"bot_reply\",children:\"BOT Reply Message\"})]})]}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Alt Text\",value:formData.alt_text,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{alt_text:e.target.value})),margin:\"normal\",multiline:true,rows:2,helperText:\"Text displayed when flex message cannot be rendered\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Tags\",value:formData.tags.join(', '),onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{tags:e.target.value.split(',').map(tag=>tag.trim()).filter(tag=>tag)})),margin:\"normal\",helperText:\"Comma-separated tags\"}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(BuildIcon,{}),onClick:handleOpenDesigner,fullWidth:true,sx:{mb:2},children:\"Open Visual Designer\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",display:\"block\",children:\"Use the visual designer to build your flex message with templates and components\"})]}),/*#__PURE__*/_jsxs(Accordion,{sx:{mt:2},children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),children:/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",children:\"Advanced: JSON Editor\"})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Flex Message JSON\",value:JSON.stringify(formData.flex_message,null,2),onChange:e=>{try{const parsed=JSON.parse(e.target.value);setFormData(_objectSpread(_objectSpread({},formData),{},{flex_message:parsed}));}catch(error){// Invalid JSON, don't update\n}},multiline:true,rows:8,helperText:\"Advanced: Edit JSON directly (use with caution)\",sx:{fontFamily:'monospace'}})})]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Live Preview\"}),/*#__PURE__*/_jsx(VisualFlexMessagePreview,{flexMessage:formData.flex_message})]})]})}),/*#__PURE__*/_jsxs(DialogActions,{sx:{p:3,borderTop:'1px solid #e2e8f0',backgroundColor:'#f8fafc'},children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setDialogOpen(false),sx:{borderRadius:2,textTransform:'none',fontWeight:600,px:3},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSave,variant:\"contained\",sx:{borderRadius:2,textTransform:'none',fontWeight:600,px:3,boxShadow:'0 4px 12px rgba(59, 130, 246, 0.3)'},children:editingMessage?'Update':'Create'})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:previewDialogOpen,onClose:()=>setPreviewDialogOpen(false),maxWidth:\"lg\",fullWidth:true,PaperProps:{sx:{borderRadius:3,boxShadow:'0 8px 32px rgba(0,0,0,0.15)'}},children:[/*#__PURE__*/_jsx(DialogTitle,{sx:{background:'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)',borderBottom:'1px solid #e2e8f0',pb:2},children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:2},children:[/*#__PURE__*/_jsx(Box,{sx:{bgcolor:'primary.main',width:40,height:40,borderRadius:2,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(ViewIcon,{sx:{fontSize:20,color:'white'}})}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",sx:{fontWeight:600,color:'#1e293b'},children:[\"Preview: \",previewMessage===null||previewMessage===void 0?void 0:previewMessage.name]})]}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>setPreviewDialogOpen(false),sx:{borderRadius:2,textTransform:'none',fontWeight:600},children:\"Close\"})]})}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsxs(Tabs,{value:previewTabValue,onChange:(_,newValue)=>setPreviewTabValue(newValue),children:[/*#__PURE__*/_jsx(Tab,{label:\"Visual Preview\",icon:/*#__PURE__*/_jsx(SmartphoneIcon,{})}),/*#__PURE__*/_jsx(Tab,{label:\"JSON Structure\",icon:/*#__PURE__*/_jsx(CodeIcon,{})})]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[previewTabValue===0&&previewMessage&&/*#__PURE__*/_jsx(VisualFlexMessagePreview,{flexMessage:previewMessage.flex_message}),previewTabValue===1&&previewMessage&&/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:15,value:JSON.stringify(previewMessage.flex_message,null,2),InputProps:{readOnly:true},sx:{fontFamily:'monospace'}})]})]})]}),/*#__PURE__*/_jsx(FlexMessageDesigner,{}),showElementEditor&&editingElement&&/*#__PURE__*/_jsx(ElementEditor,{element:editingElement,onUpdate:updates=>handleUpdateElement(editingElement.id,updates),onDelete:()=>handleDeleteElement(editingElement.id),onClose:()=>{setShowElementEditor(false);setEditingElement(null);setSelectedElement(null);}}),/*#__PURE__*/_jsx(FileUploadDialog,{open:fileUploadDialog.open,fileType:fileUploadDialog.fileType,onSelect:fileUploadDialog.onSelect,onClose:()=>setFileUploadDialog(_objectSpread(_objectSpread({},fileUploadDialog),{},{open:false}))}),/*#__PURE__*/_jsx(Snackbar,{open:snackbar.open,autoHideDuration:6000,onClose:()=>setSnackbar(_objectSpread(_objectSpread({},snackbar),{},{open:false})),children:/*#__PURE__*/_jsx(Alert,{onClose:()=>setSnackbar(_objectSpread(_objectSpread({},snackbar),{},{open:false})),severity:snackbar.severity,children:snackbar.message})})]});};export default FlexMessageManager;","map":{"version":3,"names":["React","useState","useEffect","FileUploadDialog","Box","Button","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Typography","IconButton","Chip","Grid","Card","CardContent","CardActions","FormControl","InputLabel","Select","MenuItem","Tabs","Tab","Alert","Snackbar","CircularProgress","Accordion","AccordionSummary","AccordionDetails","List","ListItem","ListItemText","ListItemIcon","Paper","FormControlLabel","Switch","Tooltip","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","ToggleButton","ToggleButtonGroup","Add","AddIcon","Edit","EditIcon","Delete","DeleteIcon","Visibility","ViewIcon","Smartphone","SmartphoneIcon","Code","CodeIcon","ViewModule","ViewModuleIcon","ViewCarousel","ViewCarouselIcon","TextFields","TextFieldsIcon","CropSquare","CropSquareIcon","Image","ImageIcon","VideoLibrary","VideoLibraryIcon","EmojiEmotions","EmojiEmotionsIcon","Remove","SeparatorIcon","Dashboard","DashboardIcon","ExpandMore","ExpandMoreIcon","Build","BuildIcon","Category","CategoryIcon","DragIndicator","DragIndicatorIcon","OpenInNew","OpenInNewIcon","TableChart","TableChartIcon","getAllSystemFlexMessages","createNewSystemFlexMessage","updateSystemFlexMessageById","deleteSystemFlexMessageById","getFlexMessagesByPurpose","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FlexMessageManager","flexMessages","setFlexMessages","loading","setLoading","dialogOpen","setDialogOpen","previewDialogOpen","setPreviewDialogOpen","editingMessage","setEditingMessage","previewMessage","setPreviewMessage","previewTabValue","setPreviewTabValue","snackbar","setSnackbar","open","message","severity","designerOpen","setDesignerOpen","selectedContainer","setSelectedContainer","selectedComponents","setSelectedComponents","selectedElement","setSelectedElement","editingElement","setEditingElement","showElementEditor","setShowElementEditor","fileUploadDialog","setFileUploadDialog","fileType","onSelect","viewMode","setViewMode","flexTemplates","containers","id","name","description","icon","template","type","size","body","layout","contents","blocks","url","aspectRatio","components","category","text","weight","color","wrap","lineSpacing","maxLines","flex","margin","position","offsetTop","offsetBottom","offsetStart","offsetEnd","align","gravity","adjustMode","scaling","action","label","data","style","height","previewUrl","altContent","formData","setFormData","purpose","flex_message","alt_text","quick_reply","tags","availableTemplates","setAvailableTemplates","selectedTemplate","setSelectedTemplate","templateLoading","setTemplateLoading","loadFlexMessages","loadAvailableTemplates","_response$data","response","console","log","length","templates","filter","isTemplate","template_type","includes","concat","name_has_template","name_has_full_autoplay","map","t","error","handleTemplateSelect","handleCreateNew","handleEdit","handleDelete","window","confirm","handleSave","_id","handlePreview","handleOpenDesigner","Object","keys","updatedFlexMessage","_objectSpread","assignUniqueIdsToStructure","allComponents","extractAllComponents","structure","Date","now","Math","random","toString","substr","Array","isArray","item","block","handleCloseDesigner","handleSaveDesign","handleSelectContainer","containerId","container","find","c","_formData$flex_messag","currentType","handleAddComponent","componentId","component","newComponent","push","handleAddBlock","blockId","b","newBlock","addIdIfMissing","index","i","handleRemoveComponent","_updatedFlexMessage$c","_updatedFlexMessage$c2","_updatedFlexMessage$b","_updatedFlexMessage$c3","handleSelectElement","elementId","element","findElementById","found","handleUpdateElement","updates","newFlexMessage","updateElementInStructure","assign","handleDeleteElement","removeElementFromStructure","findIndex","splice","getTextSize","getImageSize","getBubbleSize","VisualFlexMessagePreview","_ref","flexMessage","onElementClick","selectedElementId","renderFlexContent","content","_content$action","_content$action2","_content$action3","_content$action4","_content$action5","_content$action6","_content$action7","_content$action8","_content$action9","_content$action0","_content$action1","_content$action10","_content$action11","_content$action12","_content$action13","_content$action14","_content$action15","depth","arguments","undefined","commonStyles","border","borderRadius","padding","backgroundColor","fontSize","fontFamily","cursor","transition","borderColor","containerStyles","sx","children","variant","display","mb","header","footer","pl","onClick","fontWeight","textAlign","whiteSpace","overflow","textOverflow","lineHeight","maxHeight","top","bottom","left","right","mt","minWidth","bgcolor","uri","mode","richMenuAliasId","width","alignItems","justifyContent","flexDirection","my","p","gutterBottom","gap","maxWidth","hero","ElementEditor","_ref2","onUpdate","onDelete","onClose","initialized","setInitialized","newFormData","renderTextEditor","fullWidth","value","onChange","e","target","multiline","rows","control","checked","helperText","parseInt","inputProps","min","max","renderButtonEditor","_formData$action","_formData$action2","_formData$action17","_formData$action18","_formData$action19","_formData$action20","_formData$action21","_formData$action22","_formData$action23","_formData$action24","_formData$action25","_formData$action26","_formData$action27","_formData$action28","_formData$action29","_formData$action30","_formData$action3","_formData$action4","_formData$action5","_formData$action6","_formData$action7","_formData$action8","_formData$action9","_formData$action0","_formData$action1","_formData$action10","_formData$action11","_formData$action12","_formData$action13","_formData$action14","_formData$action15","_formData$action16","actionType","newAction","renderImageEditor","fileData","updatedFormData","filename","renderIconEditor","renderBoxEditor","renderBubbleEditor","renderVideoEditor","_formData$altContent","_formData$altContent$","_formData$altContent$2","renderSpacerEditor","renderFillerEditor","renderEditor","elementType","FlexMessageDesigner","_flexTemplates$contai","title","startIcon","textTransform","spacing","xs","md","mr","defaultExpanded","expandIcon","dense","button","selected","primary","secondary","paragraph","categoryComponents","comp","flexWrap","opacity","minHeight","background","boxShadow","backgroundClip","WebkitBackgroundClip","WebkitTextFillColor","exclusive","_","newViewMode","px","borderBottom","hover","slice","tag","usertimestamp","created_at","toLocaleDateString","lg","transform","wordBreak","pt","borderTop","PaperProps","pb","_template$tags","join","split","trim","JSON","stringify","parsed","parse","newValue","InputProps","readOnly","autoHideDuration"],"sources":["/Users/kitkamon/Cursor/evep-my-firstcare-com/admin-panel/src/components/line-bot/FlexMessageManager.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport FileUploadDialog from './FileUploadDialog';\nimport {\n  Box,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  Typography,\n  IconButton,\n  Chip,\n  Grid,\n  Card,\n  CardContent,\n  CardActions,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Tabs,\n  Tab,\n  Alert,\n  Snackbar,\n  CircularProgress,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  Paper,\n  FormControlLabel,\n  Switch,\n  Tooltip,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  ToggleButton,\n  ToggleButtonGroup\n} from '@mui/material';\nimport {\n  Add as AddIcon,\n  Edit as EditIcon,\n  Delete as DeleteIcon,\n  Visibility as ViewIcon,\n  Smartphone as SmartphoneIcon,\n  Code as CodeIcon,\n  ViewModule as ViewModuleIcon,\n  ViewCarousel as ViewCarouselIcon,\n  TextFields as TextFieldsIcon,\n  CropSquare as CropSquareIcon,\n  Image as ImageIcon,\n  VideoLibrary as VideoLibraryIcon,\n  EmojiEmotions as EmojiEmotionsIcon,\n  Remove as SeparatorIcon,\n  Dashboard as DashboardIcon,\n  ExpandMore as ExpandMoreIcon,\n  Build as BuildIcon,\n  Category as CategoryIcon,\n  DragIndicator as DragIndicatorIcon,\n  OpenInNew as OpenInNewIcon,\n  TableChart as TableChartIcon\n} from '@mui/icons-material';\nimport { getAllSystemFlexMessages, createNewSystemFlexMessage, updateSystemFlexMessageById, deleteSystemFlexMessageById, getFlexMessagesByPurpose } from '../api';\n\ninterface FlexMessage {\n  _id?: string;\n  name: string;\n  purpose: string;\n  flex_message: any;\n  alt_text: string;\n  quick_reply?: any;\n  tags: string[];\n  created_at?: string;\n  updated_at?: string;\n  usertimestamp?: string;\n}\n\nconst FlexMessageManager: React.FC = () => {\n  const [flexMessages, setFlexMessages] = useState<FlexMessage[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [previewDialogOpen, setPreviewDialogOpen] = useState(false);\n  const [editingMessage, setEditingMessage] = useState<FlexMessage | null>(null);\n  const [previewMessage, setPreviewMessage] = useState<FlexMessage | null>(null);\n  const [previewTabValue, setPreviewTabValue] = useState(0);\n  const [snackbar, setSnackbar] = useState({ open: false, message: '', severity: 'success' as 'success' | 'error' });\n  const [designerOpen, setDesignerOpen] = useState(false);\n  const [selectedContainer, setSelectedContainer] = useState<string>('');\n  const [selectedComponents, setSelectedComponents] = useState<any[]>([]);\n  const [selectedElement, setSelectedElement] = useState<string | null>(null);\n  const [editingElement, setEditingElement] = useState<any>(null);\n  const [showElementEditor, setShowElementEditor] = useState(false);\n  const [fileUploadDialog, setFileUploadDialog] = useState<{\n    open: boolean;\n    fileType: 'image' | 'video';\n    onSelect: (fileData: { url: string; previewUrl?: string; filename: string }) => void;\n  }>({\n    open: false,\n    fileType: 'image',\n    onSelect: () => {}\n  });\n\n  // View mode state\n  const [viewMode, setViewMode] = useState<'table' | 'cards'>('table');\n\n  // Flex Message Templates based on LINE documentation\n  const flexTemplates = {\n    containers: [\n      {\n        id: 'bubble',\n        name: 'Bubble Container',\n        description: 'A container that displays a single message bubble',\n        icon: <ViewModuleIcon />,\n        template: {\n          type: 'bubble',\n          size: 'mega',\n          body: {\n            type: 'box',\n            layout: 'vertical',\n            contents: []\n          }\n        }\n      },\n      {\n        id: 'carousel',\n        name: 'Carousel Container',\n        description: 'A container that displays multiple message bubbles, laid out side by side',\n        icon: <ViewCarouselIcon />,\n        template: {\n          type: 'carousel',\n          contents: []\n        }\n      }\n    ],\n    blocks: [\n      {\n        id: 'header',\n        name: 'Header Block',\n        description: 'Block that displays the message subject or header',\n        icon: <TextFieldsIcon />,\n        template: {\n          type: 'box',\n          layout: 'vertical',\n          contents: []\n        }\n      },\n      {\n        id: 'hero',\n        name: 'Hero Block',\n        description: 'Block that displays the main image',\n        icon: <ImageIcon />,\n        template: {\n          type: 'image',\n          url: 'https://example.com/hero-image.jpg',\n          size: 'full',\n          aspectRatio: '2:1'\n        }\n      },\n      {\n        id: 'body',\n        name: 'Body Block',\n        description: 'Block that displays the main message',\n        icon: <CropSquareIcon />,\n        template: {\n          type: 'box',\n          layout: 'vertical',\n          contents: []\n        }\n      },\n      {\n        id: 'footer',\n        name: 'Footer Block',\n        description: 'Block that displays buttons and supplementary information',\n        icon: <CropSquareIcon />,\n        template: {\n          type: 'box',\n          layout: 'vertical',\n          contents: []\n        }\n      }\n    ],\n    components: [\n      {\n        id: 'box',\n        type: 'box',\n        name: 'Box',\n        description: 'Defines horizontal or vertical layout orientation and holds components together',\n        icon: <CropSquareIcon />,\n        category: 'layout',\n        template: {\n          type: 'box',\n          layout: 'vertical',\n          contents: []\n        }\n      },\n      {\n        id: 'text',\n        type: 'text',\n        name: 'Text',\n        description: 'Renders a text string with customizable color, size, and weight',\n        icon: <TextFieldsIcon />,\n        category: 'content',\n        template: {\n          type: 'text',\n          text: 'Sample text',\n          size: 'md',\n          weight: 'regular',\n          color: '#000000',\n          wrap: false,\n          lineSpacing: '',\n          maxLines: 0,\n          flex: 0,\n          margin: 'none',\n          position: 'relative',\n          offsetTop: '0px',\n          offsetBottom: '0px',\n          offsetStart: '0px',\n          offsetEnd: '0px',\n          align: 'start',\n          gravity: 'top',\n          adjustMode: 'shrink-to-fit',\n          scaling: false,\n          contents: []\n        }\n      },\n      {\n        id: 'span',\n        type: 'span',\n        name: 'Span',\n        description: 'Renders multiple text strings in different styles',\n        icon: <TextFieldsIcon />,\n        category: 'content',\n        template: {\n          type: 'span',\n          text: 'Sample span',\n          color: '#000000',\n          size: 'md',\n          weight: 'regular'\n        }\n      },\n      {\n        id: 'button',\n        type: 'button',\n        name: 'Button',\n        description: 'Renders a button with three styles: primary, secondary, and link',\n        icon: <CropSquareIcon />,\n        category: 'interactive',\n        template: {\n          type: 'button',\n          action: {\n            type: 'postback',\n            label: 'Button',\n            data: 'action=button'\n          },\n          style: 'primary',\n          color: '#000000',\n          flex: 0,\n          margin: 'none',\n          height: 'sm',\n          gravity: 'top'\n        }\n      },\n      {\n        id: 'image',\n        type: 'image',\n        name: 'Image',\n        description: 'Renders an image with customizable size and aspect ratio',\n        icon: <ImageIcon />,\n        category: 'media',\n        template: {\n          type: 'image',\n          url: 'https://example.com/image.jpg',\n          size: 'md',\n          aspectRatio: '1:1'\n        }\n      },\n      {\n        id: 'video',\n        type: 'video',\n        name: 'Video',\n        description: 'Renders a video with preview image (requires proper URL and preview)',\n        icon: <VideoLibraryIcon />,\n        category: 'media',\n        template: {\n          type: 'video',\n          url: 'https://example.com/video.mp4',\n          previewUrl: 'https://example.com/preview.jpg',\n          altContent: {\n            type: 'box',\n            layout: 'vertical',\n            contents: [\n              {\n                type: 'text',\n                text: 'Video not available',\n                size: 'lg',\n                weight: 'bold'\n              }\n            ]\n          }\n        }\n      },\n      {\n        id: 'icon',\n        type: 'icon',\n        name: 'Icon',\n        description: 'Renders an icon with customizable size',\n        icon: <EmojiEmotionsIcon />,\n        category: 'content',\n        template: {\n          type: 'icon',\n          url: 'https://example.com/icon.png',\n          size: 'md'\n        }\n      },\n      {\n        id: 'separator',\n        type: 'separator',\n        name: 'Separator',\n        description: 'Renders a separating line inside a box',\n        icon: <SeparatorIcon />,\n        category: 'layout',\n        template: {\n          type: 'separator',\n          margin: 'md'\n        }\n      },\n      {\n        id: 'filler',\n        type: 'filler',\n        name: 'Filler (Deprecated)',\n        description: 'Renders an empty space (deprecated - use spacing properties instead)',\n        icon: <CropSquareIcon />,\n        category: 'layout',\n        template: {\n          type: 'filler',\n          flex: 1\n        }\n      },\n      {\n        id: 'spacer',\n        type: 'spacer',\n        name: 'Spacer',\n        description: 'Adds flexible space between components',\n        icon: <CropSquareIcon />,\n        category: 'layout',\n        template: {\n          type: 'spacer',\n          size: 'md'\n        }\n      }\n    ]\n  };\n\n  const [formData, setFormData] = useState({\n    name: '',\n    purpose: 'liff_message',\n    flex_message: {} as any,\n    alt_text: '',\n    quick_reply: null,\n    tags: [] as string[]\n  });\n\n  // Template selection state\n  const [availableTemplates, setAvailableTemplates] = useState<any[]>([]);\n  const [selectedTemplate, setSelectedTemplate] = useState<any>(null);\n  const [templateLoading, setTemplateLoading] = useState(false);\n\n  useEffect(() => {\n    loadFlexMessages();\n    loadAvailableTemplates();\n  }, []);\n\n  const loadAvailableTemplates = async () => {\n    setTemplateLoading(true);\n    try {\n      const response = await getFlexMessagesByPurpose('bot_reply');\n      console.log('ðŸ” API Response:', response.data);\n      console.log('ðŸ” Total messages received:', response.data?.length || 0);\n      \n      // Filter to show only templates (messages with template_type or specific tags)\n      const templates = (response.data || []).filter((message: any) => {\n        // Show messages that have template_type or are marked as templates\n        const isTemplate = message.template_type || \n               (message.tags && message.tags.includes('template')) ||\n               message.name.includes('Template') ||\n               message.name.includes('Full AutoPlay');\n        \n        console.log(`ðŸ” Message \"${message.name}\":`, {\n          template_type: message.template_type,\n          tags: message.tags,\n          name_has_template: message.name.includes('Template'),\n          name_has_full_autoplay: message.name.includes('Full AutoPlay'),\n          isTemplate\n        });\n        \n        return isTemplate;\n      });\n      \n      console.log('ðŸ” Templates found:', templates.length);\n      console.log('ðŸ” Template names:', templates.map((t: any) => t.name));\n      \n      setAvailableTemplates(templates);\n    } catch (error) {\n      console.error('Error loading templates:', error);\n    } finally {\n      setTemplateLoading(false);\n    }\n  };\n\n  const handleTemplateSelect = (template: any) => {\n    setSelectedTemplate(template);\n    setFormData({\n      name: template.name,\n      purpose: template.purpose,\n      flex_message: template.flex_message,\n      alt_text: template.alt_text,\n      quick_reply: template.quick_reply,\n      tags: template.tags || []\n    });\n  };\n\n  const loadFlexMessages = async () => {\n      setLoading(true);\n    try {\n      const response = await getAllSystemFlexMessages();\n      setFlexMessages(response.data || []);\n    } catch (error) {\n      console.error('Error loading flex messages:', error);\n      setSnackbar({ open: true, message: 'Failed to load flex messages', severity: 'error' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateNew = () => {\n    setEditingMessage(null);\n    setSelectedTemplate(null);\n    setFormData({\n      name: '',\n      purpose: 'liff_message',\n      flex_message: {},\n      alt_text: '',\n      quick_reply: null,\n      tags: []\n    });\n    setDialogOpen(true);\n  };\n\n  const handleEdit = (message: FlexMessage) => {\n      setEditingMessage(message);\n      setSelectedTemplate(null); // Clear template selection when editing\n      setFormData({\n        name: message.name,\n      purpose: message.purpose,\n      flex_message: message.flex_message,\n      alt_text: message.alt_text,\n      quick_reply: message.quick_reply,\n      tags: message.tags\n    });\n    setDialogOpen(true);\n  };\n\n  const handleDelete = async (id: string) => {\n    if (window.confirm('Are you sure you want to delete this flex message?')) {\n      try {\n        await deleteSystemFlexMessageById(id);\n        setSnackbar({ open: true, message: 'Flex message deleted successfully', severity: 'success' });\n        loadFlexMessages();\n      } catch (error) {\n        console.error('Error deleting flex message:', error);\n        setSnackbar({ open: true, message: 'Failed to delete flex message', severity: 'error' });\n      }\n    }\n  };\n\n  const handleSave = async () => {\n    try {\n      if (editingMessage) {\n        await updateSystemFlexMessageById(editingMessage._id!, formData);\n        setSnackbar({ open: true, message: 'Flex message updated successfully', severity: 'success' });\n    } else {\n        await createNewSystemFlexMessage(formData);\n        setSnackbar({ open: true, message: 'Flex message created successfully', severity: 'success' });\n      }\n      setDialogOpen(false);\n      loadFlexMessages();\n    } catch (error) {\n      console.error('Error saving flex message:', error);\n      setSnackbar({ open: true, message: 'Failed to save flex message', severity: 'error' });\n    }\n  };\n\n  const handlePreview = (message: FlexMessage) => {\n    setPreviewMessage(message);\n    setPreviewDialogOpen(true);\n    setPreviewTabValue(0);\n  };\n\n  const handleOpenDesigner = () => {\n    setDesignerOpen(true);\n    \n    // Initialize designer with existing flex message data\n    if (formData.flex_message && Object.keys(formData.flex_message).length > 0) {\n      // Set selected container based on existing flex message type\n      if (formData.flex_message.type === 'bubble') {\n        setSelectedContainer('bubble');\n      } else if (formData.flex_message.type === 'carousel') {\n        setSelectedContainer('carousel');\n      }\n      \n      // Ensure all elements have unique IDs\n      const updatedFlexMessage = { ...formData.flex_message };\n      assignUniqueIdsToStructure(updatedFlexMessage);\n      \n      // Update formData with the structure that has unique IDs\n      setFormData({\n        ...formData,\n        flex_message: updatedFlexMessage\n      });\n      \n      // Extract and set selected components from existing structure\n      const allComponents = extractAllComponents(updatedFlexMessage);\n      setSelectedComponents(allComponents);\n    } else {\n      // For new flex messages, reset to default state\n      setSelectedContainer('');\n      setSelectedComponents([]);\n    }\n  };\n\n  const assignUniqueIdsToStructure = (structure: any) => {\n    if (!structure) return;\n    \n    // Add unique ID to this element if it doesn't have one\n    if (!structure.id && structure.type && structure.type !== 'bubble' && structure.type !== 'carousel') {\n      structure.id = `${structure.type}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    }\n    \n    // Recursively process contents\n    if (structure.contents && Array.isArray(structure.contents)) {\n      for (const item of structure.contents) {\n        assignUniqueIdsToStructure(item);\n      }\n    }\n    \n    // Recursively process body contents\n    if (structure.body && structure.body.contents && Array.isArray(structure.body.contents)) {\n      for (const item of structure.body.contents) {\n        assignUniqueIdsToStructure(item);\n      }\n    }\n    \n    // Recursively process blocks (header, hero, body, footer)\n    const blocks = ['header', 'hero', 'body', 'footer'];\n    for (const block of blocks) {\n      if (structure[block]) {\n        assignUniqueIdsToStructure(structure[block]);\n      }\n    }\n  };\n\n  const handleCloseDesigner = () => {\n    setDesignerOpen(false);\n  };\n\n  const handleSaveDesign = () => {\n    // Update the form data with the designed flex message\n    setFormData({\n      ...formData,\n      flex_message: formData.flex_message\n    });\n    \n    // Close the designer\n    setDesignerOpen(false);\n    \n    // Show success message\n    setSnackbar({\n      open: true,\n      message: 'Flex Message design saved successfully!',\n      severity: 'success'\n    });\n  };\n\n  const handleSelectContainer = (containerId: string) => {\n    const container = flexTemplates.containers.find(c => c.id === containerId);\n    if (container) {\n      setSelectedContainer(containerId);\n      \n      // Only reset if we're changing container type or if no existing data\n      const currentType = formData.flex_message?.type;\n      if (currentType !== containerId || !formData.flex_message || Object.keys(formData.flex_message).length === 0) {\n        setSelectedComponents([]); // Reset selected components when changing container\n        setFormData({\n          ...formData,\n          flex_message: container.template\n        });\n      }\n    }\n  };\n\n  const handleAddComponent = (componentId: string) => {\n    const component = flexTemplates.components.find(c => c.id === componentId);\n    if (component) {\n      const newComponent = {\n        ...component.template,\n        id: `${componentId}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n      };\n      \n      console.log('Adding component:', newComponent);\n      \n      // Add to flex message structure\n      const updatedFlexMessage = { ...formData.flex_message };\n      if (updatedFlexMessage.type === 'bubble' && updatedFlexMessage.body) {\n        if (!updatedFlexMessage.body.contents) {\n          updatedFlexMessage.body.contents = [];\n        }\n        updatedFlexMessage.body.contents.push(newComponent);\n      } else if (updatedFlexMessage.type === 'carousel') {\n        if (!updatedFlexMessage.contents) {\n          updatedFlexMessage.contents = [];\n        }\n        // For carousel, we need to add to the first bubble or create one\n        if (updatedFlexMessage.contents.length === 0) {\n          updatedFlexMessage.contents.push({\n            type: 'bubble',\n            body: {\n              type: 'box',\n              layout: 'vertical',\n              contents: [newComponent]\n            }\n          });\n        } else {\n          if (!updatedFlexMessage.contents[0].body.contents) {\n            updatedFlexMessage.contents[0].body.contents = [];\n          }\n          updatedFlexMessage.contents[0].body.contents.push(newComponent);\n        }\n      }\n      \n      // Update selected components to match the structure\n      const allComponents = extractAllComponents(updatedFlexMessage);\n      setSelectedComponents(allComponents);\n      \n    setFormData({\n        ...formData,\n        flex_message: updatedFlexMessage\n      });\n    }\n  };\n\n  const handleAddBlock = (blockId: string) => {\n    const block = flexTemplates.blocks.find(b => b.id === blockId);\n    if (block) {\n      const newBlock = {\n        ...block.template,\n        id: `${blockId}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n      };\n      \n      // Add block to bubble container\n      const updatedFlexMessage = { ...formData.flex_message };\n      if (updatedFlexMessage.type === 'bubble') {\n        // Add the block directly to the bubble\n        updatedFlexMessage[blockId] = newBlock;\n      }\n      \n      // Update selected components to match the structure\n      const allComponents = extractAllComponents(updatedFlexMessage);\n      setSelectedComponents(allComponents);\n      \n      setFormData({\n        ...formData,\n        flex_message: updatedFlexMessage\n      });\n    }\n  };\n\n  const extractAllComponents = (structure: any): any[] => {\n    const components: any[] = [];\n    \n    if (!structure) return components;\n    \n    // Helper function to add ID to component if missing\n    const addIdIfMissing = (component: any, index: number) => {\n      if (!component.id && component.type !== 'bubble' && component.type !== 'carousel') {\n        component.id = `${component.type}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}_${index}`;\n      }\n      return component;\n    };\n    \n    if (structure.type !== 'bubble' && structure.type !== 'carousel') {\n      components.push(addIdIfMissing(structure, components.length));\n    }\n    \n    if (structure.contents && Array.isArray(structure.contents)) {\n      for (let i = 0; i < structure.contents.length; i++) {\n        const item = structure.contents[i];\n        components.push(...extractAllComponents(item));\n      }\n    }\n    \n    if (structure.body && structure.body.contents && Array.isArray(structure.body.contents)) {\n      for (let i = 0; i < structure.body.contents.length; i++) {\n        const item = structure.body.contents[i];\n        components.push(...extractAllComponents(item));\n      }\n    }\n    \n    // Also check for blocks (header, hero, body, footer)\n    const blocks = ['header', 'hero', 'body', 'footer'];\n    for (const block of blocks) {\n      if (structure[block]) {\n        components.push(...extractAllComponents(structure[block]));\n      }\n    }\n    \n    return components;\n  };\n\n  const handleRemoveComponent = (componentId: string) => {\n    // Remove from flex message structure\n    const updatedFlexMessage = { ...formData.flex_message };\n    if (updatedFlexMessage.type === 'bubble' && updatedFlexMessage.body) {\n      updatedFlexMessage.body.contents = updatedFlexMessage.body.contents?.filter((c: any) => c.id !== componentId) || [];\n    } else if (updatedFlexMessage.type === 'carousel' && updatedFlexMessage.contents?.[0]?.body) {\n      updatedFlexMessage.contents[0].body.contents = updatedFlexMessage.contents[0].body.contents?.filter((c: any) => c.id !== componentId) || [];\n    }\n    \n    // Update selected components to match the structure\n    const allComponents = extractAllComponents(updatedFlexMessage);\n    setSelectedComponents(allComponents);\n    \n    setFormData({\n      ...formData,\n      flex_message: updatedFlexMessage\n    });\n  };\n\n  const handleSelectElement = (elementId: string) => {\n    console.log('Selecting element:', elementId);\n    setSelectedElement(elementId);\n    // Find the element in the structure\n    const element = findElementById(formData.flex_message, elementId);\n    console.log('Found element:', element);\n    if (element) {\n      setEditingElement(element);\n      setShowElementEditor(true);\n      } else {\n      console.log('Element not found for ID:', elementId);\n    }\n  };\n\n  const findElementById = (structure: any, elementId: string): any => {\n    if (!structure) return null;\n    \n    if (structure.id === elementId) return structure;\n    \n    if (structure.contents && Array.isArray(structure.contents)) {\n      for (const item of structure.contents) {\n        const found = findElementById(item, elementId);\n        if (found) return found;\n      }\n    }\n    \n    if (structure.body && structure.body.contents && Array.isArray(structure.body.contents)) {\n      for (const item of structure.body.contents) {\n        const found = findElementById(item, elementId);\n        if (found) return found;\n      }\n    }\n    \n    // Check for blocks (header, hero, body, footer)\n    const blocks = ['header', 'hero', 'body', 'footer'];\n    for (const block of blocks) {\n      if (structure[block]) {\n        const found = findElementById(structure[block], elementId);\n        if (found) return found;\n      }\n    }\n    \n    return null;\n  };\n\n  const handleUpdateElement = (elementId: string, updates: any) => {\n    const newFlexMessage = { ...formData.flex_message };\n    updateElementInStructure(newFlexMessage, elementId, updates);\n    \n    // Update selected components to match the structure\n    const allComponents = extractAllComponents(newFlexMessage);\n    setSelectedComponents(allComponents);\n    \n    setFormData({\n      ...formData,\n      flex_message: newFlexMessage\n    });\n    setShowElementEditor(false);\n    setEditingElement(null);\n    setSelectedElement(null);\n  };\n\n  const updateElementInStructure = (structure: any, elementId: string, updates: any): boolean => {\n    if (!structure) return false;\n    \n    if (structure.id === elementId) {\n      Object.assign(structure, updates);\n      return true;\n    }\n    \n    if (structure.contents && Array.isArray(structure.contents)) {\n      for (const item of structure.contents) {\n        if (updateElementInStructure(item, elementId, updates)) {\n          return true;\n        }\n      }\n    }\n    \n    if (structure.body && structure.body.contents && Array.isArray(structure.body.contents)) {\n      for (const item of structure.body.contents) {\n        if (updateElementInStructure(item, elementId, updates)) {\n          return true;\n        }\n      }\n    }\n    \n    // Check for blocks (header, hero, body, footer)\n    const blocks = ['header', 'hero', 'body', 'footer'];\n    for (const block of blocks) {\n      if (structure[block]) {\n        if (updateElementInStructure(structure[block], elementId, updates)) {\n          return true;\n        }\n      }\n    }\n    \n    return false;\n  };\n\n  const handleDeleteElement = (elementId: string) => {\n    const newFlexMessage = { ...formData.flex_message };\n    removeElementFromStructure(newFlexMessage, elementId);\n    \n    // Update selected components to match the structure\n    const allComponents = extractAllComponents(newFlexMessage);\n    setSelectedComponents(allComponents);\n    \n    setFormData({\n      ...formData,\n      flex_message: newFlexMessage\n    });\n    setShowElementEditor(false);\n    setEditingElement(null);\n  };\n\n  const removeElementFromStructure = (structure: any, elementId: string): boolean => {\n    if (!structure) return false;\n    \n    if (structure.contents && Array.isArray(structure.contents)) {\n      const index = structure.contents.findIndex((item: any) => item.id === elementId);\n      if (index !== -1) {\n        structure.contents.splice(index, 1);\n        return true;\n      }\n      for (const item of structure.contents) {\n        if (removeElementFromStructure(item, elementId)) {\n          return true;\n        }\n      }\n    }\n    \n    if (structure.body && structure.body.contents && Array.isArray(structure.body.contents)) {\n      const index = structure.body.contents.findIndex((item: any) => item.id === elementId);\n      if (index !== -1) {\n        structure.body.contents.splice(index, 1);\n        return true;\n      }\n      for (const item of structure.body.contents) {\n        if (removeElementFromStructure(item, elementId)) {\n          return true;\n        }\n      }\n    }\n    \n    // Check for blocks (header, hero, body, footer)\n    const blocks = ['header', 'hero', 'body', 'footer'];\n    for (const block of blocks) {\n      if (structure[block]) {\n        if (removeElementFromStructure(structure[block], elementId)) {\n          return true;\n        }\n      }\n    }\n    \n    return false;\n  };\n\n  const getTextSize = (size: string): string => {\n    switch (size) {\n      case 'xs': return '0.75rem';\n      case 'sm': return '0.875rem';\n      case 'md': return '1rem';\n      case 'lg': return '1.125rem';\n      case 'xl': return '1.25rem';\n      case 'xxl': return '1.5rem';\n      case '3xl': return '1.875rem';\n      default: return '1rem';\n    }\n  };\n\n  const getImageSize = (size: string): string => {\n    switch (size) {\n      case 'xs': return '40px';\n      case 'sm': return '50px';\n      case 'md': return '60px';\n      case 'lg': return '80px';\n      case 'xl': return '100px';\n      case 'xxl': return '120px';\n      case '3xl': return '150px';\n      case 'full': return '100%';\n      default: return '60px';\n    }\n  };\n\n  const getBubbleSize = (size: string): string => {\n    switch (size) {\n      case 'nano': return '200px';\n      case 'micro': return '250px';\n      case 'deca': return '300px';\n      case 'hecto': return '350px';\n      case 'kilo': return '400px';\n      case 'mega': return '450px';\n      case 'giga': return '500px';\n      default: return '450px';\n    }\n  };\n\n  const VisualFlexMessagePreview: React.FC<{ \n    flexMessage: any; \n    onElementClick?: (elementId: string) => void;\n    selectedElementId?: string | null;\n  }> = ({ flexMessage, onElementClick, selectedElementId }) => {\n    const renderFlexContent = (content: any, depth: number = 0): React.ReactNode => {\n      if (!content) return null;\n\n      const commonStyles = {\n        border: content.id === selectedElementId ? '2px solid #1976d2' : '1px solid #e0e0e0',\n        borderRadius: '8px',\n        padding: '8px',\n        margin: '4px 0',\n        backgroundColor: content.id === selectedElementId ? '#e3f2fd' : '#fafafa',\n        fontSize: '12px',\n        fontFamily: 'monospace',\n        cursor: onElementClick ? 'pointer' : 'default',\n        transition: 'all 0.2s ease',\n        '&:hover': onElementClick ? {\n          backgroundColor: '#f0f0f0',\n          borderColor: '#1976d2'\n        } : {}\n      };\n\n      const containerStyles = {\n        ...commonStyles,\n        backgroundColor: depth === 0 ? '#e3f2fd' : '#f5f5f5',\n        borderColor: depth === 0 ? '#2196f3' : '#e0e0e0'\n      };\n\n      switch (content.type) {\n        case 'bubble':\n    return (\n            <Box sx={containerStyles}>\n              <Typography variant=\"caption\" sx={{ color: '#666', display: 'block', mb: 1 }}>\n                ðŸ“¦ Bubble Container\n              </Typography>\n              {content.header && (\n                <Box sx={{ mb: 1 }}>\n                  <Typography variant=\"caption\" sx={{ color: '#666' }}>Header:</Typography>\n                  {renderFlexContent(content.header, depth + 1)}\n                </Box>\n              )}\n              {content.body && (\n                <Box sx={{ mb: 1 }}>\n                  <Typography variant=\"caption\" sx={{ color: '#666' }}>Body:</Typography>\n                  {renderFlexContent(content.body, depth + 1)}\n                </Box>\n              )}\n              {content.footer && (\n                <Box>\n                  <Typography variant=\"caption\" sx={{ color: '#666' }}>Footer:</Typography>\n                  {renderFlexContent(content.footer, depth + 1)}\n                </Box>\n              )}\n      </Box>\n    );\n\n        case 'box':\n  return (\n            <Box sx={containerStyles}>\n              <Typography variant=\"caption\" sx={{ color: '#666', display: 'block', mb: 1 }}>\n                ðŸ“¦ Box ({content.layout || 'vertical'})\n        </Typography>\n              {content.contents && Array.isArray(content.contents) && (\n                <Box sx={{ pl: 1 }}>\n                  {content.contents.map((item: any, index: number) => (\n                    <Box key={index} sx={{ mb: 0.5 }}>\n                      {renderFlexContent(item, depth + 1)}\n                    </Box>\n                  ))}\n                </Box>\n              )}\n            </Box>\n          );\n\n        case 'text':\n          console.log('Text preview - content:', content);\n          console.log('Text preview - content.text:', content.text);\n          return (\n            <Box \n              sx={commonStyles}\n              onClick={() => onElementClick && content.id && onElementClick(content.id)}\n            >\n              <Typography variant=\"caption\" sx={{ color: '#666', display: 'block', mb: 0.5 }}>\n                ðŸ“ Text ({content.size || 'md'})\n              </Typography>\n              <Typography \n                variant=\"body2\" \n                sx={{ \n                  fontWeight: content.weight === 'bold' ? 'bold' : 'normal',\n                  fontSize: getTextSize(content.size),\n                  color: content.color || '#000',\n                  textAlign: content.align || 'start',\n                  whiteSpace: content.wrap ? 'pre-wrap' : 'nowrap',\n                  overflow: content.wrap ? 'visible' : 'hidden',\n                  textOverflow: content.wrap ? 'clip' : 'ellipsis',\n                  lineHeight: content.lineSpacing || 'normal',\n                  maxHeight: content.maxLines ? `${content.maxLines * 1.2}em` : 'none',\n                  position: content.position || 'relative',\n                  top: content.position === 'absolute' ? content.offsetTop : 'auto',\n                  bottom: content.position === 'absolute' ? content.offsetBottom : 'auto',\n                  left: content.position === 'absolute' ? content.offsetStart : 'auto',\n                  right: content.position === 'absolute' ? content.offsetEnd : 'auto',\n                  flex: content.flex || 0,\n                  margin: content.margin === 'none' ? 0 : content.margin === 'xs' ? '4px' : \n                         content.margin === 'sm' ? '8px' : content.margin === 'md' ? '12px' : \n                         content.margin === 'lg' ? '16px' : content.margin === 'xl' ? '20px' : \n                         content.margin === 'xxl' ? '24px' : 0\n                }}\n              >\n                {content.text || 'Sample text'} {/* Debug: content.text = \"${content.text}\" */}\n              </Typography>\n              <Typography variant=\"caption\" sx={{ color: '#999', display: 'block', mt: 0.5 }}>\n                {content.wrap && 'Wrapped'} {content.maxLines > 0 && `${content.maxLines} lines max`} \n                {content.position === 'absolute' && ' (Absolute)'} {content.flex > 0 && `Flex: ${content.flex}`}\n              </Typography>\n            </Box>\n          );\n\n        case 'button':\n          return (\n            <Box \n              sx={commonStyles}\n              onClick={() => onElementClick && content.id && onElementClick(content.id)}\n            >\n              <Typography variant=\"caption\" sx={{ color: '#666', display: 'block', mb: 0.5 }}>\n                ðŸ”˜ Button ({content.action?.type || 'postback'})\n              </Typography>\n        <Button\n                variant={content.style === 'primary' ? 'contained' : 'outlined'}\n                size=\"small\"\n                sx={{ \n                  fontSize: '0.75rem',\n                  minWidth: '80px',\n                  bgcolor: content.color || undefined,\n                  height: content.height === 'md' ? '40px' : '32px'\n                }}\n              >\n                {content.action?.label || 'Button'}\n        </Button>\n              <Typography variant=\"caption\" sx={{ color: '#999', display: 'block', mt: 0.5 }}>\n                {content.action?.type === 'postback' && `Data: ${content.action?.data}`}\n                {content.action?.type === 'message' && `Text: ${content.action?.text}`}\n                {content.action?.type === 'uri' && `URL: ${content.action?.uri}`}\n                {content.action?.type === 'datetimepicker' && `Mode: ${content.action?.mode}`}\n                {content.action?.type === 'camera' && 'Camera Action'}\n                {content.action?.type === 'cameraRoll' && 'Camera Roll Action'}\n                {content.action?.type === 'location' && 'Location Action'}\n                {content.action?.type === 'richmenuswitch' && `Menu: ${content.action?.richMenuAliasId}`}\n                {content.action?.type === 'clipboard' && `Copy: ${content.action?.text}`}\n              </Typography>\n      </Box>\n          );\n\n        case 'image':\n          return (\n            <Box \n              sx={commonStyles}\n              onClick={() => onElementClick && content.id && onElementClick(content.id)}\n            >\n              <Typography variant=\"caption\" sx={{ color: '#666', display: 'block', mb: 0.5 }}>\n                ðŸ–¼ï¸ Image ({content.size || 'md'})\n              </Typography>\n              <Box \n                sx={{ \n                  width: getImageSize(content.size),\n                  height: getImageSize(content.size),\n                  bgcolor: '#e0e0e0', \n                  borderRadius: '4px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  fontSize: '0.75rem',\n                  color: '#666',\n                  aspectRatio: content.aspectRatio || '1:1'\n                }}\n              >\n                IMAGE\n              </Box>\n            </Box>\n          );\n\n        case 'icon':\n          return (\n            <Box \n              sx={commonStyles}\n              onClick={() => onElementClick && content.id && onElementClick(content.id)}\n            >\n              <Typography variant=\"caption\" sx={{ color: '#666', display: 'block', mb: 0.5 }}>\n                ðŸ˜Š Icon ({content.size || 'md'})\n              </Typography>\n              <Box \n                sx={{ \n                  width: getImageSize(content.size),\n                  height: getImageSize(content.size),\n                  bgcolor: '#e0e0e0', \n                  borderRadius: '50%',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  fontSize: getTextSize(content.size)\n                }}\n              >\n                ðŸ˜Š\n              </Box>\n            </Box>\n          );\n\n        case 'video':\n          return (\n            <Box \n              sx={commonStyles}\n              onClick={() => onElementClick && content.id && onElementClick(content.id)}\n            >\n              <Typography variant=\"caption\" sx={{ color: '#666', display: 'block', mb: 0.5 }}>\n                ðŸŽ¥ Video\n              </Typography>\n              <Box \n                sx={{ \n                  width: '200px',\n                  height: '120px',\n                  bgcolor: '#e0e0e0', \n                  borderRadius: '4px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  fontSize: '0.75rem',\n                  color: '#666',\n                  position: 'relative'\n                }}\n              >\n                <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n                  <Typography variant=\"caption\" sx={{ fontSize: '2rem', mb: 1 }}>ðŸŽ¥</Typography>\n                  <Typography variant=\"caption\">Video Content</Typography>\n                </Box>\n              </Box>\n              <Typography variant=\"caption\" sx={{ color: '#999', display: 'block', mt: 0.5 }}>\n                URL: {content.url || 'Not set'} | Preview: {content.previewUrl || 'Not set'}\n              </Typography>\n            </Box>\n          );\n\n        case 'separator':\n          return (\n            <Box \n              sx={commonStyles}\n              onClick={() => onElementClick && content.id && onElementClick(content.id)}\n            >\n              <Typography variant=\"caption\" sx={{ color: '#666', display: 'block', mb: 0.5 }}>\n                âž– Separator\n                  </Typography>\n              <Box \n                sx={{ \n                  height: '1px',\n                  bgcolor: '#e0e0e0',\n                  width: '100%',\n                  my: 1\n                }}\n              />\n                </Box>\n          );\n\n        case 'spacer':\n          return (\n            <Box \n              sx={commonStyles}\n              onClick={() => onElementClick && content.id && onElementClick(content.id)}\n            >\n              <Typography variant=\"caption\" sx={{ color: '#666', display: 'block', mb: 0.5 }}>\n                ðŸ“ Spacer ({content.size || 'md'})\n              </Typography>\n              <Box \n                sx={{ \n                  height: content.size === 'xs' ? '4px' : content.size === 'sm' ? '8px' : \n                         content.size === 'md' ? '12px' : content.size === 'lg' ? '16px' : \n                         content.size === 'xl' ? '20px' : content.size === 'xxl' ? '24px' : '12px',\n                  bgcolor: '#f0f0f0',\n                  width: '100%',\n                  border: '1px dashed #ccc'\n                }}\n              />\n            </Box>\n          );\n\n        case 'filler':\n          return (\n            <Box \n              sx={commonStyles}\n              onClick={() => onElementClick && content.id && onElementClick(content.id)}\n            >\n              <Typography variant=\"caption\" sx={{ color: '#666', display: 'block', mb: 0.5 }}>\n                â¬œ Filler (Deprecated) - Flex: {content.flex || 1}\n                            </Typography>\n              <Box \n                sx={{ \n                  height: '20px',\n                  bgcolor: '#fff3cd',\n                  width: '100%',\n                  border: '1px dashed #ffc107',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  fontSize: '0.75rem',\n                  color: '#856404'\n                }}\n              >\n                FILLER\n              </Box>\n            </Box>\n          );\n\n        default:\n          return (\n            <Box sx={commonStyles}>\n              <Typography variant=\"caption\" sx={{ color: '#666' }}>\n                Unknown: {content.type}\n                            </Typography>\n            </Box>\n          );\n      }\n    };\n\n    return (\n      <Box sx={{ p: 2, bgcolor: '#f8f9fa', borderRadius: 1, border: '1px solid #e0e0e0' }}>\n        <Typography variant=\"subtitle2\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <SmartphoneIcon />\n          Visual Preview\n                            </Typography>\n        <Box sx={{ maxHeight: 400, overflow: 'auto' }}>\n          {flexMessage?.type === 'bubble' ? (\n            <Box sx={{ \n              border: '1px solid #ccc', \n              borderRadius: 2, \n              p: 2, \n              bgcolor: 'white',\n              maxWidth: getBubbleSize(flexMessage.size)\n            }}>\n              {/* Header Block */}\n              {flexMessage.header && renderFlexContent(flexMessage.header)}\n              \n              {/* Hero Block */}\n              {flexMessage.hero && renderFlexContent(flexMessage.hero)}\n              \n              {/* Body Block */}\n              {flexMessage.body && renderFlexContent(flexMessage.body)}\n              \n              {/* Footer Block */}\n              {flexMessage.footer && renderFlexContent(flexMessage.footer)}\n            </Box>\n          ) : flexMessage?.contents ? (\n            renderFlexContent(flexMessage.contents)\n          ) : (\n                            <Typography variant=\"body2\" color=\"text.secondary\">\n              No flex message content to preview\n                            </Typography>\n          )}\n        </Box>\n      </Box>\n    );\n  };\n\n  // Element Editor Component\n  const ElementEditor: React.FC<{\n    element: any;\n    onUpdate: (updates: any) => void;\n    onDelete: () => void;\n    onClose: () => void;\n  }> = ({ element, onUpdate, onDelete, onClose }) => {\n    const [formData, setFormData] = useState<any>({});\n    const [initialized, setInitialized] = useState(false);\n\n    // Initialize formData only once when element is first set\n    useEffect(() => {\n      console.log('ElementEditor received element:', element);\n      if (element && !initialized) {\n        const newFormData = { ...element };\n        console.log('Setting formData to:', newFormData);\n        setFormData(newFormData);\n        setInitialized(true);\n      }\n    }, [element, initialized]);\n\n    // Reset initialized state when element changes (for different elements)\n    useEffect(() => {\n      if (element && initialized) {\n        // Check if this is a different element (different ID)\n        if (formData.id !== element.id) {\n          console.log('Different element detected, resetting formData');\n          setFormData({ ...element });\n        }\n      }\n    }, [element?.id, initialized, formData.id]);\n\n    const handleSave = () => {\n      onUpdate(formData);\n    };\n\n    const renderTextEditor = () => (\n      <Box>\n        <TextField\n          fullWidth\n          label=\"Text Content\"\n          value={(formData.text !== undefined ? formData : element).text || ''}\n          onChange={(e) => setFormData({ ...formData, text: e.target.value })}\n          margin=\"normal\"\n          multiline\n          rows={3}\n        />\n        \n        {/* Text Styling */}\n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Size</InputLabel>\n          <Select\n            value={formData.size || 'md'}\n            onChange={(e) => setFormData({ ...formData, size: e.target.value })}\n            label=\"Size\"\n          >\n            <MenuItem value=\"xs\">Extra Small (xs)</MenuItem>\n            <MenuItem value=\"sm\">Small (sm)</MenuItem>\n            <MenuItem value=\"md\">Medium (md)</MenuItem>\n            <MenuItem value=\"lg\">Large (lg)</MenuItem>\n            <MenuItem value=\"xl\">Extra Large (xl)</MenuItem>\n            <MenuItem value=\"xxl\">2X Large (xxl)</MenuItem>\n            <MenuItem value=\"3xl\">3X Large (3xl)</MenuItem>\n          </Select>\n        </FormControl>\n        \n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Weight</InputLabel>\n          <Select\n            value={formData.weight || 'regular'}\n            onChange={(e) => setFormData({ ...formData, weight: e.target.value })}\n            label=\"Weight\"\n          >\n            <MenuItem value=\"regular\">Regular</MenuItem>\n            <MenuItem value=\"bold\">Bold</MenuItem>\n          </Select>\n        </FormControl>\n        \n        <TextField\n          fullWidth\n          label=\"Color\"\n          value={formData.color || '#000000'}\n          onChange={(e) => setFormData({ ...formData, color: e.target.value })}\n          margin=\"normal\"\n          type=\"color\"\n        />\n        \n        {/* Text Layout */}\n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Alignment</InputLabel>\n          <Select\n            value={formData.align || 'start'}\n            onChange={(e) => setFormData({ ...formData, align: e.target.value })}\n            label=\"Alignment\"\n          >\n            <MenuItem value=\"start\">Start</MenuItem>\n            <MenuItem value=\"end\">End</MenuItem>\n            <MenuItem value=\"center\">Center</MenuItem>\n          </Select>\n        </FormControl>\n        \n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Gravity</InputLabel>\n          <Select\n            value={formData.gravity || 'top'}\n            onChange={(e) => setFormData({ ...formData, gravity: e.target.value })}\n            label=\"Gravity\"\n          >\n            <MenuItem value=\"top\">Top</MenuItem>\n            <MenuItem value=\"bottom\">Bottom</MenuItem>\n            <MenuItem value=\"center\">Center</MenuItem>\n          </Select>\n        </FormControl>\n        \n        {/* Text Wrapping */}\n        <FormControlLabel\n          control={\n            <Switch\n              checked={formData.wrap || false}\n              onChange={(e) => setFormData({ ...formData, wrap: e.target.checked })}\n            />\n          }\n          label=\"Text Wrapping\"\n        />\n        \n        {formData.wrap && (\n          <TextField\n            fullWidth\n            label=\"Line Spacing (e.g., 20px)\"\n            value={formData.lineSpacing || ''}\n            onChange={(e) => setFormData({ ...formData, lineSpacing: e.target.value })}\n            margin=\"normal\"\n            helperText=\"Line spacing for wrapped text (e.g., 20px)\"\n          />\n        )}\n        \n                <TextField\n                  fullWidth\n          label=\"Max Lines\"\n          value={formData.maxLines || 0}\n          onChange={(e) => setFormData({ ...formData, maxLines: parseInt(e.target.value) || 0 })}\n                  margin=\"normal\"\n          type=\"number\"\n          inputProps={{ min: 0 }}\n          helperText=\"0 = no limit, 1+ = maximum lines to show\"\n        />\n        \n        {/* Layout Properties */}\n        <TextField\n          fullWidth\n          label=\"Flex\"\n          value={formData.flex || 0}\n          onChange={(e) => setFormData({ ...formData, flex: parseInt(e.target.value) || 0 })}\n          margin=\"normal\"\n          type=\"number\"\n          inputProps={{ min: 0, max: 10 }}\n          helperText=\"Flex ratio (0-10)\"\n        />\n        \n                <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Margin</InputLabel>\n                  <Select\n            value={formData.margin || 'none'}\n            onChange={(e) => setFormData({ ...formData, margin: e.target.value })}\n            label=\"Margin\"\n          >\n            <MenuItem value=\"none\">None</MenuItem>\n            <MenuItem value=\"xs\">Extra Small</MenuItem>\n            <MenuItem value=\"sm\">Small</MenuItem>\n            <MenuItem value=\"md\">Medium</MenuItem>\n            <MenuItem value=\"lg\">Large</MenuItem>\n            <MenuItem value=\"xl\">Extra Large</MenuItem>\n            <MenuItem value=\"xxl\">2X Large</MenuItem>\n                  </Select>\n                </FormControl>\n        \n        {/* Position Properties */}\n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Position</InputLabel>\n          <Select\n            value={formData.position || 'relative'}\n            onChange={(e) => setFormData({ ...formData, position: e.target.value })}\n            label=\"Position\"\n          >\n            <MenuItem value=\"relative\">Relative</MenuItem>\n            <MenuItem value=\"absolute\">Absolute</MenuItem>\n          </Select>\n        </FormControl>\n        \n        {formData.position === 'absolute' && (\n          <>\n                <TextField\n                  fullWidth\n              label=\"Offset Top (e.g., 0px, 10px)\"\n              value={formData.offsetTop || '0px'}\n              onChange={(e) => setFormData({ ...formData, offsetTop: e.target.value })}\n                  margin=\"normal\"\n              helperText=\"Distance from top\"\n                />\n                <TextField\n                  fullWidth\n              label=\"Offset Bottom (e.g., 0px, 10px)\"\n              value={formData.offsetBottom || '0px'}\n              onChange={(e) => setFormData({ ...formData, offsetBottom: e.target.value })}\n                  margin=\"normal\"\n              helperText=\"Distance from bottom\"\n            />\n            <TextField\n              fullWidth\n              label=\"Offset Start (e.g., 0px, 10px)\"\n              value={formData.offsetStart || '0px'}\n              onChange={(e) => setFormData({ ...formData, offsetStart: e.target.value })}\n              margin=\"normal\"\n              helperText=\"Distance from start\"\n            />\n            <TextField\n              fullWidth\n              label=\"Offset End (e.g., 0px, 10px)\"\n              value={formData.offsetEnd || '0px'}\n              onChange={(e) => setFormData({ ...formData, offsetEnd: e.target.value })}\n              margin=\"normal\"\n              helperText=\"Distance from end\"\n            />\n          </>\n        )}\n        \n        {/* Text Adjustment */}\n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Adjust Mode</InputLabel>\n          <Select\n            value={formData.adjustMode || 'shrink-to-fit'}\n            onChange={(e) => setFormData({ ...formData, adjustMode: e.target.value })}\n            label=\"Adjust Mode\"\n          >\n            <MenuItem value=\"shrink-to-fit\">Shrink to Fit</MenuItem>\n            <MenuItem value=\"none\">None</MenuItem>\n          </Select>\n        </FormControl>\n        \n                <FormControlLabel\n                  control={\n                    <Switch\n              checked={formData.scaling || false}\n              onChange={(e) => setFormData({ ...formData, scaling: e.target.checked })}\n            />\n          }\n          label=\"Text Scaling\"\n        />\n      </Box>\n    );\n\n    const renderButtonEditor = () => (\n      <Box>\n        <TextField\n          fullWidth\n          label=\"Button Label\"\n          value={formData.action?.label || ''}\n          onChange={(e) => setFormData({ \n            ...formData, \n            action: { ...formData.action, label: e.target.value }\n          })}\n          margin=\"normal\"\n        />\n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Button Style</InputLabel>\n          <Select\n            value={formData.style || 'primary'}\n            onChange={(e) => setFormData({ ...formData, style: e.target.value })}\n            label=\"Button Style\"\n          >\n            <MenuItem value=\"primary\">Primary</MenuItem>\n            <MenuItem value=\"secondary\">Secondary</MenuItem>\n            <MenuItem value=\"link\">Link</MenuItem>\n          </Select>\n        </FormControl>\n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Action Type</InputLabel>\n          <Select\n            value={formData.action?.type || 'postback'}\n            onChange={(e) => {\n              const actionType = e.target.value;\n              let newAction: any = { type: actionType };\n              \n              // Set default properties based on action type\n              switch (actionType) {\n                case 'postback':\n                  newAction = { ...newAction, label: formData.action?.label || 'Button', data: formData.action?.data || 'action=button' };\n                  break;\n                case 'message':\n                  newAction = { ...newAction, label: formData.action?.label || 'Button', text: formData.action?.text || 'Hello' };\n                  break;\n                case 'uri':\n                  newAction = { ...newAction, label: formData.action?.label || 'Button', uri: formData.action?.uri || 'https://example.com' };\n                  break;\n                case 'datetimepicker':\n                  newAction = { ...newAction, label: formData.action?.label || 'Select Date', data: formData.action?.data || 'action=datetime', mode: 'date' };\n                  break;\n                case 'camera':\n                  newAction = { ...newAction, label: formData.action?.label || 'Camera' };\n                  break;\n                case 'cameraRoll':\n                  newAction = { ...newAction, label: formData.action?.label || 'Camera Roll' };\n                  break;\n                case 'location':\n                  newAction = { ...newAction, label: formData.action?.label || 'Location' };\n                  break;\n                case 'richmenuswitch':\n                  newAction = { ...newAction, label: formData.action?.label || 'Switch Menu', richMenuAliasId: formData.action?.richMenuAliasId || 'menu1', data: formData.action?.data || 'action=switch' };\n                  break;\n                case 'clipboard':\n                  newAction = { ...newAction, label: formData.action?.label || 'Copy', text: formData.action?.text || 'Text to copy' };\n                  break;\n              }\n              \n              setFormData({ \n                ...formData, \n                action: newAction\n              });\n            }}\n            label=\"Action Type\"\n          >\n            <MenuItem value=\"postback\">Postback</MenuItem>\n            <MenuItem value=\"message\">Message</MenuItem>\n            <MenuItem value=\"uri\">URI</MenuItem>\n            <MenuItem value=\"datetimepicker\">Date/Time Picker</MenuItem>\n            <MenuItem value=\"camera\">Camera</MenuItem>\n            <MenuItem value=\"cameraRoll\">Camera Roll</MenuItem>\n            <MenuItem value=\"location\">Location</MenuItem>\n            <MenuItem value=\"richmenuswitch\">Rich Menu Switch</MenuItem>\n            <MenuItem value=\"clipboard\">Clipboard</MenuItem>\n          </Select>\n        </FormControl>\n        \n        {/* Action-specific fields */}\n        {formData.action?.type === 'postback' && (\n          <TextField\n            fullWidth\n            label=\"Postback Data\"\n            value={formData.action?.data || ''}\n            onChange={(e) => setFormData({ \n              ...formData, \n              action: { ...formData.action, data: e.target.value }\n            })}\n            margin=\"normal\"\n            helperText=\"Data sent when button is pressed\"\n          />\n        )}\n        \n        {formData.action?.type === 'message' && (\n          <TextField\n            fullWidth\n            label=\"Message Text\"\n            value={formData.action?.text || ''}\n            onChange={(e) => setFormData({ \n              ...formData, \n              action: { ...formData.action, text: e.target.value }\n            })}\n            margin=\"normal\"\n            helperText=\"Text message sent when button is pressed\"\n          />\n        )}\n        \n        {formData.action?.type === 'uri' && (\n          <TextField\n            fullWidth\n            label=\"URI\"\n            value={formData.action?.uri || ''}\n            onChange={(e) => setFormData({ \n              ...formData, \n              action: { ...formData.action, uri: e.target.value }\n            })}\n            margin=\"normal\"\n            helperText=\"URL to open when button is pressed\"\n          />\n        )}\n        \n        {formData.action?.type === 'datetimepicker' && (\n          <>\n            <TextField\n              fullWidth\n              label=\"Datetime Data\"\n              value={formData.action?.data || ''}\n              onChange={(e) => setFormData({ \n                ...formData, \n                action: { ...formData.action, data: e.target.value }\n              })}\n              margin=\"normal\"\n              helperText=\"Data sent when date/time is selected\"\n            />\n            <FormControl fullWidth margin=\"normal\">\n              <InputLabel>Mode</InputLabel>\n              <Select\n                value={formData.action?.mode || 'date'}\n                onChange={(e) => setFormData({ \n                  ...formData, \n                  action: { ...formData.action, mode: e.target.value }\n                })}\n                label=\"Mode\"\n              >\n                <MenuItem value=\"date\">Date</MenuItem>\n                <MenuItem value=\"time\">Time</MenuItem>\n                <MenuItem value=\"datetime\">Date & Time</MenuItem>\n              </Select>\n            </FormControl>\n          </>\n        )}\n        \n        {formData.action?.type === 'richmenuswitch' && (\n          <>\n            <TextField\n              fullWidth\n              label=\"Rich Menu Alias ID\"\n              value={formData.action?.richMenuAliasId || ''}\n              onChange={(e) => setFormData({ \n                ...formData, \n                action: { ...formData.action, richMenuAliasId: e.target.value }\n              })}\n              margin=\"normal\"\n              helperText=\"Rich menu alias ID to switch to\"\n            />\n            <TextField\n              fullWidth\n              label=\"Switch Data\"\n              value={formData.action?.data || ''}\n              onChange={(e) => setFormData({ \n                ...formData, \n                action: { ...formData.action, data: e.target.value }\n              })}\n              margin=\"normal\"\n              helperText=\"Data sent when menu is switched\"\n            />\n          </>\n        )}\n        \n        {formData.action?.type === 'clipboard' && (\n          <TextField\n            fullWidth\n            label=\"Clipboard Text\"\n            value={formData.action?.text || ''}\n            onChange={(e) => setFormData({ \n              ...formData, \n              action: { ...formData.action, text: e.target.value }\n            })}\n            margin=\"normal\"\n            helperText=\"Text to copy to clipboard\"\n          />\n        )}\n        \n        <TextField\n          fullWidth\n          label=\"Button Color\"\n          value={formData.color || '#000000'}\n          onChange={(e) => setFormData({ ...formData, color: e.target.value })}\n          margin=\"normal\"\n          type=\"color\"\n        />\n        \n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Height</InputLabel>\n          <Select\n            value={formData.height || 'sm'}\n            onChange={(e) => setFormData({ ...formData, height: e.target.value })}\n            label=\"Height\"\n          >\n            <MenuItem value=\"sm\">Small</MenuItem>\n            <MenuItem value=\"md\">Medium</MenuItem>\n          </Select>\n        </FormControl>\n        \n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Gravity</InputLabel>\n          <Select\n            value={formData.gravity || 'top'}\n            onChange={(e) => setFormData({ ...formData, gravity: e.target.value })}\n            label=\"Gravity\"\n          >\n            <MenuItem value=\"top\">Top</MenuItem>\n            <MenuItem value=\"bottom\">Bottom</MenuItem>\n            <MenuItem value=\"center\">Center</MenuItem>\n          </Select>\n        </FormControl>\n        \n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Margin</InputLabel>\n          <Select\n            value={formData.margin || 'none'}\n            onChange={(e) => setFormData({ ...formData, margin: e.target.value })}\n            label=\"Margin\"\n          >\n            <MenuItem value=\"none\">None</MenuItem>\n            <MenuItem value=\"xs\">Extra Small</MenuItem>\n            <MenuItem value=\"sm\">Small</MenuItem>\n            <MenuItem value=\"md\">Medium</MenuItem>\n            <MenuItem value=\"lg\">Large</MenuItem>\n            <MenuItem value=\"xl\">Extra Large</MenuItem>\n            <MenuItem value=\"xxl\">2X Large</MenuItem>\n          </Select>\n        </FormControl>\n        \n        <TextField\n          fullWidth\n          label=\"Flex\"\n          value={formData.flex || 0}\n          onChange={(e) => setFormData({ ...formData, flex: parseInt(e.target.value) || 0 })}\n          margin=\"normal\"\n          type=\"number\"\n          inputProps={{ min: 0, max: 10 }}\n          helperText=\"Flex ratio (0-10)\"\n        />\n      </Box>\n    );\n\n    const renderImageEditor = () => (\n      <Box>\n        <Box sx={{ display: 'flex', gap: 1, mb: 2 }}>\n          <TextField\n            fullWidth\n            label=\"Image URL\"\n            value={formData.url || ''}\n            onChange={(e) => setFormData({ ...formData, url: e.target.value })}\n            margin=\"normal\"\n            helperText=\"Enter image URL or use upload button\"\n          />\n          <Button\n            variant=\"outlined\"\n            onClick={() => {\n              console.log('Opening image upload dialog...');\n              setFileUploadDialog({\n                open: true,\n                fileType: 'image',\n                onSelect: (fileData) => {\n                  console.log('Image selected:', fileData);\n                  const updatedFormData = { ...formData, url: fileData.url };\n                  setFormData(updatedFormData);\n                  // Also update the editingElement to persist the change\n                  setEditingElement(updatedFormData);\n                  setSnackbar({\n                    open: true,\n                    message: `Image uploaded successfully: ${fileData.filename}`,\n                    severity: 'success'\n                  });\n                }\n              });\n            }}\n            sx={{ mt: 1, minWidth: '120px' }}\n          >\n            Upload Image\n          </Button>\n        </Box>\n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Size</InputLabel>\n          <Select\n            value={formData.size || 'md'}\n            onChange={(e) => setFormData({ ...formData, size: e.target.value })}\n            label=\"Size\"\n          >\n            <MenuItem value=\"xs\">Extra Small (xs)</MenuItem>\n            <MenuItem value=\"sm\">Small (sm)</MenuItem>\n            <MenuItem value=\"md\">Medium (md)</MenuItem>\n            <MenuItem value=\"lg\">Large (lg)</MenuItem>\n            <MenuItem value=\"xl\">Extra Large (xl)</MenuItem>\n            <MenuItem value=\"xxl\">2X Large (xxl)</MenuItem>\n            <MenuItem value=\"3xl\">3X Large (3xl)</MenuItem>\n            <MenuItem value=\"full\">Full Width</MenuItem>\n          </Select>\n        </FormControl>\n        <TextField\n          fullWidth\n          label=\"Aspect Ratio (e.g., 2:1, 1:1, 4:3)\"\n          value={formData.aspectRatio || ''}\n          onChange={(e) => setFormData({ ...formData, aspectRatio: e.target.value })}\n          margin=\"normal\"\n          helperText=\"Aspect ratio for the image (e.g., 2:1, 1:1, 4:3)\"\n        />\n                    </Box>\n    );\n\n    const renderIconEditor = () => (\n      <Box>\n        <Box sx={{ display: 'flex', gap: 1, mb: 2 }}>\n          <TextField\n            fullWidth\n            label=\"Icon URL\"\n            value={formData.url || ''}\n            onChange={(e) => setFormData({ ...formData, url: e.target.value })}\n            margin=\"normal\"\n            helperText=\"Enter icon URL or use upload button\"\n          />\n          <Button\n            variant=\"outlined\"\n            onClick={() => {\n              console.log('Opening icon upload dialog...');\n              setFileUploadDialog({\n                open: true,\n                fileType: 'image',\n                onSelect: (fileData) => {\n                  console.log('Icon selected:', fileData);\n                  const updatedFormData = { ...formData, url: fileData.url };\n                  setFormData(updatedFormData);\n                  // Also update the editingElement to persist the change\n                  setEditingElement(updatedFormData);\n                  setSnackbar({\n                    open: true,\n                    message: `Icon uploaded successfully: ${fileData.filename}`,\n                    severity: 'success'\n                  });\n                }\n              });\n            }}\n            sx={{ mt: 1, minWidth: '120px' }}\n          >\n            Upload Icon\n          </Button>\n        </Box>\n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Size</InputLabel>\n          <Select\n            value={formData.size || 'md'}\n            onChange={(e) => setFormData({ ...formData, size: e.target.value })}\n            label=\"Size\"\n          >\n            <MenuItem value=\"xs\">Extra Small (xs)</MenuItem>\n            <MenuItem value=\"sm\">Small (sm)</MenuItem>\n            <MenuItem value=\"md\">Medium (md)</MenuItem>\n            <MenuItem value=\"lg\">Large (lg)</MenuItem>\n            <MenuItem value=\"xl\">Extra Large (xl)</MenuItem>\n            <MenuItem value=\"xxl\">2X Large (xxl)</MenuItem>\n            <MenuItem value=\"3xl\">3X Large (3xl)</MenuItem>\n          </Select>\n        </FormControl>\n                  </Box>\n    );\n\n    const renderBoxEditor = () => (\n      <Box>\n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Layout</InputLabel>\n          <Select\n            value={formData.layout || 'vertical'}\n            onChange={(e) => setFormData({ ...formData, layout: e.target.value })}\n            label=\"Layout\"\n          >\n            <MenuItem value=\"vertical\">Vertical</MenuItem>\n            <MenuItem value=\"horizontal\">Horizontal</MenuItem>\n            <MenuItem value=\"baseline\">Baseline</MenuItem>\n          </Select>\n        </FormControl>\n        <TextField\n          fullWidth\n          label=\"Background Color\"\n          value={formData.backgroundColor || ''}\n          onChange={(e) => setFormData({ ...formData, backgroundColor: e.target.value })}\n          margin=\"normal\"\n          type=\"color\"\n        />\n      </Box>\n    );\n\n    const renderBubbleEditor = () => (\n      <Box>\n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Bubble Size</InputLabel>\n          <Select\n            value={formData.size || 'mega'}\n            onChange={(e) => setFormData({ ...formData, size: e.target.value })}\n            label=\"Bubble Size\"\n          >\n            <MenuItem value=\"nano\">Nano</MenuItem>\n            <MenuItem value=\"micro\">Micro</MenuItem>\n            <MenuItem value=\"deca\">Deca</MenuItem>\n            <MenuItem value=\"hecto\">Hecto</MenuItem>\n            <MenuItem value=\"kilo\">Kilo</MenuItem>\n            <MenuItem value=\"mega\">Mega (Default)</MenuItem>\n            <MenuItem value=\"giga\">Giga</MenuItem>\n          </Select>\n        </FormControl>\n        <TextField\n          fullWidth\n          label=\"Background Color\"\n          value={formData.backgroundColor || ''}\n          onChange={(e) => setFormData({ ...formData, backgroundColor: e.target.value })}\n          margin=\"normal\"\n          type=\"color\"\n        />\n      </Box>\n    );\n\n    const renderVideoEditor = () => (\n      <Box>\n        <Box sx={{ display: 'flex', gap: 1, mb: 2 }}>\n          <TextField\n            fullWidth\n            label=\"Video URL (MP4)\"\n            value={formData.url || ''}\n            onChange={(e) => setFormData({ ...formData, url: e.target.value })}\n            margin=\"normal\"\n            helperText=\"Must be a valid MP4 video URL\"\n          />\n          <Button\n            variant=\"outlined\"\n            onClick={() => {\n              console.log('Opening video upload dialog...');\n              setFileUploadDialog({\n                open: true,\n                fileType: 'video',\n                onSelect: (fileData) => {\n                  console.log('Video selected:', fileData);\n                  const updatedFormData = { \n                    ...formData, \n                    url: fileData.url,\n                    previewUrl: fileData.previewUrl || formData.previewUrl\n                  };\n                  setFormData(updatedFormData);\n                  // Also update the editingElement to persist the change\n                  setEditingElement(updatedFormData);\n                  setSnackbar({\n                    open: true,\n                    message: `Video uploaded successfully: ${fileData.filename}`,\n                    severity: 'success'\n                  });\n                }\n              });\n            }}\n            sx={{ mt: 1, minWidth: '120px' }}\n          >\n            Upload Video\n          </Button>\n        </Box>\n        <Box sx={{ display: 'flex', gap: 1, mb: 2 }}>\n          <TextField\n            fullWidth\n            label=\"Preview Image URL\"\n            value={formData.previewUrl || ''}\n            onChange={(e) => setFormData({ ...formData, previewUrl: e.target.value })}\n            margin=\"normal\"\n            helperText=\"Preview image shown before video plays\"\n          />\n          <Button\n            variant=\"outlined\"\n            onClick={() => {\n              console.log('Opening preview image upload dialog...');\n              setFileUploadDialog({\n                open: true,\n                fileType: 'image',\n                onSelect: (fileData) => {\n                  console.log('Preview image selected:', fileData);\n                  const updatedFormData = { ...formData, previewUrl: fileData.url };\n                  setFormData(updatedFormData);\n                  // Also update the editingElement to persist the change\n                  setEditingElement(updatedFormData);\n                  setSnackbar({\n                    open: true,\n                    message: `Preview image uploaded successfully: ${fileData.filename}`,\n                    severity: 'success'\n                  });\n                }\n              });\n            }}\n            sx={{ mt: 1, minWidth: '120px' }}\n          >\n            Upload Preview\n          </Button>\n        </Box>\n        <TextField\n          fullWidth\n          label=\"Alt Text\"\n          value={formData.altContent?.contents?.[0]?.text || ''}\n          onChange={(e) => setFormData({ \n            ...formData, \n            altContent: {\n              type: 'box',\n              layout: 'vertical',\n              contents: [\n                {\n                  type: 'text',\n                  text: e.target.value,\n                  size: 'lg',\n                  weight: 'bold'\n                }\n              ]\n            }\n          })}\n          margin=\"normal\"\n          helperText=\"Text shown when video is not available\"\n        />\n      </Box>\n    );\n\n    const renderSpacerEditor = () => (\n      <Box>\n        <FormControl fullWidth margin=\"normal\">\n          <InputLabel>Size</InputLabel>\n          <Select\n            value={formData.size || 'md'}\n            onChange={(e) => setFormData({ ...formData, size: e.target.value })}\n            label=\"Size\"\n          >\n            <MenuItem value=\"xs\">Extra Small (xs)</MenuItem>\n            <MenuItem value=\"sm\">Small (sm)</MenuItem>\n            <MenuItem value=\"md\">Medium (md)</MenuItem>\n            <MenuItem value=\"lg\">Large (lg)</MenuItem>\n            <MenuItem value=\"xl\">Extra Large (xl)</MenuItem>\n            <MenuItem value=\"xxl\">2X Large (xxl)</MenuItem>\n          </Select>\n        </FormControl>\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 2 }}>\n          Spacer adds flexible space between components. The size determines the amount of space.\n        </Typography>\n      </Box>\n    );\n\n    const renderFillerEditor = () => (\n      <Box>\n        <TextField\n          fullWidth\n          label=\"Flex\"\n          value={formData.flex || 1}\n          onChange={(e) => setFormData({ ...formData, flex: parseInt(e.target.value) || 1 })}\n          margin=\"normal\"\n          type=\"number\"\n          inputProps={{ min: 1, max: 10 }}\n          helperText=\"Flex ratio (1-10) - determines how much space to take\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 2 }}>\n          <strong>Note:</strong> Filler is deprecated. Consider using spacing properties on other components instead.\n        </Typography>\n      </Box>\n    );\n\n    const renderEditor = () => {\n      // Use formData.type if available, otherwise fall back to element.type\n      const elementType = formData.type || element.type;\n      console.log('renderEditor - formData.type:', formData.type);\n      console.log('renderEditor - element.type:', element.type);\n      console.log('renderEditor - using elementType:', elementType);\n      \n      switch (elementType) {\n        case 'text':\n          return renderTextEditor();\n        case 'button':\n          return renderButtonEditor();\n        case 'image':\n          return renderImageEditor();\n        case 'icon':\n          return renderIconEditor();\n        case 'box':\n          return renderBoxEditor();\n        case 'bubble':\n          return renderBubbleEditor();\n        case 'span':\n          return renderTextEditor(); // Use text editor for span\n        case 'video':\n          return renderVideoEditor();\n        case 'spacer':\n          return renderSpacerEditor();\n        case 'filler':\n          return renderFillerEditor();\n        default:\n          return (\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              No specific editor available for this element type: {elementType}\n            </Typography>\n          );\n      }\n    };\n\n    return (\n      <Dialog open={true} onClose={onClose} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>\n          <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n            <Typography variant=\"h6\">Edit {element.type} Element</Typography>\n            <IconButton onClick={onDelete} color=\"error\" size=\"small\">\n              <DeleteIcon />\n            </IconButton>\n          </Box>\n        </DialogTitle>\n        <DialogContent>\n          {renderEditor()}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={onClose}>Cancel</Button>\n          <Button onClick={handleSave} variant=\"contained\">\n            Save Changes\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  };\n\n  // Flex Message Designer Component\n  const FlexMessageDesigner: React.FC = () => {\n    return (\n      <Dialog open={designerOpen} onClose={handleCloseDesigner} maxWidth=\"xl\" fullWidth>\n        <DialogTitle>\n          <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n            <Typography variant=\"h6\">Flex Message Designer</Typography>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <Tooltip title=\"Open LINE Flex Message API Documentation\">\n                <Button \n                  variant=\"text\" \n                  size=\"small\"\n                  startIcon={<OpenInNewIcon />}\n                  onClick={() => window.open('https://developers.line.biz/en/docs/messaging-api/flex-message-elements/', '_blank')}\n                  sx={{ textTransform: 'none' }}\n                >\n                  LINE API Docs\n                </Button>\n              </Tooltip>\n              <Button onClick={handleSaveDesign} variant=\"contained\" color=\"primary\">\n                Save Flex Message\n              </Button>\n              <Button onClick={handleCloseDesigner} variant=\"outlined\">\n                Close\n              </Button>\n            </Box>\n          </Box>\n        </DialogTitle>\n        <DialogContent>\n          <Grid container spacing={3}>\n            {/* Template Selection Panel */}\n            <Grid item xs={12} md={4}>\n              <Paper sx={{ p: 2, height: '600px', overflow: 'auto' }}>\n                <Typography variant=\"h6\" gutterBottom>\n                  <BuildIcon sx={{ mr: 1 }} />\n                  Template Builder\n                </Typography>\n                \n                {/* Container Selection */}\n                <Accordion defaultExpanded>\n                  <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                    <Typography variant=\"subtitle1\">\n                      <CategoryIcon sx={{ mr: 1 }} />\n                      Container Type\n                    </Typography>\n                  </AccordionSummary>\n                  <AccordionDetails>\n                    <List dense>\n                      {flexTemplates.containers.map((container) => (\n                        <ListItem \n                          key={container.id}\n                          button\n                          selected={selectedContainer === container.id}\n                          onClick={() => handleSelectContainer(container.id)}\n                          sx={{ \n                            border: selectedContainer === container.id ? '2px solid #1976d2' : '1px solid #e0e0e0',\n                            borderRadius: 1,\n                            mb: 1\n                          }}\n                        >\n                          <ListItemIcon>{container.icon}</ListItemIcon>\n                          <ListItemText \n                            primary={container.name}\n                            secondary={container.description}\n                          />\n                        </ListItem>\n                      ))}\n                    </List>\n                  </AccordionDetails>\n                </Accordion>\n\n                {/* Documentation Section */}\n                <Accordion>\n                  <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                    <Typography variant=\"subtitle1\">\n                      <OpenInNewIcon sx={{ mr: 1 }} />\n                      Documentation\n                    </Typography>\n                  </AccordionSummary>\n                  <AccordionDetails>\n                    <Box sx={{ p: 2, bgcolor: '#f5f5f5', borderRadius: 1 }}>\n                      <Typography variant=\"body2\" gutterBottom>\n                        <strong>LINE Flex Message Elements:</strong>\n                      </Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n                        â€¢ <strong>Containers:</strong> Bubble (single message), Carousel (multiple messages)\n                      </Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n                        â€¢ <strong>Components:</strong> Box, Text, Button, Image, Video, Icon, Separator\n                      </Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n                        â€¢ <strong>Sizes:</strong> xs, sm, md, lg, xl, xxl, 3xl\n                      </Typography>\n                      <Button \n                        variant=\"outlined\" \n                        size=\"small\"\n                        startIcon={<OpenInNewIcon />}\n                        onClick={() => window.open('https://developers.line.biz/en/docs/messaging-api/flex-message-elements/', '_blank')}\n                        sx={{ mt: 1 }}\n                      >\n                        View Full Documentation\n                      </Button>\n                    </Box>\n                  </AccordionDetails>\n                </Accordion>\n\n                {/* Block Selection */}\n                <Accordion defaultExpanded>\n                  <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                    <Typography variant=\"subtitle1\">\n                      <DashboardIcon sx={{ mr: 1 }} />\n                      Blocks ({flexTemplates.blocks.length} total)\n                    </Typography>\n                  </AccordionSummary>\n                  <AccordionDetails>\n                    <List dense>\n                      {flexTemplates.blocks.map((block) => (\n                        <ListItem \n                          key={block.id}\n                          button\n                          onClick={() => handleAddBlock(block.id)}\n                          sx={{ \n                            border: '1px solid #e0e0e0',\n                            borderRadius: 1,\n                            mb: 0.5\n                          }}\n                        >\n                          <ListItemIcon>{block.icon}</ListItemIcon>\n                          <ListItemText \n                            primary={block.name}\n                            secondary={block.description}\n                          />\n                        </ListItem>\n                      ))}\n                    </List>\n                  </AccordionDetails>\n                </Accordion>\n\n                {/* Component Selection */}\n                <Accordion defaultExpanded>\n                  <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                    <Typography variant=\"subtitle1\">\n                      <DragIndicatorIcon sx={{ mr: 1 }} />\n                      Components ({flexTemplates.components.length} total)\n                    </Typography>\n                  </AccordionSummary>\n                  <AccordionDetails>\n                    {['layout', 'content', 'interactive', 'media'].map((category) => {\n                      const categoryComponents = flexTemplates.components.filter(comp => comp.category === category);\n                      return (\n                        <Box key={category} sx={{ mb: 2 }}>\n                          <Typography variant=\"subtitle2\" gutterBottom sx={{ textTransform: 'capitalize' }}>\n                            {category} ({categoryComponents.length})\n                          </Typography>\n                          <List dense>\n                            {categoryComponents.map((component) => (\n                              <ListItem \n                                key={component.id}\n                                button\n                                onClick={() => handleAddComponent(component.id)}\n                                sx={{ \n                                  border: '1px solid #e0e0e0',\n                                  borderRadius: 1,\n                                  mb: 0.5\n                                }}\n                              >\n                                <ListItemIcon>{component.icon}</ListItemIcon>\n                                <ListItemText \n                                  primary={component.name}\n                                  secondary={component.description}\n                                />\n                              </ListItem>\n                            ))}\n                          </List>\n                        </Box>\n                      );\n                    })}\n                  </AccordionDetails>\n                </Accordion>\n              </Paper>\n            </Grid>\n\n            {/* Design Canvas */}\n            <Grid item xs={12} md={8}>\n              <Paper sx={{ p: 2, height: '600px', overflow: 'auto' }}>\n                <Typography variant=\"h6\" gutterBottom>\n                  <DashboardIcon sx={{ mr: 1 }} />\n                  Design Canvas\n                </Typography>\n                \n                {selectedContainer ? (\n                      <Box>\n                    <Chip \n                      label={`Container: ${flexTemplates.containers.find(c => c.id === selectedContainer)?.name}`}\n                      color=\"primary\"\n                      sx={{ mb: 2 }}\n                    />\n                    \n                    {/* Selected Components */}\n                    {selectedComponents.length > 0 && (\n                      <Box sx={{ mb: 2 }}>\n                        <Typography variant=\"subtitle2\" gutterBottom>\n                          Selected Components:\n                        </Typography>\n                        <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\n                          {selectedComponents.map((component) => (\n                            <Chip\n                              key={component.id}\n                              label={component.type}\n                              onDelete={() => handleRemoveComponent(component.id)}\n                              color=\"secondary\"\n                              variant=\"outlined\"\n                            />\n                          ))}\n                        </Box>\n                      </Box>\n                    )}\n\n                    {/* Live Preview */}\n                    <Box sx={{ border: '1px solid #e0e0e0', borderRadius: 1, p: 2 }}>\n                      <Typography variant=\"subtitle2\" gutterBottom>\n                        Live Preview (Click elements to edit):\n                      </Typography>\n                      <VisualFlexMessagePreview \n                        flexMessage={formData.flex_message} \n                        onElementClick={handleSelectElement}\n                        selectedElementId={selectedElement}\n                      />\n                    </Box>\n                  </Box>\n                ) : (\n                  <Box sx={{ \n                    display: 'flex', \n                    flexDirection: 'column', \n                    alignItems: 'center', \n                    justifyContent: 'center',\n                    height: '100%',\n                    color: '#666'\n                  }}>\n                    <ViewModuleIcon sx={{ fontSize: 48, mb: 2, opacity: 0.5 }} />\n                    <Typography variant=\"h6\" gutterBottom>\n                      Start Designing\n                    </Typography>\n                    <Typography variant=\"body2\" align=\"center\">\n                      Select a container type from the left panel to begin building your flex message\n                    </Typography>\n                  </Box>\n                )}\n              </Paper>\n            </Grid>\n          </Grid>\n        </DialogContent>\n      </Dialog>\n    );\n  };\n\n  return (\n    <Box sx={{ \n      p: { xs: 2, md: 4 }, \n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)'\n    }}>\n      {/* Header Section */}\n      <Box sx={{ \n        mb: 4, \n        display: 'flex', \n        alignItems: 'center', \n        gap: 3,\n        background: 'white',\n        p: 3,\n        borderRadius: 3,\n        boxShadow: '0 4px 12px rgba(0,0,0,0.08)',\n        border: '1px solid rgba(0,0,0,0.05)'\n      }}>\n        <Box sx={{ \n          display: 'flex', \n          alignItems: 'center', \n          gap: 2,\n          flex: 1\n        }}>\n          <Box sx={{ \n            bgcolor: 'primary.main', \n            width: 56, \n            height: 56,\n            borderRadius: 2,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            boxShadow: '0 4px 16px rgba(25, 118, 210, 0.3)'\n          }}>\n            <SmartphoneIcon sx={{ fontSize: 28, color: 'white' }} />\n          </Box>\n          <Box>\n            <Typography variant=\"h4\" sx={{ \n              fontWeight: 700, \n              mb: 1,\n              background: 'linear-gradient(135deg, #1e293b 0%, #334155 100%)',\n              backgroundClip: 'text',\n              WebkitBackgroundClip: 'text',\n              WebkitTextFillColor: 'transparent'\n            }}>\n              Flex Message Management\n            </Typography>\n            <Typography variant=\"body1\" color=\"text.secondary\" sx={{ fontSize: '1.1rem' }}>\n              Create and manage LINE Flex Messages for enhanced user experience\n            </Typography>\n          </Box>\n        </Box>\n        \n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n          <ToggleButtonGroup\n            value={viewMode}\n            exclusive\n            onChange={(_, newViewMode) => {\n              if (newViewMode !== null) {\n                setViewMode(newViewMode);\n              }\n            }}\n            size=\"small\"\n            sx={{\n              '& .MuiToggleButton-root': {\n                borderRadius: 2,\n                border: '1px solid #e2e8f0',\n                '&.Mui-selected': {\n                  backgroundColor: 'primary.main',\n                  color: 'white',\n                  '&:hover': {\n                    backgroundColor: 'primary.dark',\n                  }\n                }\n              }\n            }}\n          >\n            <ToggleButton value=\"table\" aria-label=\"table view\">\n              <TableChartIcon />\n            </ToggleButton>\n            <ToggleButton value=\"cards\" aria-label=\"card view\">\n              <ViewModuleIcon />\n            </ToggleButton>\n          </ToggleButtonGroup>\n          <Button\n            variant=\"contained\"\n            startIcon={<AddIcon />}\n            onClick={handleCreateNew}\n            sx={{ \n              borderRadius: 2,\n              textTransform: 'none',\n              fontWeight: 600,\n              boxShadow: '0 4px 12px rgba(59, 130, 246, 0.3)',\n              px: 3\n            }}\n          >\n            Create New Flex Message\n          </Button>\n        </Box>\n      </Box>\n\n      {/* Flex Messages Display */}\n      {loading ? (\n        <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\n          <CircularProgress />\n        </Box>\n      ) : viewMode === 'table' ? (\n        <Card sx={{ \n          mb: 3,\n          background: 'white',\n          borderRadius: 3,\n          boxShadow: '0 4px 16px rgba(0,0,0,0.08)',\n          border: '1px solid rgba(0,0,0,0.05)',\n          overflow: 'hidden'\n        }}>\n          <TableContainer>\n            <Table>\n              <TableHead>\n                <TableRow sx={{ backgroundColor: '#f8fafc' }}>\n                  <TableCell sx={{ fontWeight: 600, color: '#334155', borderBottom: '2px solid #e2e8f0' }}>Name</TableCell>\n                  <TableCell sx={{ fontWeight: 600, color: '#334155', borderBottom: '2px solid #e2e8f0' }}>Purpose</TableCell>\n                  <TableCell sx={{ fontWeight: 600, color: '#334155', borderBottom: '2px solid #e2e8f0' }}>Alt Text</TableCell>\n                  <TableCell sx={{ fontWeight: 600, color: '#334155', borderBottom: '2px solid #e2e8f0' }}>Tags</TableCell>\n                  <TableCell sx={{ fontWeight: 600, color: '#334155', borderBottom: '2px solid #e2e8f0' }}>Created</TableCell>\n                  <TableCell align=\"right\" sx={{ fontWeight: 600, color: '#334155', borderBottom: '2px solid #e2e8f0' }}>Actions</TableCell>\n                </TableRow>\n              </TableHead>\n            <TableBody>\n              {flexMessages.map((message) => (\n                <TableRow key={message._id} hover>\n                  <TableCell>\n                    <Typography variant=\"body2\" sx={{ fontWeight: 500 }}>\n                      {message.name}\n                    </Typography>\n                  </TableCell>\n                  <TableCell>\n                    <Chip \n                      label={message.purpose === 'liff_message' ? 'LIFF' : 'BOT'} \n                      size=\"small\" \n                      color={message.purpose === 'liff_message' ? 'primary' : 'secondary'}\n                    />\n                  </TableCell>\n                  <TableCell>\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ maxWidth: 200 }}>\n                      {message.alt_text}\n                    </Typography>\n                  </TableCell>\n                  <TableCell>\n                    <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                      {message.tags.slice(0, 3).map((tag, index) => (\n                        <Chip key={index} label={tag} size=\"small\" variant=\"outlined\" />\n                      ))}\n                      {message.tags.length > 3 && (\n                        <Chip label={`+${message.tags.length - 3}`} size=\"small\" variant=\"outlined\" />\n                      )}\n                    </Box>\n                  </TableCell>\n                  <TableCell>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {message.usertimestamp || new Date(message.created_at || '').toLocaleDateString()}\n                    </Typography>\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => handlePreview(message)}\n                      color=\"primary\"\n                    >\n                      <ViewIcon />\n                    </IconButton>\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => handleEdit(message)}\n                      color=\"primary\"\n                    >\n                      <EditIcon />\n                    </IconButton>\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => handleDelete(message._id!)}\n                      color=\"error\"\n                    >\n                      <DeleteIcon />\n                    </IconButton>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n        </Card>\n      ) : (\n        <Grid container spacing={3}>\n          {flexMessages.map((message) => (\n            <Grid item xs={12} md={6} lg={4} key={message._id}>\n              <Card sx={{ \n                height: '100%',\n                display: 'flex',\n                flexDirection: 'column',\n                transition: 'all 0.3s ease',\n                '&:hover': {\n                  transform: 'translateY(-4px)',\n                  boxShadow: '0 8px 24px rgba(0,0,0,0.15)'\n                }\n              }}>\n                <CardContent sx={{ flex: 1, p: 3 }}>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', mb: 2 }}>\n                    <Typography variant=\"h6\" component=\"h2\" sx={{ \n                      wordBreak: 'break-word',\n                      fontWeight: 600,\n                      color: '#1e293b'\n                    }}>\n                      {message.name}\n                    </Typography>\n                    <Chip \n                      label={message.purpose === 'liff_message' ? 'LIFF' : 'BOT'} \n                      size=\"small\" \n                      color={message.purpose === 'liff_message' ? 'primary' : 'secondary'}\n                      sx={{ \n                        fontWeight: 600,\n                        borderRadius: 2\n                      }}\n                    />\n                  </Box>\n                  \n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ \n                    mb: 2,\n                    lineHeight: 1.6,\n                    color: '#64748b'\n                  }}>\n                    {message.alt_text}\n                  </Typography>\n\n                  {message.tags.length > 0 && (\n                    <Box sx={{ mb: 2 }}>\n                      {message.tags.map((tag, index) => (\n                        <Chip \n                          key={index} \n                          label={tag} \n                          size=\"small\" \n                          sx={{ \n                            mr: 0.5, \n                            mb: 0.5,\n                            borderRadius: 2,\n                            backgroundColor: '#f1f5f9',\n                            color: '#475569',\n                            border: '1px solid #e2e8f0'\n                          }} \n                        />\n                      ))}\n                    </Box>\n                  )}\n\n                  <Typography variant=\"caption\" color=\"text.secondary\" sx={{ \n                    color: '#94a3b8',\n                    fontWeight: 500\n                  }}>\n                    Created: {message.usertimestamp || new Date(message.created_at || '').toLocaleDateString()}\n                  </Typography>\n                </CardContent>\n                \n                <CardActions sx={{ \n                  p: 2, \n                  pt: 0,\n                  borderTop: '1px solid #f1f5f9',\n                  backgroundColor: '#fafafa'\n                }}>\n                  <Button \n                    size=\"small\" \n                    startIcon={<ViewIcon />} \n                    onClick={() => handlePreview(message)}\n                    sx={{ \n                      borderRadius: 2,\n                      textTransform: 'none',\n                      fontWeight: 600\n                    }}\n                  >\n                    Preview\n                  </Button>\n                  <Button \n                    size=\"small\" \n                    startIcon={<EditIcon />} \n                    onClick={() => handleEdit(message)}\n                    sx={{ \n                      borderRadius: 2,\n                      textTransform: 'none',\n                      fontWeight: 600\n                    }}\n                  >\n                    Edit\n                  </Button>\n                  <IconButton \n                    size=\"small\" \n                    color=\"error\" \n                    onClick={() => handleDelete(message._id!)}\n                    sx={{ \n                      borderRadius: 2,\n                      '&:hover': {\n                        backgroundColor: 'rgba(239, 68, 68, 0.1)'\n                      }\n                    }}\n                  >\n                    <DeleteIcon />\n                  </IconButton>\n                </CardActions>\n              </Card>\n            </Grid>\n          ))}\n        </Grid>\n      )}\n\n      {/* Create/Edit Dialog */}\n      <Dialog \n        open={dialogOpen} \n        onClose={() => setDialogOpen(false)} \n        maxWidth=\"lg\" \n        fullWidth\n        PaperProps={{\n          sx: {\n            borderRadius: 3,\n            boxShadow: '0 8px 32px rgba(0,0,0,0.15)'\n          }\n        }}\n      >\n        <DialogTitle sx={{ \n          background: 'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)',\n          borderBottom: '1px solid #e2e8f0',\n          pb: 2\n        }}>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n            <Box sx={{ \n              bgcolor: 'primary.main', \n              width: 40, \n              height: 40,\n              borderRadius: 2,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center'\n            }}>\n              <SmartphoneIcon sx={{ fontSize: 20, color: 'white' }} />\n            </Box>\n            <Typography variant=\"h6\" sx={{ fontWeight: 600, color: '#1e293b' }}>\n              {editingMessage ? 'Edit Flex Message' : 'Create New Flex Message'}\n            </Typography>\n          </Box>\n        </DialogTitle>\n        <DialogContent>\n          <Grid container spacing={3} sx={{ mt: 1 }}>\n            {/* Template Selection Panel */}\n            <Grid item xs={12} md={4}>\n              <Paper sx={{ p: 2, height: '500px', overflow: 'auto' }}>\n                <Typography variant=\"h6\" gutterBottom>\n                  <ViewModuleIcon sx={{ mr: 1 }} />\n                  Available Templates\n                </Typography>\n                \n                {templateLoading ? (\n                  <Box sx={{ display: 'flex', justifyContent: 'center', p: 2 }}>\n                    <CircularProgress size={24} />\n                  </Box>\n                ) : (\n                  <List dense>\n                    {availableTemplates.map((template) => (\n                      <ListItem \n                        key={template._id}\n                        button\n                        selected={selectedTemplate?._id === template._id}\n                        onClick={() => handleTemplateSelect(template)}\n                        sx={{ \n                          border: selectedTemplate?._id === template._id ? '2px solid #1976d2' : '1px solid #e0e0e0',\n                          borderRadius: 1,\n                          mb: 1\n                        }}\n                      >\n                        <ListItemIcon>\n                          {template.tags?.includes('video') ? <VideoLibraryIcon /> : <ViewModuleIcon />}\n                        </ListItemIcon>\n                        <ListItemText \n                          primary={template.name}\n                          secondary={\n                            <Box>\n                              <Typography variant=\"caption\" display=\"block\">\n                                {template.purpose}\n                              </Typography>\n                              {template.tags && template.tags.length > 0 && (\n                                <Box sx={{ mt: 0.5 }}>\n                                  {template.tags.map((tag: string, index: number) => (\n                                    <Chip \n                                      key={index} \n                                      label={tag} \n                                      size=\"small\" \n                                      sx={{ mr: 0.5, mb: 0.5 }} \n                                    />\n                                  ))}\n                                </Box>\n                              )}\n                            </Box>\n                          }\n                        />\n                      </ListItem>\n                    ))}\n                  </List>\n                )}\n                \n                {availableTemplates.length === 0 && !templateLoading && (\n                  <Box sx={{ p: 2, textAlign: 'center' }}>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      No templates available\n                    </Typography>\n                    <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\" sx={{ mt: 1 }}>\n                      Templates are flex messages marked with 'template' tag\n                    </Typography>\n                  </Box>\n                )}\n              </Paper>\n            </Grid>\n\n            {/* Form Fields */}\n            <Grid item xs={12} md={8}>\n                <TextField\n                  fullWidth\n                label=\"Name\"\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                margin=\"normal\"\n              />\n              \n              <FormControl fullWidth margin=\"normal\">\n                <InputLabel>Purpose</InputLabel>\n                <Select\n                  value={formData.purpose}\n                  onChange={(e) => setFormData({ ...formData, purpose: e.target.value })}\n                  label=\"Purpose\"\n                >\n                  <MenuItem value=\"liff_message\">LIFF Message Send</MenuItem>\n                  <MenuItem value=\"bot_reply\">BOT Reply Message</MenuItem>\n                </Select>\n              </FormControl>\n\n              <TextField\n                fullWidth\n                label=\"Alt Text\"\n                value={formData.alt_text}\n                onChange={(e) => setFormData({ ...formData, alt_text: e.target.value })}\n                margin=\"normal\"\n                  multiline\n                rows={2}\n                helperText=\"Text displayed when flex message cannot be rendered\"\n              />\n\n              <TextField\n                fullWidth\n                label=\"Tags\"\n                value={formData.tags.join(', ')}\n                onChange={(e) => setFormData({ \n                  ...formData, \n                  tags: e.target.value.split(',').map(tag => tag.trim()).filter(tag => tag)\n                })}\n                margin=\"normal\"\n                helperText=\"Comma-separated tags\"\n              />\n\n              <Box sx={{ mt: 2 }}>\n                <Button\n                  variant=\"outlined\"\n                  startIcon={<BuildIcon />}\n                  onClick={handleOpenDesigner}\n                  fullWidth\n                  sx={{ mb: 2 }}\n                >\n                  Open Visual Designer\n                </Button>\n                <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\">\n                  Use the visual designer to build your flex message with templates and components\n                </Typography>\n            </Box>\n\n              <Accordion sx={{ mt: 2 }}>\n                <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                  <Typography variant=\"subtitle2\">Advanced: JSON Editor</Typography>\n                </AccordionSummary>\n                <AccordionDetails>\n                  <TextField\n                    fullWidth\n                    label=\"Flex Message JSON\"\n                    value={JSON.stringify(formData.flex_message, null, 2)}\n                    onChange={(e) => {\n                      try {\n                        const parsed = JSON.parse(e.target.value);\n                        setFormData({ ...formData, flex_message: parsed });\n                      } catch (error) {\n                        // Invalid JSON, don't update\n                      }\n                    }}\n                    multiline\n                    rows={8}\n                    helperText=\"Advanced: Edit JSON directly (use with caution)\"\n                    sx={{ fontFamily: 'monospace' }}\n                  />\n                </AccordionDetails>\n              </Accordion>\n            </Grid>\n\n            <Grid item xs={12} md={6}>\n              <Typography variant=\"h6\" gutterBottom>\n                Live Preview\n              </Typography>\n              <VisualFlexMessagePreview flexMessage={formData.flex_message} />\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions sx={{ \n          p: 3,\n          borderTop: '1px solid #e2e8f0',\n          backgroundColor: '#f8fafc'\n        }}>\n          <Button \n            onClick={() => setDialogOpen(false)}\n            sx={{ \n              borderRadius: 2,\n              textTransform: 'none',\n              fontWeight: 600,\n              px: 3\n            }}\n          >\n            Cancel\n          </Button>\n          <Button \n            onClick={handleSave} \n            variant=\"contained\"\n            sx={{ \n              borderRadius: 2,\n              textTransform: 'none',\n              fontWeight: 600,\n              px: 3,\n              boxShadow: '0 4px 12px rgba(59, 130, 246, 0.3)'\n            }}\n          >\n            {editingMessage ? 'Update' : 'Create'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Preview Dialog */}\n      <Dialog \n        open={previewDialogOpen} \n        onClose={() => setPreviewDialogOpen(false)} \n        maxWidth=\"lg\" \n        fullWidth\n        PaperProps={{\n          sx: {\n            borderRadius: 3,\n            boxShadow: '0 8px 32px rgba(0,0,0,0.15)'\n          }\n        }}\n      >\n        <DialogTitle sx={{ \n          background: 'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)',\n          borderBottom: '1px solid #e2e8f0',\n          pb: 2\n        }}>\n          <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n              <Box sx={{ \n                bgcolor: 'primary.main', \n                width: 40, \n                height: 40,\n                borderRadius: 2,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center'\n              }}>\n                <ViewIcon sx={{ fontSize: 20, color: 'white' }} />\n              </Box>\n              <Typography variant=\"h6\" sx={{ fontWeight: 600, color: '#1e293b' }}>\n                Preview: {previewMessage?.name}\n              </Typography>\n            </Box>\n            <Button \n              variant=\"outlined\" \n              onClick={() => setPreviewDialogOpen(false)}\n              sx={{ \n                borderRadius: 2,\n                textTransform: 'none',\n                fontWeight: 600\n              }}\n            >\n              Close\n            </Button>\n          </Box>\n        </DialogTitle>\n        <DialogContent>\n          <Tabs value={previewTabValue} onChange={(_, newValue) => setPreviewTabValue(newValue)}>\n            <Tab label=\"Visual Preview\" icon={<SmartphoneIcon />} />\n            <Tab label=\"JSON Structure\" icon={<CodeIcon />} />\n          </Tabs>\n          \n          <Box sx={{ mt: 2 }}>\n            {previewTabValue === 0 && previewMessage && (\n              <VisualFlexMessagePreview flexMessage={previewMessage.flex_message} />\n            )}\n            {previewTabValue === 1 && previewMessage && (\n              <TextField\n                fullWidth\n                multiline\n                rows={15}\n                value={JSON.stringify(previewMessage.flex_message, null, 2)}\n                InputProps={{ readOnly: true }}\n                sx={{ fontFamily: 'monospace' }}\n              />\n            )}\n          </Box>\n        </DialogContent>\n      </Dialog>\n\n      {/* Flex Message Designer */}\n      <FlexMessageDesigner />\n\n      {/* Element Editor */}\n      {showElementEditor && editingElement && (\n        <ElementEditor\n          element={editingElement}\n          onUpdate={(updates) => handleUpdateElement(editingElement.id, updates)}\n          onDelete={() => handleDeleteElement(editingElement.id)}\n          onClose={() => {\n            setShowElementEditor(false);\n            setEditingElement(null);\n            setSelectedElement(null);\n          }}\n        />\n      )}\n\n      {/* File Upload Dialog */}\n      <FileUploadDialog\n        open={fileUploadDialog.open}\n        fileType={fileUploadDialog.fileType}\n        onSelect={fileUploadDialog.onSelect}\n        onClose={() => setFileUploadDialog({ ...fileUploadDialog, open: false })}\n      />\n\n      {/* Snackbar */}\n      <Snackbar\n        open={snackbar.open}\n        autoHideDuration={6000}\n        onClose={() => setSnackbar({ ...snackbar, open: false })}\n      >\n        <Alert \n          onClose={() => setSnackbar({ ...snackbar, open: false })} \n          severity={snackbar.severity}\n        >\n          {snackbar.message}\n        </Alert>\n      </Snackbar>\n    </Box>\n  );\n};\n\nexport default FlexMessageManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}