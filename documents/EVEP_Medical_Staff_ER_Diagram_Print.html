<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVEP Medical Staff ER Diagram - Print Version</title>
    <style>
        @media print { body { margin: 0; padding: 20px; } .page-break { page-break-before: always; } .no-break { page-break-inside: avoid; } }
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 1200px; margin: 0 auto; padding: 20px; background: white; }
        .header { text-align: center; border-bottom: 3px solid #2c3e50; padding-bottom: 20px; margin-bottom: 30px; }
        .header h1 { color: #2c3e50; margin: 0; font-size: 28px; }
        .header h2 { color: #7f8c8d; margin: 10px 0 0 0; font-size: 18px; }
        .section { margin: 30px 0; border: 2px solid #3498db; border-radius: 10px; padding: 20px; background: linear-gradient(135deg, #ecf0f1 0%, #bdc3c7 100%); }
        .section-header { background: #3498db; color: white; padding: 15px 20px; margin: -20px -20px 20px -20px; border-radius: 8px 8px 0 0; font-weight: bold; font-size: 18px; }
        .entity-box { background: #e8f4fd; border: 2px solid #3498db; border-radius: 8px; padding: 15px; margin: 15px 0; }
        .entity-title { background: #3498db; color: white; padding: 10px 15px; margin: -15px -15px 15px -15px; border-radius: 6px 6px 0 0; font-weight: bold; }
        .field-list { list-style: none; padding: 0; margin: 0; }
        .field-list li { padding: 5px 0; border-bottom: 1px solid #ecf0f1; }
        .field-list li:last-child { border-bottom: none; }
        .field-name { font-weight: bold; color: #2c3e50; }
        .field-type { color: #7f8c8d; font-style: italic; }
        .field-description { color: #555; font-size: 14px; }
        .role-box { background: #e8f5e8; border: 2px solid #27ae60; border-radius: 8px; padding: 15px; margin: 15px 0; }
        .role-title { background: #27ae60; color: white; padding: 10px 15px; margin: -15px -15px 15px -15px; border-radius: 6px 6px 0 0; font-weight: bold; }
        .responsibility-list { list-style: none; padding: 0; margin: 0; }
        .responsibility-list li { padding: 8px 0; border-bottom: 1px solid #d5f4e6; position: relative; padding-left: 25px; }
        .responsibility-list li:before { content: "✓"; position: absolute; left: 0; color: #27ae60; font-weight: bold; }
        .responsibility-list li:last-child { border-bottom: none; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; background: white; }
        th, td { border: 1px solid #bdc3c7; padding: 12px; text-align: left; vertical-align: top; }
        th { background: #34495e; color: white; font-weight: bold; }
        tr:nth-child(even) { background: #f8f9fa; }
        .footer { text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #bdc3c7; color: #7f8c8d; font-size: 12px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>EVEP Mobile Reflection Unit</h1>
        <h2>Medical Staff ER Diagram - Human Readable Version</h2>
        <p><strong>Comprehensive Medical Staff Management System</strong></p>
        <p><strong>Document Version: 1.1 | Last Updated: August 30, 2024 | Print-Friendly Format</strong></p>
    </div>

    <!-- Core Medical Staff Entities -->
    <div class="section no-break">
        <div class="section-header">1. Core Medical Staff Entities</div>
        
        <div class="entity-box">
            <div class="entity-title">MEDICAL_STAFF</div>
            <ul class="field-list">
                <li><span class="field-name">staff_id</span> <span class="field-type">(String, UK)</span> <span class="field-description">- Unique staff identifier (e.g., MST001234)</span></li>
                <li><span class="field-name">employee_number</span> <span class="field-type">(String, UK)</span> <span class="field-description">- Hospital employee number (e.g., EMP001234)</span></li>
                <li><span class="field-name">first_name, last_name</span> <span class="field-type">(String)</span> <span class="field-description">- Staff full name</span></li>
                <li><span class="field-name">email, phone</span> <span class="field-type">(String)</span> <span class="field-description">- Contact information</span></li>
                <li><span class="field-name">role</span> <span class="field-type">(String)</span> <span class="field-description">- doctor|nurse|technician|coordinator</span></li>
                <li><span class="field-name">specialization</span> <span class="field-type">(String)</span> <span class="field-description">- ophthalmology|optometry|pediatrics</span></li>
                <li><span class="field-name">license_number</span> <span class="field-type">(String)</span> <span class="field-description">- Medical license number</span></li>
                <li><span class="field-name">hospital_id</span> <span class="field-type">(FK)</span> <span class="field-description">- Reference to HOSPITAL</span></li>
                <li><span class="field-name">department</span> <span class="field-type">(String)</span> <span class="field-description">- Mobile Unit|Ophthalmology|Pediatrics</span></li>
                <li><span class="field-name">is_active</span> <span class="field-type">(Boolean)</span> <span class="field-description">- Active employment status</span></li>
            </ul>
        </div>

        <div class="entity-box">
            <div class="entity-title">HOSPITAL</div>
            <ul class="field-list">
                <li><span class="field-name">hospital_id</span> <span class="field-type">(String, UK)</span> <span class="field-description">- Unique hospital identifier</span></li>
                <li><span class="field-name">hospital_name</span> <span class="field-type">(String)</span> <span class="field-description">- Full hospital name</span></li>
                <li><span class="field-name">hospital_code</span> <span class="field-type">(String)</span> <span class="field-description">- Short hospital code</span></li>
                <li><span class="field-name">address, phone, email</span> <span class="field-type">(String)</span> <span class="field-description">- Contact information</span></li>
                <li><span class="field-name">type</span> <span class="field-type">(String)</span> <span class="field-description">- public|private</span></li>
                <li><span class="field-name">is_active</span> <span class="field-type">(Boolean)</span> <span class="field-description">- Active hospital status</span></li>
            </ul>
        </div>
    </div>

    <!-- Staff Credentials & Training -->
    <div class="section no-break">
        <div class="section-header">2. Staff Credentials & Training</div>
        
        <div class="entity-box">
            <div class="entity-title">MEDICAL_CREDENTIALS</div>
            <ul class="field-list">
                <li><span class="field-name">credential_id</span> <span class="field-type">(String, UK)</span> <span class="field-description">- Unique credential identifier</span></li>
                <li><span class="field-name">staff_id</span> <span class="field-type">(FK)</span> <span class="field-description">- Reference to MEDICAL_STAFF</span></li>
                <li><span class="field-name">credential_type</span> <span class="field-type">(String)</span> <span class="field-description">- medical_license|specialization|certification</span></li>
                <li><span class="field-name">credential_number</span> <span class="field-type">(String)</span> <span class="field-description">- License or certification number</span></li>
                <li><span class="field-name">issuing_authority</span> <span class="field-type">(String)</span> <span class="field-description">- Medical Council of Thailand</span></li>
                <li><span class="field-name">issue_date, expiry_date</span> <span class="field-type">(Date)</span> <span class="field-description">- Credential validity period</span></li>
                <li><span class="field-name">status</span> <span class="field-type">(String)</span> <span class="field-description">- active|expired|suspended</span></li>
            </ul>
        </div>

        <div class="entity-box">
            <div class="entity-title">STAFF_TRAINING</div>
            <ul class="field-list">
                <li><span class="field-name">training_id</span> <span class="field-type">(String, UK)</span> <span class="field-description">- Unique training identifier</span></li>
                <li><span class="field-name">staff_id</span> <span class="field-type">(FK)</span> <span class="field-description">- Reference to MEDICAL_STAFF</span></li>
                <li><span class="field-name">training_type</span> <span class="field-type">(String)</span> <span class="field-description">- equipment|protocol|safety|software</span></li>
                <li><span class="field-name">training_name</span> <span class="field-type">(String)</span> <span class="field-description">- Auto-refractor Operation</span></li>
                <li><span class="field-name">training_provider</span> <span class="field-type">(String)</span> <span class="field-description">- Equipment Manufacturer</span></li>
                <li><span class="field-name">training_date, expiry_date</span> <span class="field-type">(Date)</span> <span class="field-description">- Training validity period</span></li>
                <li><span class="field-name">status</span> <span class="field-type">(String)</span> <span class="field-description">- completed|in_progress|expired</span></li>
            </ul>
        </div>
    </div>

    <!-- Equipment & Calibration -->
    <div class="section no-break">
        <div class="section-header">3. Equipment & Calibration Management</div>
        
        <div class="entity-box">
            <div class="entity-title">EQUIPMENT</div>
            <ul class="field-list">
                <li><span class="field-name">equipment_id</span> <span class="field-type">(String, UK)</span> <span class="field-description">- Unique equipment identifier</span></li>
                <li><span class="field-name">equipment_type</span> <span class="field-type">(String)</span> <span class="field-description">- auto_refractor|vision_chart|computer</span></li>
                <li><span class="field-name">model</span> <span class="field-type">(String)</span> <span class="field-description">- Topcon KR-8000</span></li>
                <li><span class="field-name">serial_number</span> <span class="field-type">(String)</span> <span class="field-description">- Equipment serial number</span></li>
                <li><span class="field-name">manufacturer</span> <span class="field-type">(String)</span> <span class="field-description">- Equipment manufacturer</span></li>
                <li><span class="field-name">status</span> <span class="field-type">(String)</span> <span class="field-description">- active|maintenance|retired</span></li>
                <li><span class="field-name">assigned_staff_id</span> <span class="field-type">(FK)</span> <span class="field-description">- Reference to MEDICAL_STAFF</span></li>
            </ul>
        </div>

        <div class="entity-box">
            <div class="entity-title">EQUIPMENT_CALIBRATION</div>
            <ul class="field-list">
                <li><span class="field-name">calibration_id</span> <span class="field-type">(String, UK)</span> <span class="field-description">- Unique calibration identifier</span></li>
                <li><span class="field-name">equipment_id</span> <span class="field-type">(FK)</span> <span class="field-description">- Reference to EQUIPMENT</span></li>
                <li><span class="field-name">staff_id</span> <span class="field-type">(FK)</span> <span class="field-description">- Calibrated by (Reference to MEDICAL_STAFF)</span></li>
                <li><span class="field-name">calibration_date</span> <span class="field-type">(Date)</span> <span class="field-description">- Date of calibration</span></li>
                <li><span class="field-name">next_calibration_date</span> <span class="field-type">(Date)</span> <span class="field-description">- Next scheduled calibration</span></li>
                <li><span class="field-name">calibration_status</span> <span class="field-type">(String)</span> <span class="field-description">- calibrated|needs_calibration|failed</span></li>
            </ul>
        </div>
    </div>

    <!-- Clinical Workflow Entities -->
    <div class="section no-break">
        <div class="section-header">4. Clinical Workflow Integration</div>
        
        <div class="entity-box">
            <div class="entity-title">MOBILE_SCREENING_SESSION</div>
            <ul class="field-list">
                <li><span class="field-name">session_id</span> <span class="field-type">(String, UK)</span> <span class="field-description">- Unique session identifier</span></li>
                <li><span class="field-name">patient_id</span> <span class="field-type">(FK)</span> <span class="field-description">- Reference to patient</span></li>
                <li><span class="field-name">lead_staff_id</span> <span class="field-type">(FK)</span> <span class="field-description">- Lead medical staff (Reference to MEDICAL_STAFF)</span></li>
                <li><span class="field-name">assistant_staff_id</span> <span class="field-type">(FK)</span> <span class="field-description">- Assistant staff (Reference to MEDICAL_STAFF)</span></li>
                <li><span class="field-name">session_date</span> <span class="field-type">(Date)</span> <span class="field-description">- Date of screening session</span></li>
                <li><span class="field-name">session_status</span> <span class="field-type">(String)</span> <span class="field-description">- scheduled|in_progress|completed|cancelled</span></li>
                <li><span class="field-name">session_type</span> <span class="field-type">(String)</span> <span class="field-description">- initial|follow_up|emergency</span></li>
            </ul>
        </div>

        <div class="entity-box">
            <div class="entity-title">SCREENING_ASSESSMENT</div>
            <ul class="field-list">
                <li><span class="field-name">assessment_id</span> <span class="field-type">(String, UK)</span> <span class="field-description">- Unique assessment identifier</span></li>
                <li><span class="field-name">session_id</span> <span class="field-type">(FK)</span> <span class="field-description">- Reference to MOBILE_SCREENING_SESSION</span></li>
                <li><span class="field-name">staff_id</span> <span class="field-type">(FK)</span> <span class="field-description">- Assessed by (Reference to MEDICAL_STAFF)</span></li>
                <li><span class="field-name">assessment_type</span> <span class="field-type">(String)</span> <span class="field-description">- auto_refractor|manual_vision|eye_examination</span></li>
                <li><span class="field-name">assessment_data</span> <span class="field-type">(Object)</span> <span class="field-description">- Detailed assessment results</span></li>
                <li><span class="field-name">assessment_status</span> <span class="field-type">(String)</span> <span class="field-description">- completed|in_progress|cancelled</span></li>
            </ul>
        </div>

        <div class="entity-box">
            <div class="entity-title">CLINICAL_DECISION</div>
            <ul class="field-list">
                <li><span class="field-name">decision_id</span> <span class="field-type">(String, UK)</span> <span class="field-description">- Unique decision identifier</span></li>
                <li><span class="field-name">session_id</span> <span class="field-type">(FK)</span> <span class="field-description">- Reference to MOBILE_SCREENING_SESSION</span></li>
                <li><span class="field-name">staff_id</span> <span class="field-type">(FK)</span> <span class="field-description">- Decision made by (Reference to MEDICAL_STAFF)</span></li>
                <li><span class="field-name">decision_type</span> <span class="field-type">(String)</span> <span class="field-description">- normal|abnormal|referral|glasses_needed</span></li>
                <li><span class="field-name">decision_reason</span> <span class="field-type">(String)</span> <span class="field-description">- Clinical reasoning</span></li>
                <li><span class="field-name">decision_status</span> <span class="field-type">(String)</span> <span class="field-description">- pending|confirmed|implemented</span></li>
            </ul>
        </div>
    </div>

    <!-- Staff Roles & Responsibilities -->
    <div class="section no-break">
        <div class="section-header">5. Medical Staff Roles & Responsibilities</div>
        
        <div class="role-box">
            <div class="role-title">Lead Doctor (Ophthalmologist/Optometrist)</div>
            <ul class="responsibility-list">
                <li>Conduct comprehensive eye examinations</li>
                <li>Make clinical decisions and diagnoses</li>
                <li>Create glasses prescriptions</li>
                <li>Supervise screening sessions</li>
                <li>Quality assurance oversight</li>
                <li>Patient consultation and education</li>
            </ul>
        </div>

        <div class="role-box">
            <div class="role-title">Nurse</div>
            <ul class="responsibility-list">
                <li>Patient registration and preparation</li>
                <li>Assist with screening procedures</li>
                <li>Patient care and comfort</li>
                <li>Equipment setup and calibration</li>
                <li>Documentation and record keeping</li>
                <li>Follow-up coordination</li>
            </ul>
        </div>

        <div class="role-box">
            <div class="role-title">Technician</div>
            <ul class="responsibility-list">
                <li>Equipment operation and maintenance</li>
                <li>Auto-refractor calibration</li>
                <li>Technical support during screening</li>
                <li>Equipment troubleshooting</li>
                <li>Data collection and entry</li>
                <li>Quality control checks</li>
            </ul>
        </div>

        <div class="role-box">
            <div class="role-title">Coordinator</div>
            <ul class="responsibility-list">
                <li>Schedule management and coordination</li>
                <li>School communication and liaison</li>
                <li>Mobile unit logistics</li>
                <li>Staff assignment and supervision</li>
                <li>Report generation and distribution</li>
                <li>Quality assurance coordination</li>
            </ul>
        </div>
    </div>

    <!-- Access Control Matrix -->
    <div class="section no-break">
        <div class="section-header">6. Access Control Matrix</div>
        
        <table>
            <thead>
                <tr>
                    <th>Role</th>
                    <th>School Screening</th>
                    <th>Mobile Unit</th>
                    <th>Equipment</th>
                    <th>Patient Data</th>
                    <th>Reports</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Lead Doctor</strong></td>
                    <td>Read</td>
                    <td>Full Access</td>
                    <td>Full Access</td>
                    <td>Full Access</td>
                    <td>Full Access</td>
                </tr>
                <tr>
                    <td><strong>Nurse</strong></td>
                    <td>Read</td>
                    <td>Full Access</td>
                    <td>Read/Update</td>
                    <td>Full Access</td>
                    <td>Read</td>
                </tr>
                <tr>
                    <td><strong>Technician</strong></td>
                    <td>Read</td>
                    <td>Limited</td>
                    <td>Full Access</td>
                    <td>Read</td>
                    <td>Read</td>
                </tr>
                <tr>
                    <td><strong>Coordinator</strong></td>
                    <td>Read</td>
                    <td>Read/Update</td>
                    <td>Read</td>
                    <td>Read</td>
                    <td>Full Access</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="footer">
        <p><strong>EVEP Mobile Reflection Unit - Medical Staff ER Diagram</strong></p>
        <p>Document Version: 1.1 | Last Updated: August 30, 2024 | Next Review: November 2024</p>
        <p>This document provides a comprehensive view of medical staff entities, relationships, and responsibilities within the EVEP Mobile Reflection Unit system.</p>
        <p><strong>Implementation Status: ✅ Complete | Ready for Development | Print-Friendly Format</strong></p>
    </div>
</body>
</html>
